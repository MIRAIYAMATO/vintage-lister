<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Vintage Lister v71 (Outerwear System)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* BASE STYLES */
        body { -webkit-tap-highlight-color: transparent; overscroll-behavior-y: contain; user-select: none; background: #f9fafb; padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom); }
        
        /* ANIMATIONS */
        @keyframes pulse-red { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(239, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }
        .recording { animation: pulse-red 1.5s infinite; background-color: #ef4444 !important; border-color: #ef4444 !important; color: white !important; }
        
        .flash { position: absolute; inset: 0; pointer-events: none; z-index: 60; opacity: 0; background: white; }
        .trigger-flash { animation: flash-anim 0.15s ease-out; }
        @keyframes flash-anim { 0% { opacity: 0.8; } 100% { opacity: 0; } }

        @keyframes slide-up { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-slide-up { animation: slide-up 0.3s cubic-bezier(0.16, 1, 0.3, 1); }

        /* FORM ELEMENTS */
        select, option, optgroup { font-size: 13px !important; }
        select { -webkit-appearance: none; appearance: none; background-color: white; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; padding-right: 2.5rem; }
        #reader video { object-fit: cover; border-radius: 0.75rem; }
        
        /* DEFECT MAPPING - SVG ZONE-BASED SYSTEM */
        .map-wrapper { position: relative; width: 100%; height: 100%; touch-action: manipulation; }

        .zone-hit {
            cursor: pointer;
            transition: fill 0.05s;
            fill: rgba(220, 38, 38, 0.25);
            stroke: rgba(220, 38, 38, 0.6);
            stroke-width: 2px;
        }
        
        .zone-hit:active { fill: rgba(220, 38, 38, 0.7) !important; }

        .defect-dot {
            position: absolute; width: 24px; height: 24px;
            background: #ef4444; border: 2px solid white; border-radius: 50%;
            color: white; font-size: 12px; font-weight: bold;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            transform: translate(-50%, -50%);
            pointer-events: none; z-index: 30;
        }

        /* BUTTON STYLES - HIGH CONTRAST */
        .defect-btn-stain { background: #fef9c3; color: #854d0e; border: 2px solid #facc15; }
        .defect-btn-hole  { background: #fee2e2; color: #991b1b; border: 2px solid #f87171; }
        .defect-btn-repair{ background: #dbeafe; color: #1e40af; border: 2px solid #60a5fa; }
        .defect-btn-fade  { background: #f3f4f6; color: #374151; border: 2px solid #d1d5db; }
        
        .btn-selected { 
            background-color: #1d4ed8 !important; /* Blue-700 */
            color: white !important; 
            border: 2px solid #1e3a8a !important; /* Blue-900 */
            font-weight: 800 !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3); 
            transform: scale(1.02);
            z-index: 10;
        }
        
        .btn-default { 
            background-color: white; 
            color: #4b5563; 
            border: 1px solid #e5e7eb; 
            transition: all 0.1s;
        }
        
        .style-chip-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 0.5rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

    </style>
</head>
<body class="pb-40">

    <script>
        const N8N_WEBHOOK_URL = "https://jeffkoga.app.n8n.cloud/webhook/0845a6d3-be69-4b68-aba7-28f55112678c"; 
        const APP_PIN = "1234";
    </script>

    <div id="login-screen" class="fixed inset-0 z-[100] bg-gray-900 flex flex-col items-center justify-center p-4">
        <div class="bg-white p-6 rounded-2xl shadow-2xl w-full max-w-sm text-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Locked</h2>
            <p class="text-gray-500 text-sm mb-4">Enter Warehouse PIN</p>
            <input type="tel" id="pin-input" maxlength="4" class="w-full p-4 text-center text-3xl font-mono border-2 border-gray-300 rounded-xl mb-4 outline-none focus:border-blue-500 tracking-widest" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            
            <div class="mb-4">
                <label class="text-xs font-bold text-gray-400 uppercase tracking-wide block mb-2">Photographer</label>
                <select id="photographer-select" class="w-full p-3 border-2 border-gray-300 rounded-xl text-sm font-bold outline-none focus:border-blue-500 text-gray-800">
                    <option value="P01">P01 ‚Äì Jeff Koga</option>
                    <option value="P02" selected>P02 ‚Äì Elaine Donato</option>
                    <option value="P03">P03 ‚Äì Kobe Gaza</option>
                </select>
            </div>
            
            <button onclick="checkPin()" class="w-full bg-blue-600 text-white font-bold py-3 rounded-xl active:bg-blue-700">UNLOCK</button>
        </div>
    </div>

    <div class="fixed top-0 inset-x-0 bg-white shadow-sm z-40 border-b border-gray-200" style="padding-top: max(0.5rem, env(safe-area-inset-top));">
        <div class="px-4 py-2 flex justify-between items-center">
            <div class="font-bold text-gray-800 text-lg tracking-tight mr-2">Vintage<span class="text-blue-600">Lister</span> v71</div>
            <div class="flex flex-1 bg-gray-100 rounded-lg p-1 gap-1">
                <button onclick="setSuperCategory('tops')" id="mode-tops" class="flex-1 py-2 rounded shadow bg-blue-600 text-white font-bold text-[10px] transition-all">TOPS</button>
                <button onclick="setSuperCategory('bottoms')" id="mode-bottoms" class="flex-1 py-2 rounded text-gray-500 font-bold text-[10px] transition-all">BOTTOMS</button>
                <button onclick="setSuperCategory('outer')" id="mode-outer" class="flex-1 py-2 rounded text-gray-500 font-bold text-[10px] transition-all">OUTER</button>
            </div>
            <button onclick="showPhotographerChange()" id="photographer-badge" class="ml-2 bg-indigo-100 text-indigo-700 text-[10px] font-bold px-2 py-1 rounded">P02</button>
        </div>
        <!-- Progress Bar -->
        <div class="px-4 pb-2">
            <div class="flex items-center gap-2">
                <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
                <span id="progress-text" class="text-[10px] font-bold text-gray-500 w-16 text-right">0 / 7</span>
            </div>
        </div>
    </div>

    <div class="mt-24 px-4 space-y-6 max-w-lg mx-auto pt-4">

        <div id="section-1" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200 space-y-4 transition-all">
            <div>
                <label class="text-xs font-bold text-blue-600 uppercase tracking-wide flex items-center gap-2">
                    <span id="check-category" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                    1. Category (Master Switch)
                </label>
                <select id="cat-select" onchange="handleCategoryChange()" class="w-full mt-1 p-3 border-2 border-blue-100 bg-blue-50/50 rounded-xl text-sm font-bold outline-none focus:border-blue-500 text-gray-800"></select>
            </div>
            
            <div>
                <label class="text-xs font-bold text-gray-400 uppercase tracking-wide flex items-center gap-2">
                    <span id="check-sku" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                    2. SKU Identification
                </label>
                <div class="flex gap-2 mt-1">
                    <input type="number" id="sku-input" inputmode="numeric" onkeydown="if(event.key==='Enter'){this.blur();}" oninput="updateProgress()" class="w-full text-3xl font-mono p-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none placeholder-gray-300" placeholder="Scan SKU">
                    <button onclick="toggleScanner()" class="bg-gray-900 text-white p-3 rounded-xl flex-shrink-0 active:scale-95 transition-transform shadow-lg">
                        <i data-lucide="scan-barcode" class="w-8 h-8"></i>
                    </button>
                </div>
            </div>
            
            <div id="scanner-view" class="hidden mt-3 rounded-xl overflow-hidden border-4 border-gray-900 relative bg-black h-56">
                <div id="reader" class="w-full h-full"></div>
                <button onclick="toggleScanner()" class="absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded shadow">CLOSE</button>
            </div>
        </div>

        <div id="section-photos" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200 transition-all">
            <div class="flex justify-between items-center mb-3">
                <label class="text-xs font-bold text-gray-400 uppercase tracking-wide flex items-center gap-2">
                    <span id="check-photos" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                    3. Main Photos (Money Shots)
                </label>
                <span id="count-main" class="bg-blue-100 text-blue-800 text-xs font-bold px-3 py-1 rounded-full">0</span>
            </div>
            <button onclick="openCamera('main')" class="w-full h-20 border-2 border-dashed border-blue-400 bg-blue-50 rounded-xl flex items-center justify-center gap-2 text-blue-600 font-bold active:bg-blue-100 transition-all shadow-sm">
                <i data-lucide="camera" class="w-6 h-6"></i>
                LAUNCH MAIN CAMERA
            </button>
            <div id="thumbs-main" class="flex gap-2 mt-4 overflow-x-auto pb-2 h-24 empty:hidden snap-x"></div>
        </div>

        <div id="section-features" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200 transition-all">
            <div class="flex items-center justify-between mb-2">
                <label class="text-xs font-bold text-indigo-500 uppercase tracking-wide flex items-center gap-2">
                    <span id="check-features" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                    4. Key Features & Auth
                </label>
                <span id="feature-hint" class="text-[10px] text-gray-400 font-medium">Select Category First</span>
            </div>
            
            <!-- Pattern Dropdown -->
            <div class="mb-4">
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Pattern</label>
                <select id="pattern-select" onchange="handlePatternChange()" class="w-full p-2 border border-gray-300 rounded-xl text-gray-800 font-normal outline-none focus:border-blue-500 text-[11px]">
                    <option value="" disabled>Select Pattern...</option>
                    <option selected>Solid</option>
                    <option>Striped</option>
                    <option>Plaid</option>
                    <option>Check</option>
                    <option>Polka Dot</option>
                    <option>Floral</option>
                    <option>Paisley</option>
                    <option>Geometric</option>
                    <option>Abstract</option>
                    <option>Graphic Print</option>
                    <option>Animal Print</option>
                    <option>Camouflage</option>
                    <option>Tie Dye</option>
                    <option>Colorblock</option>
                    <option>Argyle/Diamond</option>
                    <option>Fair Isle</option>
                    <option>Herringbone</option>
                    <option>Houndstooth</option>
                    <option>Embroidered</option>
                    <option>Other</option>
                </select>
            </div>
            
            <!-- BUTTON SHIRT SUB-TYPE SELECTOR - Shows only for Button Shirt category -->
            <div id="button-shirt-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-indigo-600 uppercase tracking-widest mb-2 block">üîò Button Shirt Type</label>
                <div class="grid grid-cols-3 gap-2 mb-2">
                    <button onclick="setButtonShirtType('Western', this)" class="btn-shirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü§†</span>
                        <span>Western</span>
                        <span class="text-[8px] text-gray-400 font-normal">Pearl snaps</span>
                    </button>
                    <button onclick="setButtonShirtType('Dress', this)" class="btn-shirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëî</span>
                        <span>Dress</span>
                        <span class="text-[8px] text-gray-400 font-normal">Neck sizing</span>
                    </button>
                    <button onclick="setButtonShirtType('Camp', this)" class="btn-shirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèùÔ∏è</span>
                        <span>Camp</span>
                        <span class="text-[8px] text-gray-400 font-normal">Flat collar</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setButtonShirtType('Flannel', this)" class="btn-shirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü™µ</span>
                        <span>Flannel</span>
                        <span class="text-[8px] text-gray-400 font-normal">Plaid/outdoor</span>
                    </button>
                    <button onclick="setButtonShirtType('Work', this)" class="btn-shirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üîß</span>
                        <span>Work</span>
                        <span class="text-[8px] text-gray-400 font-normal">Dickies style</span>
                    </button>
                    <button onclick="setButtonShirtType('Casual', this)" class="btn-shirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üå¥</span>
                        <span>Casual</span>
                        <span class="text-[8px] text-gray-400 font-normal">Other styles</span>
                    </button>
                </div>
            </div>
            
            <!-- POLO SHIRT SUB-TYPE SELECTOR - Shows only for Polo Shirt category -->
            <div id="polo-shirt-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-emerald-600 uppercase tracking-widest mb-2 block">üéæ Polo Shirt Type</label>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="setPoloShirtType('Classic', this)" class="btn-polo-type py-4 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-2xl">üèåÔ∏è</span>
                        <span class="mt-1">Classic Polo</span>
                        <span class="text-[8px] text-gray-400 font-normal">Piqu√©, 2-3 buttons</span>
                    </button>
                    <button onclick="setPoloShirtType('Rugby', this)" class="btn-polo-type py-4 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-2xl">üèâ</span>
                        <span class="mt-1">Rugby Shirt</span>
                        <span class="text-[8px] text-gray-400 font-normal">Heavy jersey, stripes</span>
                    </button>
                </div>
            </div>
            
            <!-- CLASSIC POLO DETAILS -->
            <div id="classic-polo-details" class="hidden mb-4 p-3 bg-emerald-50 rounded-xl border border-emerald-200">
                <label class="text-[10px] font-bold text-emerald-700 uppercase tracking-widest mb-2 block">üèåÔ∏è Classic Polo Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Placket Buttons (#1 vintage tell)</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="setPoloPlacket('2-Button', this)" class="polo-placket-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[10px]">2-Button ‚≠ê</button>
                        <button onclick="setPoloPlacket('3-Button', this)" class="polo-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">3-Button</button>
                        <button onclick="setPoloPlacket('4-Button', this)" class="polo-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">4-Button</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setPoloPlacket('1-Button', this)" class="polo-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">1-Button</button>
                        <button onclick="setPoloPlacket('Zip', this)" class="polo-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Zip</button>
                        <button onclick="setPoloPlacket('Henley', this)" class="polo-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Henley</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Collar Type (Decade indicator)</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="setPoloCollar('Flat Knit', this)" class="polo-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Flat Knit ‚≠ê</button>
                        <button onclick="setPoloCollar('Stiff Piqu√©', this)" class="polo-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Stiff Piqu√©</button>
                        <button onclick="setPoloCollar('Terry Cloth', this)" class="polo-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Terry (70s)</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setPoloCollar('Short 80s', this)" class="polo-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Short (80s)</button>
                        <button onclick="setPoloCollar('Long Soft 90s', this)" class="polo-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Long (90s)</button>
                        <button onclick="setPoloCollar('Contrast', this)" class="polo-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Contrast</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric / Knit Type</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="setPoloKnit('Piqu√©', this)" class="polo-knit-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Piqu√© ‚≠ê</button>
                        <button onclick="setPoloKnit('Flat-Knit', this)" class="polo-knit-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Flat-Knit</button>
                        <button onclick="setPoloKnit('Terry Cloth', this)" class="polo-knit-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Terry</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setPoloKnit('Poly-Cotton', this)" class="polo-knit-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Poly/Ctn</button>
                        <button onclick="setPoloKnit('Jersey', this)" class="polo-knit-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Jersey</button>
                        <button onclick="setPoloKnit('Performance', this)" class="polo-knit-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Performance</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Button Material</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setPoloButton('Thick Matte', this)" class="polo-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Thick‚≠ê</button>
                        <button onclick="setPoloButton('MOP/Shell', this)" class="polo-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">MOP‚≠ê</button>
                        <button onclick="setPoloButton('Resin', this)" class="polo-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Resin</button>
                        <button onclick="setPoloButton('Thin Glossy', this)" class="polo-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Thin</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Logo/Embroidery Quality</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setPoloLogo('Dense Thick', this)" class="polo-logo-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Dense‚≠ê</button>
                        <button onclick="setPoloLogo('Stitched Patch', this)" class="polo-logo-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Patch‚≠ê</button>
                        <button onclick="setPoloLogo('Printed', this)" class="polo-logo-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Printed</button>
                        <button onclick="setPoloLogo('None', this)" class="polo-logo-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Sleeve Bands</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setPoloSleeve('Tight Rib', this)" class="polo-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tight‚≠ê</button>
                        <button onclick="setPoloSleeve('Contrast', this)" class="polo-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Contrast</button>
                        <button onclick="setPoloSleeve('Relaxed', this)" class="polo-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Relaxed</button>
                        <button onclick="setPoloSleeve('None', this)" class="polo-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Hem Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setPoloHem('Tennis Tail', this)" class="polo-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tennis Tail‚≠ê</button>
                        <button onclick="setPoloHem('Side Vents', this)" class="polo-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Side Vents</button>
                        <button onclick="setPoloHem('Straight', this)" class="polo-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Straight</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Silhouette / Fit</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setPoloSilhouette('70s Slim', this)" class="polo-sil-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">70s Slim</button>
                        <button onclick="setPoloSilhouette('80s Boxy', this)" class="polo-sil-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">80s Boxy</button>
                        <button onclick="setPoloSilhouette('90s Oversized', this)" class="polo-sil-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s Over</button>
                        <button onclick="setPoloSilhouette('Modern Fitted', this)" class="polo-sil-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- RUGBY SHIRT DETAILS -->
            <div id="rugby-details" class="hidden mb-4 p-3 bg-rose-50 rounded-xl border border-rose-200">
                <label class="text-[10px] font-bold text-rose-700 uppercase tracking-widest mb-2 block">üèâ Rugby Shirt Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Collar (#1 authenticity tell)</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="setRugbyCollar('Heavy Twill', this)" class="rugby-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Heavy Twill‚≠ê</button>
                        <button onclick="setRugbyCollar('Contrast White', this)" class="rugby-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Contrast‚≠ê</button>
                        <button onclick="setRugbyCollar('Rounded 70s', this)" class="rugby-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Rounded</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setRugbyCollar('Boxy 90s', this)" class="rugby-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Boxy 90s</button>
                        <button onclick="setRugbyCollar('Thin/Soft', this)" class="rugby-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Thin (mod)</button>
                        <button onclick="setRugbyCollar('Other', this)" class="rugby-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Button Material (Rubber = top-tier vintage)</label>
                    <div class="grid grid-cols-2 gap-2 mb-1">
                        <button onclick="setRugbyButton('Rubber', this)" id="btn-rugby-rubber" class="rugby-button-btn py-3 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[10px] shadow-inner">üî∂ RUBBER ‚≠ê‚≠ê</button>
                        <button onclick="setRugbyButton('Rubberized', this)" class="rugby-button-btn py-3 border-2 border-amber-300 bg-amber-50/50 rounded-lg font-bold text-amber-600 text-[10px]">Rubberized ‚≠ê</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setRugbyButton('Thick Plastic', this)" class="rugby-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Thick Plastic</button>
                        <button onclick="setRugbyButton('Donut', this)" class="rugby-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Donut (70s)</button>
                        <button onclick="setRugbyButton('Thin Glossy', this)" class="rugby-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Thin (mod)</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Placket Buttons</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setRugbyPlacket('2-Button', this)" class="rugby-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">2-Button</button>
                        <button onclick="setRugbyPlacket('3-Button', this)" class="rugby-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">3-Button</button>
                        <button onclick="setRugbyPlacket('Other', this)" class="rugby-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Stripe Pattern (Huge indicator)</label>
                    <div class="grid grid-cols-2 gap-2 mb-1">
                        <button onclick="setRugbyStripe('Wide Woven', this)" class="rugby-stripe-btn py-2 border-2 border-emerald-400 bg-emerald-50 rounded-lg font-bold text-emerald-700 text-[10px]">Wide Woven ‚≠ê</button>
                        <button onclick="setRugbyStripe('Printed', this)" class="rugby-stripe-btn py-2 border border-red-300 rounded-lg font-bold text-red-500 text-[10px] bg-white">Printed (mod)</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setRugbyStripe('Solid', this)" class="rugby-stripe-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Solid</button>
                        <button onclick="setRugbyStripe('Color Block', this)" class="rugby-stripe-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Color Block</button>
                        <button onclick="setRugbyStripe('Thin Stripes', this)" class="rugby-stripe-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Thin (mod)</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Cuffs (VERY iconic 80s-90s)</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setRugbyCuff('Thick Ribbed', this)" class="rugby-cuff-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[10px]">Thick Rib ‚≠ê</button>
                        <button onclick="setRugbyCuff('Sturdy', this)" class="rugby-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Sturdy</button>
                        <button onclick="setRugbyCuff('Weak/Loose', this)" class="rugby-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Weak (mod)</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Team Elements</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="toggleRugbyTeam('Embroidered Crest', this)" class="rugby-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Crest‚≠ê</button>
                        <button onclick="toggleRugbyTeam('Twill Patch', this)" class="rugby-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Patch‚≠ê</button>
                        <button onclick="toggleRugbyTeam('Numbers', this)" class="rugby-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Numbers</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleRugbyTeam('Elbow Patches', this)" class="rugby-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Elbow</button>
                        <button onclick="toggleRugbyTeam('Chest Patch', this)" class="rugby-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Chest</button>
                        <button onclick="toggleRugbyTeam('None', this)" class="rugby-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Hem Style</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setRugbyHem('Straight', this)" class="rugby-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Straight‚≠ê</button>
                        <button onclick="setRugbyHem('Mini Vents', this)" class="rugby-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mini Vents</button>
                        <button onclick="setRugbyHem('Wide Fold', this)" class="rugby-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Wide Fold</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Silhouette</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setRugbySilhouette('Boxy Wide', this)" class="rugby-sil-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Boxy‚≠ê</button>
                        <button onclick="setRugbySilhouette('90s Oversized', this)" class="rugby-sil-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s Over</button>
                        <button onclick="setRugbySilhouette('Slim Long', this)" class="rugby-sil-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Slim (mod)</button>
                    </div>
                </div>
            </div>
            
            <!-- TANK TOP DETAIL SECTION - Shows only for Tank Top category -->
            <div id="tank-top-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-violet-600 uppercase tracking-widest mb-2 block">üéΩ Tank Top Style</label>
                
                <div class="p-3 bg-violet-50 rounded-xl border border-violet-200">
                    <div class="mb-3">
                        <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Neckline / Style</label>
                        <div class="grid grid-cols-3 gap-1 mb-1">
                            <button onclick="setTankStyle('Crew', this)" class="tank-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Crew</button>
                            <button onclick="setTankStyle('V-Neck', this)" class="tank-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">V-Neck</button>
                            <button onclick="setTankStyle('Scoop', this)" class="tank-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Scoop</button>
                        </div>
                        <div class="grid grid-cols-3 gap-1">
                            <button onclick="setTankStyle('Racerback', this)" class="tank-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Racerback‚≠ê</button>
                            <button onclick="setTankStyle('Stringer', this)" class="tank-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Stringer‚≠ê</button>
                            <button onclick="setTankStyle('Muscle', this)" class="tank-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Muscle Cut</button>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Strap Width</label>
                        <div class="grid grid-cols-3 gap-2">
                            <button onclick="setTankStrap('Wide', this)" class="tank-strap-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[10px]">Wide ‚≠ê</button>
                            <button onclick="setTankStrap('Standard', this)" class="tank-strap-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Standard</button>
                            <button onclick="setTankStrap('Thin', this)" class="tank-strap-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Thin</button>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Armhole Finish</label>
                        <div class="grid grid-cols-3 gap-1">
                            <button onclick="setTankArmhole('Bound/Finished', this)" class="tank-arm-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Bound‚≠ê</button>
                            <button onclick="setTankArmhole('Deep Cut', this)" class="tank-arm-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Deep Cut</button>
                            <button onclick="setTankArmhole('Raw Edge', this)" class="tank-arm-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Raw Edge</button>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Binding / Trim Type</label>
                        <div class="grid grid-cols-3 gap-1">
                            <button onclick="setTankBinding('Ribbed', this)" class="tank-bind-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Ribbed ‚≠ê</button>
                            <button onclick="setTankBinding('Self-Fabric', this)" class="tank-bind-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Self-Fabric</button>
                            <button onclick="setTankBinding('Contrast', this)" class="tank-bind-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Contrast</button>
                        </div>
                    </div>
                    
                    <div>
                        <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Construction (Check side seams)</label>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="setTankConstruction('Tubular', this)" class="tank-const-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[10px]">Tubular (No seams) ‚≠ê</button>
                            <button onclick="setTankConstruction('Side Seams', this)" class="tank-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Side Seams</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- JERSEY SPORT TYPE SELECTOR - Shows only for Jersey category -->
            <div id="jersey-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-sky-600 uppercase tracking-widest mb-2 block">üèÜ Jersey Sport Type</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setJerseyType('Baseball', this)" class="btn-jersey-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-xl">‚öæ</span>
                        <span class="text-[10px]">Baseball</span>
                    </button>
                    <button onclick="setJerseyType('Basketball', this)" class="btn-jersey-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-xl">üèÄ</span>
                        <span class="text-[10px]">Basketball</span>
                    </button>
                    <button onclick="setJerseyType('Football', this)" class="btn-jersey-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-xl">üèà</span>
                        <span class="text-[10px]">Football</span>
                    </button>
                    <button onclick="setJerseyType('Hockey', this)" class="btn-jersey-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-xl">üèí</span>
                        <span class="text-[10px]">Hockey</span>
                    </button>
                </div>
                <div class="grid grid-cols-4 gap-2 mt-2">
                    <button onclick="setJerseyType('Soccer', this)" class="btn-jersey-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-xl">‚öΩ</span>
                        <span class="text-[10px]">Soccer</span>
                    </button>
                    <button onclick="setJerseyType('Cycling', this)" class="btn-jersey-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-xl">üö¥</span>
                        <span class="text-[10px]">Cycling</span>
                    </button>
                    <button onclick="setJerseyType('Racing', this)" class="btn-jersey-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-xl">üèéÔ∏è</span>
                        <span class="text-[10px]">Racing</span>
                    </button>
                    <button onclick="setJerseyType('Athletic', this)" class="btn-jersey-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-xl">üéΩ</span>
                        <span class="text-[10px]">Practice</span>
                    </button>
                </div>
            </div>
            
            <!-- BASEBALL JERSEY DETAILS -->
            <div id="baseball-jersey-details" class="hidden mb-4 p-3 bg-red-50 rounded-xl border border-red-200">
                <label class="text-[10px] font-bold text-red-700 uppercase tracking-widest mb-2 block">‚öæ Baseball Jersey Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBaseballStyle('Button-Front', this)" class="bb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Button-Front</button>
                        <button onclick="setBaseballStyle('Pullover', this)" class="bb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pullover</button>
                        <button onclick="setBaseballStyle('Henley', this)" class="bb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Henley</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric (Major vintage tell)</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setBaseballFabric('Flannel/Wool', this)" class="bb-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Flannel‚≠ê</button>
                        <button onclick="setBaseballFabric('Wool Blend', this)" class="bb-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Wool Blend</button>
                        <button onclick="setBaseballFabric('Polyester', this)" class="bb-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Polyester</button>
                        <button onclick="setBaseballFabric('Mesh', this)" class="bb-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mesh</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Lettering / Numbers</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setBaseballLettering('Chain Stitch', this)" class="bb-letter-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Chain‚≠ê</button>
                        <button onclick="setBaseballLettering('Tackle Twill', this)" class="bb-letter-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tackle Twill</button>
                        <button onclick="setBaseballLettering('Sewn', this)" class="bb-letter-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sewn</button>
                        <button onclick="setBaseballLettering('Screen Print', this)" class="bb-letter-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Screen</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Player Name / Number</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJerseyNameNum('Both', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Both</button>
                        <button onclick="setJerseyNameNum('Number Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Number</button>
                        <button onclick="setJerseyNameNum('Name Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Name</button>
                        <button onclick="setJerseyNameNum('Neither', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Neither</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Indicators (select all)</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleJerseyEra('MLB Logo', this)" class="jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">MLB Logo</button>
                        <button onclick="toggleJerseyEra('Team Patch', this)" class="jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Team Patch</button>
                        <button onclick="toggleJerseyEra('Anniversary', this)" class="jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Anniversary</button>
                    </div>
                </div>
            </div>
            
            <!-- BASKETBALL JERSEY DETAILS -->
            <div id="basketball-jersey-details" class="hidden mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200">
                <label class="text-[10px] font-bold text-orange-700 uppercase tracking-widest mb-2 block">üèÄ Basketball Jersey Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Cut / Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBasketballStyle('Tank', this)" class="bball-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tank (Standard)</button>
                        <button onclick="setBasketballStyle('Shooting Shirt', this)" class="bball-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Shooting Shirt</button>
                        <button onclick="setBasketballStyle('Warm-Up', this)" class="bball-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Warm-Up</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Mesh / Fabric Type</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBasketballMesh('Heavy Mesh', this)" class="bball-mesh-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Heavy Mesh‚≠ê</button>
                        <button onclick="setBasketballMesh('Lightweight', this)" class="bball-mesh-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Lightweight</button>
                        <button onclick="setBasketballMesh('Solid Knit', this)" class="bball-mesh-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Solid Knit</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Numbers / Lettering</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBasketballNumbers('Tackle Twill', this)" class="bball-num-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Tackle Twill‚≠ê</button>
                        <button onclick="setBasketballNumbers('Sewn', this)" class="bball-num-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sewn</button>
                        <button onclick="setBasketballNumbers('Screen Print', this)" class="bball-num-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Screen Print</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Player Name / Number</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJerseyNameNum('Both', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Both</button>
                        <button onclick="setJerseyNameNum('Number Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Number</button>
                        <button onclick="setJerseyNameNum('Name Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Name</button>
                        <button onclick="setJerseyNameNum('Neither', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Neither</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era / League</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setBasketballEra('NBA', this)" class="bball-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">NBA</button>
                        <button onclick="setBasketballEra('ABA', this)" class="bball-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">ABA‚≠ê</button>
                        <button onclick="setBasketballEra('College', this)" class="bball-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">College</button>
                        <button onclick="setBasketballEra('Other', this)" class="bball-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- FOOTBALL JERSEY DETAILS -->
            <div id="football-jersey-details" class="hidden mb-4 p-3 bg-green-50 rounded-xl border border-green-200">
                <label class="text-[10px] font-bold text-green-700 uppercase tracking-widest mb-2 block">üèà Football Jersey Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style / Cut</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setFootballStyle('Authentic', this)" class="fb-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Authentic‚≠ê</button>
                        <button onclick="setFootballStyle('Replica', this)" class="fb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Replica</button>
                        <button onclick="setFootballStyle('Practice', this)" class="fb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Practice</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Mesh / Fabric Type</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setFootballMesh('Heavy Game', this)" class="fb-mesh-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Heavy Game‚≠ê</button>
                        <button onclick="setFootballMesh('Lightweight', this)" class="fb-mesh-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Lightweight</button>
                        <button onclick="setFootballMesh('Nylon', this)" class="fb-mesh-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Nylon</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Numbers / Lettering</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setFootballNumbers('Tackle Twill', this)" class="fb-num-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Tackle Twill‚≠ê</button>
                        <button onclick="setFootballNumbers('Sewn', this)" class="fb-num-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sewn</button>
                        <button onclick="setFootballNumbers('Screen Print', this)" class="fb-num-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Screen Print</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Player Name / Number</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJerseyNameNum('Both', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Both</button>
                        <button onclick="setJerseyNameNum('Number Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Number</button>
                        <button onclick="setJerseyNameNum('Name Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Name</button>
                        <button onclick="setJerseyNameNum('Neither', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Neither</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Indicators</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleJerseyEra('NFL Shield', this)" class="jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">NFL Shield</button>
                        <button onclick="toggleJerseyEra('Team Patch', this)" class="jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Team Patch</button>
                        <button onclick="toggleJerseyEra('Anniversary', this)" class="jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Anniversary</button>
                    </div>
                </div>
            </div>
            
            <!-- HOCKEY JERSEY DETAILS -->
            <div id="hockey-jersey-details" class="hidden mb-4 p-3 bg-blue-50 rounded-xl border border-blue-200">
                <label class="text-[10px] font-bold text-blue-700 uppercase tracking-widest mb-2 block">üèí Hockey Jersey Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style / Cut</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setHockeyStyle('Authentic', this)" class="hk-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Authentic‚≠ê</button>
                        <button onclick="setHockeyStyle('Replica', this)" class="hk-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Replica</button>
                        <button onclick="setHockeyStyle('Practice', this)" class="hk-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Practice</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fight Strap (Authentic = Yes)</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setHockeyFightStrap('Yes', this)" class="hk-strap-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[10px]">Fight Strap ‚≠ê</button>
                        <button onclick="setHockeyFightStrap('No', this)" class="hk-strap-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">No Strap</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Crest / Logo Construction</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setHockeyCrest('Sewn/Embroidered', this)" class="hk-crest-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Sewn‚≠ê</button>
                        <button onclick="setHockeyCrest('Heat-Pressed', this)" class="hk-crest-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Heat-Press</button>
                        <button onclick="setHockeyCrest('Screen Print', this)" class="hk-crest-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Screen</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Player Name / Number</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJerseyNameNum('Both', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Both</button>
                        <button onclick="setJerseyNameNum('Number Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Number</button>
                        <button onclick="setJerseyNameNum('Name Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Name</button>
                        <button onclick="setJerseyNameNum('Neither', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Neither</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Manufacturer Era</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setHockeyEra('CCM', this)" class="hk-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">CCM‚≠ê</button>
                        <button onclick="setHockeyEra('Starter', this)" class="hk-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Starter</button>
                        <button onclick="setHockeyEra('Koho', this)" class="hk-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Koho</button>
                        <button onclick="setHockeyEra('Reebok/Adidas', this)" class="hk-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Reebok+</button>
                    </div>
                </div>
            </div>
            
            <!-- SOCCER JERSEY DETAILS -->
            <div id="soccer-jersey-details" class="hidden mb-4 p-3 bg-lime-50 rounded-xl border border-lime-200">
                <label class="text-[10px] font-bold text-lime-700 uppercase tracking-widest mb-2 block">‚öΩ Soccer Jersey Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setSoccerStyle('Match/Authentic', this)" class="soccer-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Authentic</button>
                        <button onclick="setSoccerStyle('Replica', this)" class="soccer-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Replica</button>
                        <button onclick="setSoccerStyle('Training', this)" class="soccer-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Training</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Sponsor Logo</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setSoccerSponsor('Yes', this)" class="soccer-sponsor-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Has Sponsor</button>
                        <button onclick="setSoccerSponsor('No', this)" class="soccer-sponsor-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">No Sponsor</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Player Name / Number</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJerseyNameNum('Both', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Both</button>
                        <button onclick="setJerseyNameNum('Number Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Number</button>
                        <button onclick="setJerseyNameNum('Name Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Name</button>
                        <button onclick="setJerseyNameNum('Neither', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Neither</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Badges (select all)</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleJerseyEra('League Patch', this)" class="jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">League</button>
                        <button onclick="toggleJerseyEra('Cup Patch', this)" class="jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cup</button>
                        <button onclick="toggleJerseyEra('Player Issue', this)" class="jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Player Issue</button>
                    </div>
                </div>
            </div>
            
            <!-- CYCLING JERSEY DETAILS -->
            <div id="cycling-jersey-details" class="hidden mb-4 p-3 bg-yellow-50 rounded-xl border border-yellow-200">
                <label class="text-[10px] font-bold text-yellow-700 uppercase tracking-widest mb-2 block">üö¥ Cycling Jersey Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCyclingStyle('Full Zip', this)" class="cycling-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Full Zip</button>
                        <button onclick="setCyclingStyle('Half Zip', this)" class="cycling-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Half Zip</button>
                        <button onclick="setCyclingStyle('Pullover', this)" class="cycling-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pullover</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Pockets</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setCyclingPockets('3-Pocket Back', this)" class="cycling-pocket-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">3-Pocket‚≠ê</button>
                        <button onclick="setCyclingPockets('No Pockets', this)" class="cycling-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">No Pockets</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCyclingFabric('Wool', this)" class="cycling-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Wool‚≠ê</button>
                        <button onclick="setCyclingFabric('Poly', this)" class="cycling-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Poly</button>
                        <button onclick="setCyclingFabric('Technical', this)" class="cycling-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Technical</button>
                    </div>
                </div>
            </div>
            
            <!-- RACING JERSEY DETAILS -->
            <div id="racing-jersey-details" class="hidden mb-4 p-3 bg-gray-100 rounded-xl border border-gray-300">
                <label class="text-[10px] font-bold text-gray-700 uppercase tracking-widest mb-2 block">üèéÔ∏è Racing/Moto Jersey Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Type</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setRacingType('Motocross', this)" class="racing-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Motocross</button>
                        <button onclick="setRacingType('NASCAR', this)" class="racing-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">NASCAR</button>
                        <button onclick="setRacingType('BMX', this)" class="racing-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">BMX</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Sponsor Patches</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setRacingPatches('Heavy', this)" class="racing-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Heavy</button>
                        <button onclick="setRacingPatches('Light', this)" class="racing-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Light</button>
                        <button onclick="setRacingPatches('None', this)" class="racing-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Player Name / Number</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJerseyNameNum('Both', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Both</button>
                        <button onclick="setJerseyNameNum('Number Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Number</button>
                        <button onclick="setJerseyNameNum('Name Only', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Name</button>
                        <button onclick="setJerseyNameNum('Neither', this)" class="jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Neither</button>
                    </div>
                </div>
            </div>
            
            <!-- ATHLETIC/PRACTICE JERSEY DETAILS -->
            <div id="athletic-jersey-details" class="hidden mb-4 p-3 bg-purple-50 rounded-xl border border-purple-200">
                <label class="text-[10px] font-bold text-purple-700 uppercase tracking-widest mb-2 block">üéΩ Athletic/Practice Jersey Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setAthleticStyle('Mesh Pinnie', this)" class="ath-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mesh Pinnie</button>
                        <button onclick="setAthleticStyle('Practice Jersey', this)" class="ath-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Practice</button>
                        <button onclick="setAthleticStyle('Warm-Up', this)" class="ath-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Warm-Up</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Reversible</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setAthleticReversible('Yes', this)" class="ath-rev-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Reversible</button>
                        <button onclick="setAthleticReversible('No', this)" class="ath-rev-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Single Side</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Team / School</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setAthleticTeam('Has Logo', this)" class="ath-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Has Logo/Team</button>
                        <button onclick="setAthleticTeam('Blank', this)" class="ath-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Blank</button>
                    </div>
                </div>
            </div>
            
            <!-- BLOUSE STYLE TYPE SELECTOR - Shows only for Blouse category -->
            <div id="blouse-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-pink-600 uppercase tracking-widest mb-2 block">üëö Blouse Style Type</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setBlouseType('Pussy Bow', this)" class="btn-blouse-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üéÄ</span>
                        <span class="text-[9px]">Pussy Bow</span>
                    </button>
                    <button onclick="setBlouseType('Victorian', this)" class="btn-blouse-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëó</span>
                        <span class="text-[9px]">Victorian</span>
                    </button>
                    <button onclick="setBlouseType('Peasant', this)" class="btn-blouse-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üå∏</span>
                        <span class="text-[9px]">Peasant</span>
                    </button>
                    <button onclick="setBlouseType('Button-Front', this)" class="btn-blouse-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üíº</span>
                        <span class="text-[9px]">Button-Front</span>
                    </button>
                </div>
                <div class="grid grid-cols-4 gap-2 mt-2">
                    <button onclick="setBlouseType('Wrap', this)" class="btn-blouse-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üåä</span>
                        <span class="text-[9px]">Wrap</span>
                    </button>
                    <button onclick="setBlouseType('Dressy', this)" class="btn-blouse-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚ú®</span>
                        <span class="text-[9px]">Dressy</span>
                    </button>
                    <button onclick="setBlouseType('Western', this)" class="btn-blouse-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü§†</span>
                        <span class="text-[9px]">Western</span>
                    </button>
                    <button onclick="setBlouseType('Casual', this)" class="btn-blouse-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëö</span>
                        <span class="text-[9px]">Casual</span>
                    </button>
                </div>
            </div>
            
            <!-- BLOUSE UNIVERSAL FIELDS - Shows when any blouse type selected -->
            <div id="blouse-universal-fields" class="hidden mb-4 p-3 bg-pink-50 rounded-xl border border-pink-200">
                <label class="text-[10px] font-bold text-pink-700 uppercase tracking-widest mb-2 block">üëö Blouse Details (All Styles)</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric (Primary value indicator!)</label>
                    <div class="grid grid-cols-4 gap-1 mb-1">
                        <button onclick="setBlouseFabric('Silk', this)" class="blouse-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Silk ‚≠ê‚≠ê</button>
                        <button onclick="setBlouseFabric('Rayon', this)" class="blouse-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Rayon ‚≠ê</button>
                        <button onclick="setBlouseFabric('Lace', this)" class="blouse-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Lace</button>
                        <button onclick="setBlouseFabric('Chiffon', this)" class="blouse-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Chiffon</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setBlouseFabric('Cotton', this)" class="blouse-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cotton</button>
                        <button onclick="setBlouseFabric('Polyester', this)" class="blouse-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Polyester</button>
                        <button onclick="setBlouseFabric('Satin', this)" class="blouse-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Satin</button>
                        <button onclick="setBlouseFabric('Blend', this)" class="blouse-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Blend</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Closure Type (Vintage tell!)</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="setBlouseClosure('Back Buttons', this)" class="blouse-closure-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Back Buttons‚≠ê</button>
                        <button onclick="setBlouseClosure('Side Zip', this)" class="blouse-closure-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Side Zip‚≠ê</button>
                        <button onclick="setBlouseClosure('Front Buttons', this)" class="blouse-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Front Buttons</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBlouseClosure('Pullover', this)" class="blouse-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pullover</button>
                        <button onclick="setBlouseClosure('Tie/Wrap', this)" class="blouse-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tie/Wrap</button>
                        <button onclick="setBlouseClosure('Hooks/Snaps', this)" class="blouse-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Hooks/Snaps</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Sleeve Style (Era indicator!)</label>
                    <div class="grid grid-cols-4 gap-1 mb-1">
                        <button onclick="setBlouseSleeve('Leg-o-mutton', this)" class="blouse-sleeve-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Leg-o-mut‚≠ê</button>
                        <button onclick="setBlouseSleeve('Bishop', this)" class="blouse-sleeve-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Bishop‚≠ê</button>
                        <button onclick="setBlouseSleeve('Puff', this)" class="blouse-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Puff</button>
                        <button onclick="setBlouseSleeve('Bell', this)" class="blouse-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Bell</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setBlouseSleeve('Flutter', this)" class="blouse-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Flutter</button>
                        <button onclick="setBlouseSleeve('Long', this)" class="blouse-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Long</button>
                        <button onclick="setBlouseSleeve('Short', this)" class="blouse-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Short</button>
                        <button onclick="setBlouseSleeve('Sleeveless', this)" class="blouse-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sleeveless</button>
                    </div>
                </div>
            </div>
            
            <!-- PUSSY BOW / SECRETARY BLOUSE DETAILS -->
            <div id="pussybow-blouse-details" class="hidden mb-4 p-3 bg-rose-50 rounded-xl border border-rose-200">
                <label class="text-[10px] font-bold text-rose-700 uppercase tracking-widest mb-2 block">üéÄ Pussy Bow / Secretary Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Bow Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setPussyBowStyle('Long Tie', this)" class="pb-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Long Tie‚≠ê</button>
                        <button onclick="setPussyBowStyle('Short Bow', this)" class="pb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Short Bow</button>
                        <button onclick="setPussyBowStyle('Removable', this)" class="pb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Removable</button>
                        <button onclick="setPussyBowStyle('Attached', this)" class="pb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Attached</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Collar</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setPussyBowCollar('None (bow only)', this)" class="pb-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                        <button onclick="setPussyBowCollar('Pointed', this)" class="pb-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pointed</button>
                        <button onclick="setPussyBowCollar('Rounded', this)" class="pb-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Rounded</button>
                    </div>
                </div>
            </div>
            
            <!-- VICTORIAN / HIGH NECK BLOUSE DETAILS -->
            <div id="victorian-blouse-details" class="hidden mb-4 p-3 bg-purple-50 rounded-xl border border-purple-200">
                <label class="text-[10px] font-bold text-purple-700 uppercase tracking-widest mb-2 block">üëó Victorian / High Neck Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Neckline</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setVictorianNeck('High Collar', this)" class="vict-neck-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">High Collar‚≠ê</button>
                        <button onclick="setVictorianNeck('Mock Neck', this)" class="vict-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mock Neck</button>
                        <button onclick="setVictorianNeck('Ruffle Neck', this)" class="vict-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Ruffle Neck</button>
                        <button onclick="setVictorianNeck('Lace Collar', this)" class="vict-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Lace Collar</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Details (select all that apply)</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="toggleVictorianDetail('Pintucks', this)" class="vict-detail-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Pintucks‚≠ê</button>
                        <button onclick="toggleVictorianDetail('Lace Insertion', this)" class="vict-detail-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Lace Insert‚≠ê</button>
                        <button onclick="toggleVictorianDetail('Ruffles', this)" class="vict-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Ruffles</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleVictorianDetail('Jabot', this)" class="vict-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Jabot</button>
                        <button onclick="toggleVictorianDetail('Eyelet', this)" class="vict-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Eyelet</button>
                        <button onclick="toggleVictorianDetail('Embroidery', this)" class="vict-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Embroidery</button>
                    </div>
                </div>
            </div>
            
            <!-- PEASANT / BOHO BLOUSE DETAILS -->
            <div id="peasant-blouse-details" class="hidden mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200">
                <label class="text-[10px] font-bold text-orange-700 uppercase tracking-widest mb-2 block">üå∏ Peasant / Boho Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Neckline Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setPeasantNeck('Gathered', this)" class="peas-neck-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Gathered‚≠ê</button>
                        <button onclick="setPeasantNeck('Smocked', this)" class="peas-neck-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Smocked‚≠ê</button>
                        <button onclick="setPeasantNeck('Square', this)" class="peas-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Square</button>
                        <button onclick="setPeasantNeck('Off-Shoulder', this)" class="peas-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Off-Shoulder</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Embellishment</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setPeasantEmbellish('Embroidered', this)" class="peas-emb-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Emb‚≠ê</button>
                        <button onclick="setPeasantEmbellish('Crochet', this)" class="peas-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Crochet</button>
                        <button onclick="setPeasantEmbellish('Tassels', this)" class="peas-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tassels</button>
                        <button onclick="setPeasantEmbellish('Beading', this)" class="peas-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Beading</button>
                        <button onclick="setPeasantEmbellish('None', this)" class="peas-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
            </div>
            
            <!-- BUTTON-FRONT / OFFICE BLOUSE DETAILS -->
            <div id="buttonfront-blouse-details" class="hidden mb-4 p-3 bg-slate-100 rounded-xl border border-slate-300">
                <label class="text-[10px] font-bold text-slate-700 uppercase tracking-widest mb-2 block">üíº Button-Front / Office Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Collar Style</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setButtonFrontCollar('Pointed', this)" class="bf-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pointed</button>
                        <button onclick="setButtonFrontCollar('Spread', this)" class="bf-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Spread</button>
                        <button onclick="setButtonFrontCollar('Mandarin', this)" class="bf-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mandarin</button>
                        <button onclick="setButtonFrontCollar('Peter Pan', this)" class="bf-collar-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Peter Pan‚≠ê</button>
                        <button onclick="setButtonFrontCollar('None', this)" class="bf-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Cuff Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setButtonFrontCuff('French Cuff', this)" class="bf-cuff-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">French Cuff‚≠ê</button>
                        <button onclick="setButtonFrontCuff('Button Cuff', this)" class="bf-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Button Cuff</button>
                        <button onclick="setButtonFrontCuff('Convertible', this)" class="bf-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Convertible</button>
                    </div>
                </div>
            </div>
            
            <!-- WRAP / SURPLICE BLOUSE DETAILS -->
            <div id="wrap-blouse-details" class="hidden mb-4 p-3 bg-teal-50 rounded-xl border border-teal-200">
                <label class="text-[10px] font-bold text-teal-700 uppercase tracking-widest mb-2 block">üåä Wrap / Surplice Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Wrap Type</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWrapType('True Wrap', this)" class="wrap-type-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">True Wrap‚≠ê</button>
                        <button onclick="setWrapType('Faux Wrap', this)" class="wrap-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Faux Wrap</button>
                        <button onclick="setWrapType('Surplice', this)" class="wrap-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Surplice</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Neckline Depth</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWrapNeckline('Deep V', this)" class="wrap-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Deep V</button>
                        <button onclick="setWrapNeckline('Modest V', this)" class="wrap-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modest V</button>
                        <button onclick="setWrapNeckline('Crossover', this)" class="wrap-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Crossover</button>
                    </div>
                </div>
            </div>
            
            <!-- DRESSY / EVENING BLOUSE DETAILS -->
            <div id="dressy-blouse-details" class="hidden mb-4 p-3 bg-violet-50 rounded-xl border border-violet-200">
                <label class="text-[10px] font-bold text-violet-700 uppercase tracking-widest mb-2 block">‚ú® Dressy / Evening Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Embellishment</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setDressyEmbellish('Beading', this)" class="dressy-emb-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Beading‚≠ê</button>
                        <button onclick="setDressyEmbellish('Sequins', this)" class="dressy-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sequins</button>
                        <button onclick="setDressyEmbellish('Metallic', this)" class="dressy-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Metallic</button>
                        <button onclick="setDressyEmbellish('Lace', this)" class="dressy-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Lace</button>
                        <button onclick="setDressyEmbellish('None', this)" class="dressy-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Sheerness</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDressySheer('Sheer', this)" class="dressy-sheer-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sheer</button>
                        <button onclick="setDressySheer('Semi-Sheer', this)" class="dressy-sheer-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Semi-Sheer</button>
                        <button onclick="setDressySheer('Opaque', this)" class="dressy-sheer-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Opaque</button>
                        <button onclick="setDressySheer('Lined', this)" class="dressy-sheer-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Lined</button>
                    </div>
                </div>
            </div>
            
            <!-- WESTERN BLOUSE DETAILS -->
            <div id="western-blouse-details" class="hidden mb-4 p-3 bg-amber-50 rounded-xl border border-amber-200">
                <label class="text-[10px] font-bold text-amber-700 uppercase tracking-widest mb-2 block">ü§† Western Blouse Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Closure</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWesternBlouseClosure('Pearl Snaps', this)" class="wb-closure-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Pearl Snaps‚≠ê</button>
                        <button onclick="setWesternBlouseClosure('Metal Snaps', this)" class="wb-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Metal Snaps</button>
                        <button onclick="setWesternBlouseClosure('Buttons', this)" class="wb-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Buttons</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Details (select all)</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="toggleWesternBlouseDetail('Yoke', this)" class="wb-detail-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Yoke‚≠ê</button>
                        <button onclick="toggleWesternBlouseDetail('Embroidered', this)" class="wb-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Embroid</button>
                        <button onclick="toggleWesternBlouseDetail('Fringe', this)" class="wb-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Fringe</button>
                        <button onclick="toggleWesternBlouseDetail('Piping', this)" class="wb-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Piping</button>
                    </div>
                </div>
            </div>
            
            <!-- CASUAL / BASIC BLOUSE DETAILS -->
            <div id="casual-blouse-details" class="hidden mb-4 p-3 bg-gray-100 rounded-xl border border-gray-300">
                <label class="text-[10px] font-bold text-gray-700 uppercase tracking-widest mb-2 block">üëö Casual / Basic Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCasualBlouseStyle('Pullover', this)" class="cb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pullover</button>
                        <button onclick="setCasualBlouseStyle('Popover', this)" class="cb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Popover</button>
                        <button onclick="setCasualBlouseStyle('Tunic-Length', this)" class="cb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tunic-Length</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Neckline</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setCasualBlouseNeck('Crew', this)" class="cb-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Crew</button>
                        <button onclick="setCasualBlouseNeck('V-Neck', this)" class="cb-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">V-Neck</button>
                        <button onclick="setCasualBlouseNeck('Scoop', this)" class="cb-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Scoop</button>
                        <button onclick="setCasualBlouseNeck('Henley', this)" class="cb-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Henley</button>
                    </div>
                </div>
            </div>
            
            <!-- TUNIC STYLE TYPE SELECTOR - Shows only for Tunic category -->
            <div id="tunic-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-emerald-600 uppercase tracking-widest mb-2 block">üëò Tunic Style Type</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setTunicType('Dashiki', this)" class="btn-tunic-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üåç</span>
                        <span class="text-[9px]">Dashiki</span>
                    </button>
                    <button onclick="setTunicType('Indian', this)" class="btn-tunic-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üáÆüá≥</span>
                        <span class="text-[9px]">Indian</span>
                    </button>
                    <button onclick="setTunicType('Moroccan', this)" class="btn-tunic-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèúÔ∏è</span>
                        <span class="text-[9px]">Moroccan</span>
                    </button>
                    <button onclick="setTunicType('Peasant', this)" class="btn-tunic-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üå∏</span>
                        <span class="text-[9px]">Peasant</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setTunicType('Asian', this)" class="btn-tunic-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üéé</span>
                        <span class="text-[9px]">Asian</span>
                    </button>
                    <button onclick="setTunicType('Beach', this)" class="btn-tunic-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèñÔ∏è</span>
                        <span class="text-[9px]">Beach</span>
                    </button>
                    <button onclick="setTunicType('Modern', this)" class="btn-tunic-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëö</span>
                        <span class="text-[9px]">Modern</span>
                    </button>
                </div>
            </div>
            
            <!-- TUNIC UNIVERSAL FIELDS - Shows when any tunic type selected -->
            <div id="tunic-universal-fields" class="hidden mb-4 p-3 bg-emerald-50 rounded-xl border border-emerald-200">
                <label class="text-[10px] font-bold text-emerald-700 uppercase tracking-widest mb-2 block">üëò Tunic Details (All Styles)</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Origin / Region (Key value indicator!)</label>
                    <div class="grid grid-cols-4 gap-1 mb-1">
                        <button onclick="setTunicOrigin('India', this)" class="tunic-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">India‚≠ê</button>
                        <button onclick="setTunicOrigin('Africa', this)" class="tunic-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Africa‚≠ê</button>
                        <button onclick="setTunicOrigin('Morocco', this)" class="tunic-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Morocco</button>
                        <button onclick="setTunicOrigin('Mexico', this)" class="tunic-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mexico</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setTunicOrigin('Indonesia', this)" class="tunic-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Indonesia</button>
                        <button onclick="setTunicOrigin('Asia', this)" class="tunic-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Asia</button>
                        <button onclick="setTunicOrigin('USA/Europe', this)" class="tunic-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">USA/Europe</button>
                        <button onclick="setTunicOrigin('Unknown', this)" class="tunic-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric</label>
                    <div class="grid grid-cols-4 gap-1 mb-1">
                        <button onclick="setTunicFabric('Silk', this)" class="tunic-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Silk‚≠ê</button>
                        <button onclick="setTunicFabric('Cotton Gauze', this)" class="tunic-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Gauze‚≠ê</button>
                        <button onclick="setTunicFabric('Linen', this)" class="tunic-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Linen</button>
                        <button onclick="setTunicFabric('Embroid Cotton', this)" class="tunic-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Emb Cotton</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setTunicFabric('Block Print', this)" class="tunic-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Block Print</button>
                        <button onclick="setTunicFabric('Rayon', this)" class="tunic-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Rayon</button>
                        <button onclick="setTunicFabric('Polyester', this)" class="tunic-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Polyester</button>
                        <button onclick="setTunicFabric('Blend', this)" class="tunic-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Blend</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Length</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setTunicLength('Hip', this)" class="tunic-length-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Hip</button>
                        <button onclick="setTunicLength('Mid-Thigh', this)" class="tunic-length-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mid-Thigh</button>
                        <button onclick="setTunicLength('Knee', this)" class="tunic-length-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Knee</button>
                        <button onclick="setTunicLength('Maxi', this)" class="tunic-length-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Maxi/Ankle</button>
                    </div>
                </div>
            </div>
            
            <!-- DASHIKI / AFRICAN TUNIC DETAILS -->
            <div id="dashiki-tunic-details" class="hidden mb-4 p-3 bg-yellow-50 rounded-xl border border-yellow-300">
                <label class="text-[10px] font-bold text-yellow-700 uppercase tracking-widest mb-2 block">üåç Dashiki / African Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Neckline</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDashikiNeck('Keyhole', this)" class="dashiki-neck-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Keyhole‚≠ê</button>
                        <button onclick="setDashikiNeck('V-Neck', this)" class="dashiki-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">V-Neck</button>
                        <button onclick="setDashikiNeck('Round', this)" class="dashiki-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Round</button>
                        <button onclick="setDashikiNeck('Slit', this)" class="dashiki-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Slit</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Print Type</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDashikiPrint('African Print', this)" class="dashiki-print-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">African‚≠ê</button>
                        <button onclick="setDashikiPrint('Solid+Trim', this)" class="dashiki-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Solid+Trim</button>
                        <button onclick="setDashikiPrint('Batik', this)" class="dashiki-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Batik</button>
                        <button onclick="setDashikiPrint('Kente', this)" class="dashiki-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Kente</button>
                    </div>
                </div>
            </div>
            
            <!-- INDIAN / KURTA TUNIC DETAILS -->
            <div id="indian-tunic-details" class="hidden mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200">
                <label class="text-[10px] font-bold text-orange-700 uppercase tracking-widest mb-2 block">üáÆüá≥ Indian / Kurta Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Embellishment (Hand = $$$!)</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setIndianEmbellish('Mirror Work', this)" class="indian-emb-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Mirror‚≠ê</button>
                        <button onclick="setIndianEmbellish('Hand Embroid', this)" class="indian-emb-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Hand‚≠ê</button>
                        <button onclick="setIndianEmbellish('Block Print', this)" class="indian-emb-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Block‚≠ê</button>
                        <button onclick="setIndianEmbellish('Beaded', this)" class="indian-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Beaded</button>
                        <button onclick="setIndianEmbellish('Plain', this)" class="indian-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Plain</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Neckline</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setIndianNeck('Mandarin', this)" class="indian-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mandarin</button>
                        <button onclick="setIndianNeck('V-Neck', this)" class="indian-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">V-Neck</button>
                        <button onclick="setIndianNeck('Round', this)" class="indian-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Round</button>
                        <button onclick="setIndianNeck('Keyhole', this)" class="indian-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Keyhole</button>
                    </div>
                </div>
            </div>
            
            <!-- MOROCCAN / KAFTAN TUNIC DETAILS -->
            <div id="moroccan-tunic-details" class="hidden mb-4 p-3 bg-amber-50 rounded-xl border border-amber-300">
                <label class="text-[10px] font-bold text-amber-700 uppercase tracking-widest mb-2 block">üèúÔ∏è Moroccan / Kaftan Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Embellishment</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setMoroccanEmbellish('Gold Thread', this)" class="moroccan-emb-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Gold‚≠ê</button>
                        <button onclick="setMoroccanEmbellish('Metallic Trim', this)" class="moroccan-emb-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Metallic‚≠ê</button>
                        <button onclick="setMoroccanEmbellish('Embroidered', this)" class="moroccan-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Embroid</button>
                        <button onclick="setMoroccanEmbellish('Beaded', this)" class="moroccan-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Beaded</button>
                        <button onclick="setMoroccanEmbellish('Plain', this)" class="moroccan-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Plain</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Closure</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setMoroccanClosure('Pullover', this)" class="moroccan-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pullover</button>
                        <button onclick="setMoroccanClosure('Front Buttons', this)" class="moroccan-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Buttons</button>
                        <button onclick="setMoroccanClosure('Tie', this)" class="moroccan-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tie</button>
                        <button onclick="setMoroccanClosure('Hooks', this)" class="moroccan-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Hooks</button>
                    </div>
                </div>
            </div>
            
            <!-- PEASANT / BOHO TUNIC DETAILS -->
            <div id="peasant-tunic-details" class="hidden mb-4 p-3 bg-rose-50 rounded-xl border border-rose-200">
                <label class="text-[10px] font-bold text-rose-700 uppercase tracking-widest mb-2 block">üå∏ Peasant / Boho Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Embellishment</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setPeasantTunicEmbellish('Embroidered', this)" class="peas-tunic-emb-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Embroid‚≠ê</button>
                        <button onclick="setPeasantTunicEmbellish('Crochet', this)" class="peas-tunic-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Crochet</button>
                        <button onclick="setPeasantTunicEmbellish('Tassels', this)" class="peas-tunic-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Tassels</button>
                        <button onclick="setPeasantTunicEmbellish('Lace', this)" class="peas-tunic-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Lace</button>
                        <button onclick="setPeasantTunicEmbellish('Plain', this)" class="peas-tunic-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Plain</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Sleeves</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setPeasantTunicSleeve('Bell', this)" class="peas-tunic-sleeve-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Bell‚≠ê</button>
                        <button onclick="setPeasantTunicSleeve('Long Loose', this)" class="peas-tunic-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Long Loose</button>
                        <button onclick="setPeasantTunicSleeve('Short', this)" class="peas-tunic-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Short</button>
                        <button onclick="setPeasantTunicSleeve('Sleeveless', this)" class="peas-tunic-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sleeveless</button>
                    </div>
                </div>
            </div>
            
            <!-- ASIAN-INSPIRED TUNIC DETAILS -->
            <div id="asian-tunic-details" class="hidden mb-4 p-3 bg-red-50 rounded-xl border border-red-200">
                <label class="text-[10px] font-bold text-red-700 uppercase tracking-widest mb-2 block">üéé Asian-Inspired Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Closure</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setAsianClosure('Frog Closures', this)" class="asian-closure-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Frog‚≠ê</button>
                        <button onclick="setAsianClosure('Side Buttons', this)" class="asian-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Side Btns</button>
                        <button onclick="setAsianClosure('Tie', this)" class="asian-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tie</button>
                        <button onclick="setAsianClosure('Pullover', this)" class="asian-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pullover</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Details (select all)</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="toggleAsianDetail('Side Slits', this)" class="asian-detail-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Slits‚≠ê</button>
                        <button onclick="toggleAsianDetail('Mandarin Collar', this)" class="asian-detail-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Mandarin‚≠ê</button>
                        <button onclick="toggleAsianDetail('Contrast Piping', this)" class="asian-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Piping</button>
                        <button onclick="toggleAsianDetail('Plain', this)" class="asian-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Plain</button>
                    </div>
                </div>
            </div>
            
            <!-- BEACH / RESORT TUNIC DETAILS -->
            <div id="beach-tunic-details" class="hidden mb-4 p-3 bg-cyan-50 rounded-xl border border-cyan-200">
                <label class="text-[10px] font-bold text-cyan-700 uppercase tracking-widest mb-2 block">üèñÔ∏è Beach / Resort Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric Type</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setBeachFabric('Sheer/Gauze', this)" class="beach-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Sheer‚≠ê</button>
                        <button onclick="setBeachFabric('Terry Cloth', this)" class="beach-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Terry</button>
                        <button onclick="setBeachFabric('Cotton', this)" class="beach-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cotton</button>
                        <button onclick="setBeachFabric('Linen', this)" class="beach-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Linen</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Coverage</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setBeachCoverage('Sheer', this)" class="beach-coverage-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sheer</button>
                        <button onclick="setBeachCoverage('Semi-Sheer', this)" class="beach-coverage-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Semi-Sheer</button>
                        <button onclick="setBeachCoverage('Opaque', this)" class="beach-coverage-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Opaque</button>
                        <button onclick="setBeachCoverage('Lined', this)" class="beach-coverage-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Lined</button>
                    </div>
                </div>
            </div>
            
            <!-- MODERN / FASHION TUNIC DETAILS -->
            <div id="modern-tunic-details" class="hidden mb-4 p-3 bg-slate-100 rounded-xl border border-slate-300">
                <label class="text-[10px] font-bold text-slate-700 uppercase tracking-widest mb-2 block">üëö Modern / Fashion Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style Features</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setModernStyle('Asymmetric', this)" class="modern-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Asymmetric</button>
                        <button onclick="setModernStyle('High-Low', this)" class="modern-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">High-Low</button>
                        <button onclick="setModernStyle('Side Slits', this)" class="modern-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Side Slits</button>
                        <button onclick="setModernStyle('Pockets', this)" class="modern-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pockets</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Neckline</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setModernNeck('Crew', this)" class="modern-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Crew</button>
                        <button onclick="setModernNeck('V-Neck', this)" class="modern-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">V-Neck</button>
                        <button onclick="setModernNeck('Scoop', this)" class="modern-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Scoop</button>
                        <button onclick="setModernNeck('Cowl', this)" class="modern-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cowl</button>
                    </div>
                </div>
            </div>
            
            <!-- JEANS BRAND TYPE SELECTOR - Shows only for Jeans category -->
            <div id="jeans-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-indigo-600 uppercase tracking-widest mb-2 block">üëñ Jeans Brand Type</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setJeansType('Levis', this)" class="btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëñ</span>
                        <span class="text-[9px]">Levi's</span>
                    </button>
                    <button onclick="setJeansType('Lee', this)" class="btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü§†</span>
                        <span class="text-[9px]">Lee</span>
                    </button>
                    <button onclick="setJeansType('Wrangler', this)" class="btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üê¥</span>
                        <span class="text-[9px]">Wrangler</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setJeansType('Designer80s', this)" class="btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üíé</span>
                        <span class="text-[9px]">80s Designer</span>
                    </button>
                    <button onclick="setJeansType('Y2KPremium', this)" class="btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚ú®</span>
                        <span class="text-[9px]">Y2K Premium</span>
                    </button>
                    <button onclick="setJeansType('Y2KMall', this)" class="btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üî•</span>
                        <span class="text-[9px]">Y2K Mall</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setJeansType('Japanese', this)" class="btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üáØüáµ</span>
                        <span class="text-[9px]">Japanese</span>
                    </button>
                    <button onclick="setJeansType('Workwear', this)" class="btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üîß</span>
                        <span class="text-[9px]">Workwear</span>
                    </button>
                    <button onclick="setJeansType('Other', this)" class="btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëö</span>
                        <span class="text-[9px]">Other</span>
                    </button>
                </div>
            </div>
            
            <!-- JEANS UNIVERSAL FIELDS - Shows when any jeans type selected -->
            <div id="jeans-universal-fields" class="hidden mb-4 p-3 bg-indigo-50 rounded-xl border border-indigo-200">
                <label class="text-[10px] font-bold text-indigo-700 uppercase tracking-widest mb-2 block">üëñ Jeans Details (All Types)</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Selvedge (KEY value indicator!)</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setJeansSelvedge('Redline', this)" class="jeans-selv-btn py-2 border-2 border-red-400 bg-red-50 rounded-lg font-bold text-red-700 text-[9px]">Redline‚≠ê‚≠ê</button>
                        <button onclick="setJeansSelvedge('Selvedge', this)" class="jeans-selv-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Selvedge‚≠ê</button>
                        <button onclick="setJeansSelvedge('Non-Selvedge', this)" class="jeans-selv-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Non-Selvedge</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fly Type</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setJeansFly('Button Fly', this)" class="jeans-fly-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Button Fly‚≠ê</button>
                        <button onclick="setJeansFly('Zipper', this)" class="jeans-fly-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Zipper</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJeansOrigin('USA', this)" class="jeans-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setJeansOrigin('Japan', this)" class="jeans-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Japan‚≠ê</button>
                        <button onclick="setJeansOrigin('Mexico', this)" class="jeans-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mexico</button>
                        <button onclick="setJeansOrigin('Other', this)" class="jeans-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Denim Weight</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setJeansWeight('Lightweight', this)" class="jeans-weight-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Light (10-13oz)</button>
                        <button onclick="setJeansWeight('Midweight', this)" class="jeans-weight-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mid (14-16oz)</button>
                        <button onclick="setJeansWeight('Heavyweight', this)" class="jeans-weight-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Heavy (17oz+)‚≠ê</button>
                    </div>
                </div>
            </div>
            
            <!-- LEVI'S JEANS DETAILS -->
            <div id="levis-jeans-details" class="hidden mb-4 p-3 bg-red-50 rounded-xl border border-red-200">
                <label class="text-[10px] font-bold text-red-700 uppercase tracking-widest mb-2 block">üëñ Levi's Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Model Number</label>
                    <div class="grid grid-cols-4 gap-1 mb-1">
                        <button onclick="setLevisModel('501', this)" class="levis-model-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">501‚≠ê</button>
                        <button onclick="setLevisModel('505', this)" class="levis-model-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">505</button>
                        <button onclick="setLevisModel('517', this)" class="levis-model-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">517</button>
                        <button onclick="setLevisModel('550', this)" class="levis-model-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">550</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setLevisModel('560', this)" class="levis-model-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">560</button>
                        <button onclick="setLevisModel('569', this)" class="levis-model-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">569</button>
                        <button onclick="setLevisModel('701', this)" class="levis-model-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">701</button>
                        <button onclick="setLevisModel('Other', this)" class="levis-model-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Tab Type (ERA indicator!)</label>
                    <div class="grid grid-cols-4 gap-1 mb-1">
                        <button onclick="setLevisTab('Big E', this)" class="levis-tab-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Big E‚≠ê‚≠ê</button>
                        <button onclick="setLevisTab('small e', this)" class="levis-tab-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">small e‚≠ê</button>
                        <button onclick="setLevisTab('Orange Tab', this)" class="levis-tab-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Orange</button>
                        <button onclick="setLevisTab('Silver Tab', this)" class="levis-tab-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Silver</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setLevisTab('White Tab', this)" class="levis-tab-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">White</button>
                        <button onclick="setLevisTab('Black Tab', this)" class="levis-tab-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Black</button>
                        <button onclick="setLevisTab('No Tab', this)" class="levis-tab-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">No Tab</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Indicators (select all)</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="toggleLevisEra('Single Stitch', this)" class="levis-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Single Stitch‚≠ê</button>
                        <button onclick="toggleLevisEra('Chain Stitch', this)" class="levis-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Chain Stitch‚≠ê</button>
                        <button onclick="toggleLevisEra('Hidden Rivets', this)" class="levis-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Hidden Rivet‚≠ê</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleLevisEra('Crotch Rivet', this)" class="levis-era-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Crotch Rivet‚≠ê‚≠ê</button>
                        <button onclick="toggleLevisEra('Leather Patch', this)" class="levis-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Leather Patch</button>
                        <button onclick="toggleLevisEra('Paper Patch', this)" class="levis-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Paper Patch</button>
                    </div>
                </div>
            </div>
            
            <!-- LEE JEANS DETAILS -->
            <div id="lee-jeans-details" class="hidden mb-4 p-3 bg-yellow-50 rounded-xl border border-yellow-200">
                <label class="text-[10px] font-bold text-yellow-700 uppercase tracking-widest mb-2 block">ü§† Lee Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setLeeStyle('Riders', this)" class="lee-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Riders‚≠ê</button>
                        <button onclick="setLeeStyle('101', this)" class="lee-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">101</button>
                        <button onclick="setLeeStyle('Storm Rider', this)" class="lee-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Storm Rider</button>
                        <button onclick="setLeeStyle('Other', this)" class="lee-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Indicators (select all)</label>
                    <div class="grid grid-cols-2 gap-1 mb-1">
                        <button onclick="toggleLeeEra('Union Made', this)" class="lee-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Union Made‚≠ê</button>
                        <button onclick="toggleLeeEra('Hair-on-Hide Patch', this)" class="lee-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Hair Patch‚≠ê</button>
                    </div>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="toggleLeeEra('Sanforized Tag', this)" class="lee-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sanforized Tag</button>
                        <button onclick="toggleLeeEra('USA Made', this)" class="lee-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">USA Made</button>
                    </div>
                </div>
            </div>
            
            <!-- WRANGLER JEANS DETAILS -->
            <div id="wrangler-jeans-details" class="hidden mb-4 p-3 bg-blue-50 rounded-xl border border-blue-200">
                <label class="text-[10px] font-bold text-blue-700 uppercase tracking-widest mb-2 block">üê¥ Wrangler Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setWranglerStyle('13MWZ', this)" class="wrangler-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">13MWZ‚≠ê</button>
                        <button onclick="setWranglerStyle('Cowboy Cut', this)" class="wrangler-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cowboy Cut</button>
                        <button onclick="setWranglerStyle('Pro Rodeo', this)" class="wrangler-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Pro Rodeo‚≠ê</button>
                        <button onclick="setWranglerStyle('Blue Bell', this)" class="wrangler-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Blue Bell‚≠ê‚≠ê</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Indicators (select all)</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleWranglerEra('USA Made', this)" class="wrangler-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA Made‚≠ê</button>
                        <button onclick="toggleWranglerEra('Broken Twill', this)" class="wrangler-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Broken Twill</button>
                        <button onclick="toggleWranglerEra('W Stitch', this)" class="wrangler-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">W Stitch‚≠ê</button>
                    </div>
                </div>
            </div>
            
            <!-- DESIGNER 80s JEANS DETAILS -->
            <div id="designer80s-jeans-details" class="hidden mb-4 p-3 bg-purple-50 rounded-xl border border-purple-200">
                <label class="text-[10px] font-bold text-purple-700 uppercase tracking-widest mb-2 block">üíé 80s Designer Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1 mb-1">
                        <button onclick="setDesigner80sBrand('Calvin Klein', this)" class="des80-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Calvin Klein‚≠ê</button>
                        <button onclick="setDesigner80sBrand('Guess', this)" class="des80-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Guess‚≠ê</button>
                        <button onclick="setDesigner80sBrand('Jordache', this)" class="des80-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Jordache</button>
                        <button onclick="setDesigner80sBrand('Gloria Vanderbilt', this)" class="des80-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Gloria V</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDesigner80sBrand('Sasson', this)" class="des80-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Sasson</button>
                        <button onclick="setDesigner80sBrand('Chic', this)" class="des80-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Chic</button>
                        <button onclick="setDesigner80sBrand('Z Cavaricci', this)" class="des80-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Z Cavaricci</button>
                        <button onclick="setDesigner80sBrand('Other', this)" class="des80-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Style</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setDesigner80sStyle('High-Waist', this)" class="des80-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">High-Waist‚≠ê</button>
                        <button onclick="setDesigner80sStyle('Acid Wash', this)" class="des80-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Acid Wash</button>
                        <button onclick="setDesigner80sStyle('Stone Wash', this)" class="des80-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Stone</button>
                        <button onclick="setDesigner80sStyle('Dark Rinse', this)" class="des80-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Dark</button>
                        <button onclick="setDesigner80sStyle('Tapered', this)" class="des80-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Tapered</button>
                    </div>
                </div>
            </div>
            
            <!-- Y2K PREMIUM JEANS DETAILS -->
            <div id="y2kpremium-jeans-details" class="hidden mb-4 p-3 bg-pink-50 rounded-xl border border-pink-200">
                <label class="text-[10px] font-bold text-pink-700 uppercase tracking-widest mb-2 block">‚ú® Y2K Premium Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="setY2KPremiumBrand('True Religion', this)" class="y2kp-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">True Religion‚≠ê</button>
                        <button onclick="setY2KPremiumBrand('7FAM', this)" class="y2kp-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">7 For All‚≠ê</button>
                        <button onclick="setY2KPremiumBrand('Rock Republic', this)" class="y2kp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Rock & Rep</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setY2KPremiumBrand('Citizens', this)" class="y2kp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Citizens</button>
                        <button onclick="setY2KPremiumBrand('Miss Sixty', this)" class="y2kp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Miss Sixty</button>
                        <button onclick="setY2KPremiumBrand('Hudson', this)" class="y2kp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Hudson</button>
                        <button onclick="setY2KPremiumBrand('Other', this)" class="y2kp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Rise</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setY2KPremiumRise('Ultra Low', this)" class="y2kp-rise-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Ultra Low‚≠ê</button>
                        <button onclick="setY2KPremiumRise('Low', this)" class="y2kp-rise-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Low</button>
                        <button onclick="setY2KPremiumRise('Mid', this)" class="y2kp-rise-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mid</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Signature Details</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setY2KPremiumDetail('Horseshoe Stitch', this)" class="y2kp-detail-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Horseshoe‚≠ê</button>
                        <button onclick="setY2KPremiumDetail('Flap Pocket', this)" class="y2kp-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Flap Pocket</button>
                        <button onclick="setY2KPremiumDetail('Contrast Stitch', this)" class="y2kp-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Contrast</button>
                    </div>
                </div>
            </div>
            
            <!-- Y2K MALL/HIP-HOP JEANS DETAILS -->
            <div id="y2kmall-jeans-details" class="hidden mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200">
                <label class="text-[10px] font-bold text-orange-700 uppercase tracking-widest mb-2 block">üî• Y2K Mall / Hip-Hop Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1 mb-1">
                        <button onclick="setY2KMallBrand('Baby Phat', this)" class="y2km-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Baby Phat‚≠ê</button>
                        <button onclick="setY2KMallBrand('Apple Bottoms', this)" class="y2km-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Apple Bottom</button>
                        <button onclick="setY2KMallBrand('Rocawear', this)" class="y2km-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Rocawear</button>
                        <button onclick="setY2KMallBrand('Sean John', this)" class="y2km-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Sean John</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setY2KMallBrand('JNCO', this)" class="y2km-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">JNCO‚≠ê‚≠ê</button>
                        <button onclick="setY2KMallBrand('Southpole', this)" class="y2km-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Southpole</button>
                        <button onclick="setY2KMallBrand('Ecko', this)" class="y2km-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Ecko</button>
                        <button onclick="setY2KMallBrand('Bebe', this)" class="y2km-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Bebe</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Leg Style (JNCO: wider = $$$!)</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setY2KMallLeg('Bootcut', this)" class="y2km-leg-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Bootcut</button>
                        <button onclick="setY2KMallLeg('Flare', this)" class="y2km-leg-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Flare</button>
                        <button onclick="setY2KMallLeg('Wide', this)" class="y2km-leg-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Wide‚≠ê</button>
                        <button onclick="setY2KMallLeg('JNCO Wide', this)" class="y2km-leg-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">JNCO‚≠ê‚≠ê</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Embellishment</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setY2KMallEmbellish('Rhinestones', this)" class="y2km-emb-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Rhinestone‚≠ê</button>
                        <button onclick="setY2KMallEmbellish('Embroidery', this)" class="y2km-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Embroidery</button>
                        <button onclick="setY2KMallEmbellish('Logo', this)" class="y2km-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Logo</button>
                        <button onclick="setY2KMallEmbellish('Plain', this)" class="y2km-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Plain</button>
                    </div>
                </div>
            </div>
            
            <!-- JAPANESE SELVEDGE JEANS DETAILS -->
            <div id="japanese-jeans-details" class="hidden mb-4 p-3 bg-rose-50 rounded-xl border border-rose-200">
                <label class="text-[10px] font-bold text-rose-700 uppercase tracking-widest mb-2 block">üáØüáµ Japanese Selvedge Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Mill / Brand</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="setJapaneseBrand('Momotaro', this)" class="jp-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Momotaro‚≠ê</button>
                        <button onclick="setJapaneseBrand('Pure Blue Japan', this)" class="jp-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">PBJ‚≠ê</button>
                        <button onclick="setJapaneseBrand('Samurai', this)" class="jp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Samurai</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJapaneseBrand('Sugar Cane', this)" class="jp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Sugar Cane</button>
                        <button onclick="setJapaneseBrand('Warehouse', this)" class="jp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Warehouse</button>
                        <button onclick="setJapaneseBrand('Oni', this)" class="jp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Oni</button>
                        <button onclick="setJapaneseBrand('Other', this)" class="jp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Denim Weight (heavier = $$$)</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJapaneseWeight('12-14oz', this)" class="jp-weight-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">12-14oz</button>
                        <button onclick="setJapaneseWeight('15-18oz', this)" class="jp-weight-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">15-18oz‚≠ê</button>
                        <button onclick="setJapaneseWeight('19-21oz', this)" class="jp-weight-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">19-21oz‚≠ê‚≠ê</button>
                        <button onclick="setJapaneseWeight('22oz+', this)" class="jp-weight-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">22oz+‚≠ê‚≠ê‚≠ê</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Selvedge ID Color</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJapaneseSelvedgeColor('Red', this)" class="jp-selv-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Red</button>
                        <button onclick="setJapaneseSelvedgeColor('White', this)" class="jp-selv-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">White</button>
                        <button onclick="setJapaneseSelvedgeColor('Pink', this)" class="jp-selv-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pink</button>
                        <button onclick="setJapaneseSelvedgeColor('Other', this)" class="jp-selv-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- WORKWEAR JEANS DETAILS -->
            <div id="workwear-jeans-details" class="hidden mb-4 p-3 bg-stone-100 rounded-xl border border-stone-300">
                <label class="text-[10px] font-bold text-stone-700 uppercase tracking-widest mb-2 block">üîß Workwear Jeans Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setWorkwearBrand('Carhartt', this)" class="work-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Carhartt‚≠ê</button>
                        <button onclick="setWorkwearBrand('Dickies', this)" class="work-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Dickies</button>
                        <button onclick="setWorkwearBrand('Ben Davis', this)" class="work-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Ben Davis</button>
                        <button onclick="setWorkwearBrand('Key', this)" class="work-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Key</button>
                        <button onclick="setWorkwearBrand('Pointer', this)" class="work-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Pointer</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Construction</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setWorkwearConstruction('Double-Front', this)" class="work-const-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Double-Front‚≠ê</button>
                        <button onclick="setWorkwearConstruction('Reinforced Knee', this)" class="work-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Reinf Knee</button>
                        <button onclick="setWorkwearConstruction('Painter', this)" class="work-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Painter</button>
                        <button onclick="setWorkwearConstruction('Logger', this)" class="work-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Logger</button>
                    </div>
                </div>
            </div>
            
            <!-- OTHER/FASHION JEANS DETAILS -->
            <div id="other-jeans-details" class="hidden mb-4 p-3 bg-gray-100 rounded-xl border border-gray-300">
                <label class="text-[10px] font-bold text-gray-700 uppercase tracking-widest mb-2 block">üëö Other / Fashion Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Type</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setOtherJeansType('Premium Denim', this)" class="other-jeans-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Premium</button>
                        <button onclick="setOtherJeansType('Mall Brand', this)" class="other-jeans-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mall Brand</button>
                        <button onclick="setOtherJeansType('Unknown', this)" class="other-jeans-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Features</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setOtherJeansFeature('Stretch', this)" class="other-jeans-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Stretch</button>
                        <button onclick="setOtherJeansFeature('Raw', this)" class="other-jeans-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Raw</button>
                        <button onclick="setOtherJeansFeature('Distressed', this)" class="other-jeans-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Distressed</button>
                        <button onclick="setOtherJeansFeature('Embellished', this)" class="other-jeans-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Embellished</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== PANTS SUB-TYPE SYSTEM ========== -->
            <div id="pants-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-stone-600 uppercase tracking-widest mb-2 block">üëñ Pants Type</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setPantsType('Military', this)" class="btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü™ñ</span>
                        <span class="text-[9px]">Military</span>
                    </button>
                    <button onclick="setPantsType('Work', this)" class="btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üîß</span>
                        <span class="text-[9px]">Work</span>
                    </button>
                    <button onclick="setPantsType('Track', this)" class="btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèÉ</span>
                        <span class="text-[9px]">Track</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setPantsType('80sFashion', this)" class="btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü™©</span>
                        <span class="text-[9px]">80s Fashion</span>
                    </button>
                    <button onclick="setPantsType('Y2K', this)" class="btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚ú®</span>
                        <span class="text-[9px]">Y2K</span>
                    </button>
                    <button onclick="setPantsType('Corduroy', this)" class="btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üì∫</span>
                        <span class="text-[9px]">Corduroy</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setPantsType('Dress', this)" class="btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëî</span>
                        <span class="text-[9px]">Dress/Trouser</span>
                    </button>
                    <button onclick="setPantsType('Cargo', this)" class="btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üöö</span>
                        <span class="text-[9px]">Cargo</span>
                    </button>
                    <button onclick="setPantsType('Chino', this)" class="btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëñ</span>
                        <span class="text-[9px]">Chino/Casual</span>
                    </button>
                </div>
            </div>
            
            <!-- PANTS UNIVERSAL FIELDS -->
            <div id="pants-universal-fields" class="hidden mb-4 p-3 bg-stone-100 rounded-xl border border-stone-300">
                <label class="text-[10px] font-bold text-stone-700 uppercase tracking-widest mb-2 block">üëñ Pants Details (All Types)</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Waist Rise</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setPantsRise('High', this)" class="pants-rise-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">High Rise‚≠ê</button>
                        <button onclick="setPantsRise('Mid', this)" class="pants-rise-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mid Rise</button>
                        <button onclick="setPantsRise('Low', this)" class="pants-rise-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Low Rise</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Leg Style</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setPantsLeg('Wide', this)" class="pants-leg-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Wide‚≠ê</button>
                        <button onclick="setPantsLeg('Straight', this)" class="pants-leg-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Straight</button>
                        <button onclick="setPantsLeg('Tapered', this)" class="pants-leg-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tapered</button>
                        <button onclick="setPantsLeg('Bootcut', this)" class="pants-leg-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Bootcut</button>
                        <button onclick="setPantsLeg('Slim', this)" class="pants-leg-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Slim</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setPantsOrigin('USA', this)" class="pants-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setPantsOrigin('Import', this)" class="pants-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Import</button>
                        <button onclick="setPantsOrigin('Unknown', this)" class="pants-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
            </div>
            
            <!-- MILITARY PANTS DETAILS -->
            <div id="military-pants-details" class="hidden mb-4 p-3 bg-green-50 rounded-xl border border-green-200">
                <label class="text-[10px] font-bold text-green-700 uppercase tracking-widest mb-2 block">ü™ñ Military/Utility Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setMilitaryStyle('OG-107', this)" class="mil-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">OG-107‚≠ê‚≠ê</button>
                        <button onclick="setMilitaryStyle('M-65', this)" class="mil-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">M-65</button>
                        <button onclick="setMilitaryStyle('BDU', this)" class="mil-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">BDU</button>
                        <button onclick="setMilitaryStyle('Fatigue', this)" class="mil-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Fatigue</button>
                        <button onclick="setMilitaryStyle('Field', this)" class="mil-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Field</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Indicators (select all)</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="toggleMilitaryEra('Contract Date', this)" class="mil-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Contract‚≠ê</button>
                        <button onclick="toggleMilitaryEra('DSA/DLA#', this)" class="mil-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">DSA/DLA‚≠ê</button>
                        <button onclick="toggleMilitaryEra('Stencil', this)" class="mil-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Stencil</button>
                        <button onclick="toggleMilitaryEra('13-Star', this)" class="mil-era-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">13-Star‚≠ê‚≠ê</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setMilitaryFabric('Sateen', this)" class="mil-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Sateen‚≠ê</button>
                        <button onclick="setMilitaryFabric('Ripstop', this)" class="mil-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Ripstop</button>
                        <button onclick="setMilitaryFabric('Cotton', this)" class="mil-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cotton</button>
                        <button onclick="setMilitaryFabric('Poly-Cotton', this)" class="mil-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Poly-Cot</button>
                    </div>
                </div>
            </div>
            
            <!-- WORK PANTS DETAILS -->
            <div id="work-pants-details" class="hidden mb-4 p-3 bg-amber-50 rounded-xl border border-amber-200">
                <label class="text-[10px] font-bold text-amber-700 uppercase tracking-widest mb-2 block">üîß Work Pants Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="setWorkPantsBrand('Dickies', this)" class="workp-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Dickies‚≠ê</button>
                        <button onclick="setWorkPantsBrand('Carhartt', this)" class="workp-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Carhartt‚≠ê</button>
                        <button onclick="setWorkPantsBrand('Ben Davis', this)" class="workp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Ben Davis</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWorkPantsBrand('Red Kap', this)" class="workp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Red Kap</button>
                        <button onclick="setWorkPantsBrand('Key', this)" class="workp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Key</button>
                        <button onclick="setWorkPantsBrand('Other', this)" class="workp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Indicators (select all)</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="toggleWorkPantsEra('Made USA', this)" class="workp-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Made USA‚≠ê</button>
                        <button onclick="toggleWorkPantsEra('Union Made', this)" class="workp-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Union Made‚≠ê</button>
                        <button onclick="toggleWorkPantsEra('Metal Zip', this)" class="workp-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Metal Zip</button>
                        <button onclick="toggleWorkPantsEra('Vtg Tag', this)" class="workp-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Vtg Tag</button>
                    </div>
                </div>
            </div>
            
            <!-- TRACK PANTS DETAILS -->
            <div id="track-pants-details" class="hidden mb-4 p-3 bg-blue-50 rounded-xl border border-blue-200">
                <label class="text-[10px] font-bold text-blue-700 uppercase tracking-widest mb-2 block">üèÉ Track/Athletic Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-3 gap-1 mb-1">
                        <button onclick="setTrackBrand('Adidas', this)" class="track-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Adidas‚≠ê</button>
                        <button onclick="setTrackBrand('Nike', this)" class="track-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Nike</button>
                        <button onclick="setTrackBrand('Puma', this)" class="track-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Puma</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setTrackBrand('Fila', this)" class="track-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Fila</button>
                        <button onclick="setTrackBrand('Champion', this)" class="track-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Champion</button>
                        <button onclick="setTrackBrand('Other', this)" class="track-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setTrackStyle('Side Stripe', this)" class="track-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Stripe‚≠ê</button>
                        <button onclick="setTrackStyle('Tearaway', this)" class="track-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Tearaway‚≠ê</button>
                        <button onclick="setTrackStyle('Solid', this)" class="track-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Solid</button>
                        <button onclick="setTrackStyle('Windbreaker', this)" class="track-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Wind</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setTrackEra('70s-80s', this)" class="track-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">70s-80s‚≠ê</button>
                        <button onclick="setTrackEra('90s', this)" class="track-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s</button>
                        <button onclick="setTrackEra('Y2K', this)" class="track-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Y2K</button>
                    </div>
                </div>
            </div>
            
            <!-- 80s FASHION PANTS DETAILS -->
            <div id="80sfashion-pants-details" class="hidden mb-4 p-3 bg-purple-50 rounded-xl border border-purple-200">
                <label class="text-[10px] font-bold text-purple-700 uppercase tracking-widest mb-2 block">ü™© 80s Fashion Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="set80sStyle('Parachute', this)" class="p80s-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Parachute‚≠ê</button>
                        <button onclick="set80sStyle('Pleated', this)" class="p80s-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Pleated HW‚≠ê</button>
                        <button onclick="set80sStyle('Hammer', this)" class="p80s-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Hammer</button>
                        <button onclick="set80sStyle('Stirrup', this)" class="p80s-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Stirrup</button>
                        <button onclick="set80sStyle('ZCavaricci', this)" class="p80s-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Z Cav</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="set80sFabric('Nylon', this)" class="p80s-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Nylon‚≠ê</button>
                        <button onclick="set80sFabric('Polyester', this)" class="p80s-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Polyester</button>
                        <button onclick="set80sFabric('Rayon', this)" class="p80s-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Rayon</button>
                        <button onclick="set80sFabric('Cotton', this)" class="p80s-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cotton</button>
                    </div>
                </div>
            </div>
            
            <!-- Y2K PANTS DETAILS -->
            <div id="y2k-pants-details" class="hidden mb-4 p-3 bg-pink-50 rounded-xl border border-pink-200">
                <label class="text-[10px] font-bold text-pink-700 uppercase tracking-widest mb-2 block">‚ú® Y2K Pants Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setY2KPantsStyle('Velour', this)" class="y2kp-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Velour‚≠ê‚≠ê</button>
                        <button onclick="setY2KPantsStyle('Shiny Track', this)" class="y2kp-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Shiny Track‚≠ê</button>
                        <button onclick="setY2KPantsStyle('UFO/Rave', this)" class="y2kp-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">UFO/Rave‚≠ê</button>
                        <button onclick="setY2KPantsStyle('Low Cargo', this)" class="y2kp-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Low Cargo</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setY2KPantsBrand('Juicy', this)" class="y2kp-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Juicy‚≠ê‚≠ê</button>
                        <button onclick="setY2KPantsBrand('UFO', this)" class="y2kp-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">UFO‚≠ê</button>
                        <button onclick="setY2KPantsBrand('Kikwear', this)" class="y2kp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Kikwear</button>
                        <button onclick="setY2KPantsBrand('Other', this)" class="y2kp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- CORDUROY PANTS DETAILS -->
            <div id="corduroy-pants-details" class="hidden mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200">
                <label class="text-[10px] font-bold text-orange-700 uppercase tracking-widest mb-2 block">üì∫ Corduroy Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Wale Width</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCordWale('Wide', this)" class="cord-wale-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Wide (70s)‚≠ê</button>
                        <button onclick="setCordWale('Medium', this)" class="cord-wale-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Medium</button>
                        <button onclick="setCordWale('Pinwale', this)" class="cord-wale-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pinwale</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Indicators</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="toggleCordEra('Made USA', this)" class="cord-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Made USA‚≠ê</button>
                        <button onclick="toggleCordEra('Vtg Tag', this)" class="cord-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Vtg Tag</button>
                    </div>
                </div>
            </div>
            
            <!-- DRESS/TROUSER PANTS DETAILS -->
            <div id="dress-pants-details" class="hidden mb-4 p-3 bg-slate-100 rounded-xl border border-slate-300">
                <label class="text-[10px] font-bold text-slate-700 uppercase tracking-widest mb-2 block">üëî Dress/Trouser Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDressPantsStyle('Pleated', this)" class="dressp-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pleated</button>
                        <button onclick="setDressPantsStyle('Flat Front', this)" class="dressp-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Flat Front</button>
                        <button onclick="setDressPantsStyle('Cuffed', this)" class="dressp-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cuffed</button>
                        <button onclick="setDressPantsStyle('Wide Leg', this)" class="dressp-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Wide Leg‚≠ê</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Details (select all)</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleDressPantsDetail('Suspender Btns', this)" class="dressp-detail-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Suspender‚≠ê</button>
                        <button onclick="toggleDressPantsDetail('Side Tabs', this)" class="dressp-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Side Tabs</button>
                        <button onclick="toggleDressPantsDetail('Wool', this)" class="dressp-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Wool</button>
                    </div>
                </div>
            </div>
            
            <!-- CARGO PANTS DETAILS -->
            <div id="cargo-pants-details" class="hidden mb-4 p-3 bg-emerald-50 rounded-xl border border-emerald-200">
                <label class="text-[10px] font-bold text-emerald-700 uppercase tracking-widest mb-2 block">üöö Cargo Pants Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCargoStyle('Military', this)" class="cargo-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Military‚≠ê</button>
                        <button onclick="setCargoStyle('Utility', this)" class="cargo-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Utility</button>
                        <button onclick="setCargoStyle('Fashion', this)" class="cargo-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Fashion</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Pocket Count</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCargoPockets('6+', this)" class="cargo-pocket-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">6+ Pockets‚≠ê</button>
                        <button onclick="setCargoPockets('4', this)" class="cargo-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">4 Pockets</button>
                        <button onclick="setCargoPockets('Standard', this)" class="cargo-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Standard</button>
                    </div>
                </div>
            </div>
            
            <!-- CHINO PANTS DETAILS -->
            <div id="chino-pants-details" class="hidden mb-4 p-3 bg-yellow-50 rounded-xl border border-yellow-200">
                <label class="text-[10px] font-bold text-yellow-700 uppercase tracking-widest mb-2 block">üëñ Chino/Casual Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setChinoStyle('Classic Khaki', this)" class="chino-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Classic Khaki</button>
                        <button onclick="setChinoStyle('Pleated', this)" class="chino-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pleated</button>
                        <button onclick="setChinoStyle('Flat Front', this)" class="chino-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Flat Front</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setChinoEra('Vintage', this)" class="chino-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Vintage (pre-90s)‚≠ê</button>
                        <button onclick="setChinoEra('Modern', this)" class="chino-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== SHORTS SUB-TYPE SYSTEM ========== -->
            <div id="shorts-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-cyan-600 uppercase tracking-widest mb-2 block">ü©≥ Shorts Type</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setShortsType('Board', this)" class="btn-shorts-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèñÔ∏è</span>
                        <span class="text-[9px]">Board/Surf</span>
                    </button>
                    <button onclick="setShortsType('Cargo', this)" class="btn-shorts-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üöö</span>
                        <span class="text-[9px]">Cargo</span>
                    </button>
                    <button onclick="setShortsType('Chino', this)" class="btn-shorts-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëî</span>
                        <span class="text-[9px]">Chino/Prep</span>
                    </button>
                    <button onclick="setShortsType('Denim', this)" class="btn-shorts-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëñ</span>
                        <span class="text-[9px]">Denim</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setShortsType('Athletic', this)" class="btn-shorts-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèÉ</span>
                        <span class="text-[9px]">Athletic</span>
                    </button>
                    <button onclick="setShortsType('Y2K', this)" class="btn-shorts-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚ú®</span>
                        <span class="text-[9px]">Y2K</span>
                    </button>
                    <button onclick="setShortsType('Work', this)" class="btn-shorts-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üîß</span>
                        <span class="text-[9px]">Work</span>
                    </button>
                </div>
            </div>
            
            <!-- SHORTS UNIVERSAL FIELDS -->
            <div id="shorts-universal-fields" class="hidden mb-4 p-3 bg-cyan-50 rounded-xl border border-cyan-200">
                <label class="text-[10px] font-bold text-cyan-700 uppercase tracking-widest mb-2 block">ü©≥ Shorts Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Length</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setShortsLength('Short', this)" class="shorts-len-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Short (3-5")</button>
                        <button onclick="setShortsLength('Mid', this)" class="shorts-len-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mid (6-8")</button>
                        <button onclick="setShortsLength('Long', this)" class="shorts-len-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Long (9-11")</button>
                        <button onclick="setShortsLength('Board', this)" class="shorts-len-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Board (12"+)</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setShortsOrigin('USA', this)" class="shorts-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setShortsOrigin('Import', this)" class="shorts-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Import</button>
                        <button onclick="setShortsOrigin('Unknown', this)" class="shorts-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
            </div>
            
            <!-- BOARD SHORTS DETAILS -->
            <div id="board-shorts-details" class="hidden mb-4 p-3 bg-teal-50 rounded-xl border border-teal-200">
                <label class="text-[10px] font-bold text-teal-700 uppercase tracking-widest mb-2 block">üèñÔ∏è Board/Surf Details</label>
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setBoardBrand('Billabong', this)" class="board-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Billabong‚≠ê</button>
                        <button onclick="setBoardBrand('Quicksilver', this)" class="board-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Quicksilver‚≠ê</button>
                        <button onclick="setBoardBrand('Roxy', this)" class="board-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Roxy</button>
                        <button onclick="setBoardBrand('Other', this)" class="board-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- DENIM SHORTS DETAILS -->
            <div id="denim-shorts-details" class="hidden mb-4 p-3 bg-indigo-50 rounded-xl border border-indigo-200">
                <label class="text-[10px] font-bold text-indigo-700 uppercase tracking-widest mb-2 block">üëñ Denim Shorts Details</label>
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Type</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setDenimShortsType('Cut-off', this)" class="denim-shorts-type-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Cut-off (DIY)‚≠ê</button>
                        <button onclick="setDenimShortsType('Manufactured', this)" class="denim-shorts-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Manufactured</button>
                    </div>
                </div>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDenimShortsBrand('Levis', this)" class="denim-shorts-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Levi's‚≠ê</button>
                        <button onclick="setDenimShortsBrand('Lee', this)" class="denim-shorts-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Lee</button>
                        <button onclick="setDenimShortsBrand('Wrangler', this)" class="denim-shorts-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Wrangler</button>
                        <button onclick="setDenimShortsBrand('Other', this)" class="denim-shorts-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- ATHLETIC SHORTS DETAILS -->
            <div id="athletic-shorts-details" class="hidden mb-4 p-3 bg-blue-50 rounded-xl border border-blue-200">
                <label class="text-[10px] font-bold text-blue-700 uppercase tracking-widest mb-2 block">üèÉ Athletic Shorts Details</label>
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setAthleticShortsBrand('Nike', this)" class="ath-shorts-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Nike</button>
                        <button onclick="setAthleticShortsBrand('Adidas', this)" class="ath-shorts-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Adidas</button>
                        <button onclick="setAthleticShortsBrand('Champion', this)" class="ath-shorts-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Champion‚≠ê</button>
                        <button onclick="setAthleticShortsBrand('Russell', this)" class="ath-shorts-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Russell‚≠ê</button>
                    </div>
                </div>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setAthleticShortsEra('Vintage', this)" class="ath-shorts-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Vintage‚≠ê</button>
                        <button onclick="setAthleticShortsEra('90s', this)" class="ath-shorts-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s</button>
                        <button onclick="setAthleticShortsEra('Modern', this)" class="ath-shorts-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- Y2K SHORTS DETAILS -->
            <div id="y2k-shorts-details" class="hidden mb-4 p-3 bg-pink-50 rounded-xl border border-pink-200">
                <label class="text-[10px] font-bold text-pink-700 uppercase tracking-widest mb-2 block">‚ú® Y2K Shorts Details</label>
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setY2KShortsStyle('Soffe/Cheer', this)" class="y2ks-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Soffe/Cheer‚≠ê</button>
                        <button onclick="setY2KShortsStyle('Low Cargo', this)" class="y2ks-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Low Cargo</button>
                        <button onclick="setY2KShortsStyle('Board', this)" class="y2ks-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Board</button>
                        <button onclick="setY2KShortsStyle('Athletic', this)" class="y2ks-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Athletic</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== SWEATPANTS SUB-TYPE SYSTEM ========== -->
            <div id="sweatpants-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-violet-600 uppercase tracking-widest mb-2 block">üèÉ Sweatpants Type</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setSweatpantsType('Vintage', this)" class="btn-sweats-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèÜ</span>
                        <span class="text-[9px]">Vintage Ath</span>
                    </button>
                    <button onclick="setSweatpantsType('Track', this)" class="btn-sweats-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèÉ</span>
                        <span class="text-[9px]">Track</span>
                    </button>
                    <button onclick="setSweatpantsType('Y2KVelour', this)" class="btn-sweats-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚ú®</span>
                        <span class="text-[9px]">Y2K Velour</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setSweatpantsType('Y2KLogo', this)" class="btn-sweats-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üî•</span>
                        <span class="text-[9px]">Y2K Logo</span>
                    </button>
                    <button onclick="setSweatpantsType('Streetwear', this)" class="btn-sweats-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üõπ</span>
                        <span class="text-[9px]">Streetwear</span>
                    </button>
                    <button onclick="setSweatpantsType('Basic', this)" class="btn-sweats-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëñ</span>
                        <span class="text-[9px]">Basic</span>
                    </button>
                </div>
            </div>
            
            <!-- SWEATPANTS UNIVERSAL FIELDS -->
            <div id="sweatpants-universal-fields" class="hidden mb-4 p-3 bg-violet-50 rounded-xl border border-violet-200">
                <label class="text-[10px] font-bold text-violet-700 uppercase tracking-widest mb-2 block">üèÉ Sweatpants Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Cuff Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setSweatsCuff('Elastic', this)" class="sweats-cuff-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Elastic Cuff‚≠ê</button>
                        <button onclick="setSweatsCuff('Open', this)" class="sweats-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Open Hem</button>
                        <button onclick="setSweatsCuff('Jogger', this)" class="sweats-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Jogger</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setSweatsOrigin('USA', this)" class="sweats-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setSweatsOrigin('Import', this)" class="sweats-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Import</button>
                        <button onclick="setSweatsOrigin('Unknown', this)" class="sweats-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
            </div>
            
            <!-- VINTAGE ATHLETIC SWEATPANTS DETAILS -->
            <div id="vintage-sweats-details" class="hidden mb-4 p-3 bg-gray-100 rounded-xl border border-gray-300">
                <label class="text-[10px] font-bold text-gray-700 uppercase tracking-widest mb-2 block">üèÜ Vintage Athletic Details</label>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setVintageSweetsBrand('Russell', this)" class="vtg-sweats-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Russell‚≠ê</button>
                        <button onclick="setVintageSweetsBrand('Champion', this)" class="vtg-sweats-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Champion‚≠ê</button>
                        <button onclick="setVintageSweetsBrand('Jerzees', this)" class="vtg-sweats-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Jerzees</button>
                        <button onclick="setVintageSweetsBrand('Other', this)" class="vtg-sweats-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- Y2K VELOUR SWEATPANTS DETAILS -->
            <div id="y2k-velour-sweats-details" class="hidden mb-4 p-3 bg-pink-50 rounded-xl border border-pink-200">
                <label class="text-[10px] font-bold text-pink-700 uppercase tracking-widest mb-2 block">‚ú® Y2K Velour Details</label>
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setY2KVelourBrand('Juicy', this)" class="y2kv-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Juicy‚≠ê‚≠ê</button>
                        <button onclick="setY2KVelourBrand('BCBG', this)" class="y2kv-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">BCBG</button>
                        <button onclick="setY2KVelourBrand('Bebe', this)" class="y2kv-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Bebe</button>
                        <button onclick="setY2KVelourBrand('Other', this)" class="y2kv-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Details</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setY2KVelourDetail('Rhinestones', this)" class="y2kv-detail-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Rhinestones‚≠ê</button>
                        <button onclick="setY2KVelourDetail('Logo Butt', this)" class="y2kv-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Logo Butt</button>
                        <button onclick="setY2KVelourDetail('Plain', this)" class="y2kv-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Plain</button>
                    </div>
                </div>
            </div>
            
            <!-- Y2K LOGO SWEATPANTS DETAILS -->
            <div id="y2k-logo-sweats-details" class="hidden mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200">
                <label class="text-[10px] font-bold text-orange-700 uppercase tracking-widest mb-2 block">üî• Y2K Logo Details</label>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setY2KLogoBrand('VS Pink', this)" class="y2kl-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">VS Pink‚≠ê</button>
                        <button onclick="setY2KLogoBrand('Abercrombie', this)" class="y2kl-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">A&F</button>
                        <button onclick="setY2KLogoBrand('Hollister', this)" class="y2kl-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Hollister</button>
                        <button onclick="setY2KLogoBrand('Other', this)" class="y2kl-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== OVERALLS SUB-TYPE SYSTEM ========== -->
            <div id="overalls-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-amber-600 uppercase tracking-widest mb-2 block">ü•º Overalls Type</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setOverallsType('DenimBib', this)" class="btn-overalls-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëñ</span>
                        <span class="text-[9px]">Denim Bibs</span>
                    </button>
                    <button onclick="setOverallsType('Workwear', this)" class="btn-overalls-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üîß</span>
                        <span class="text-[9px]">Workwear</span>
                    </button>
                    <button onclick="setOverallsType('Vintage', this)" class="btn-overalls-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üåæ</span>
                        <span class="text-[9px]">Vintage/Farm</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setOverallsType('Shortalls', this)" class="btn-overalls-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü©≥</span>
                        <span class="text-[9px]">Shortalls</span>
                    </button>
                    <button onclick="setOverallsType('Painter', this)" class="btn-overalls-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üé®</span>
                        <span class="text-[9px]">Painter</span>
                    </button>
                    <button onclick="setOverallsType('Fashion', this)" class="btn-overalls-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëö</span>
                        <span class="text-[9px]">Fashion</span>
                    </button>
                </div>
            </div>
            
            <!-- OVERALLS UNIVERSAL FIELDS -->
            <div id="overalls-universal-fields" class="hidden mb-4 p-3 bg-amber-50 rounded-xl border border-amber-200">
                <label class="text-[10px] font-bold text-amber-700 uppercase tracking-widest mb-2 block">ü•º Overalls Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setOverallsBrand('Levis', this)" class="overalls-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Levi's‚≠ê</button>
                        <button onclick="setOverallsBrand('Lee', this)" class="overalls-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Lee‚≠ê</button>
                        <button onclick="setOverallsBrand('OshKosh', this)" class="overalls-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">OshKosh‚≠ê</button>
                        <button onclick="setOverallsBrand('Carhartt', this)" class="overalls-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Carhartt</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1 mt-1">
                        <button onclick="setOverallsBrand('Dickies', this)" class="overalls-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Dickies</button>
                        <button onclick="setOverallsBrand('Key', this)" class="overalls-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Key</button>
                        <button onclick="setOverallsBrand('BigSmith', this)" class="overalls-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Big Smith</button>
                        <button onclick="setOverallsBrand('Other', this)" class="overalls-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era Indicators (select all)</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="toggleOverallsEra('Made USA', this)" class="overalls-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">USA‚≠ê</button>
                        <button onclick="toggleOverallsEra('Union Made', this)" class="overalls-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Union‚≠ê</button>
                        <button onclick="toggleOverallsEra('Orange Tab', this)" class="overalls-era-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Org Tab‚≠ê‚≠ê</button>
                        <button onclick="toggleOverallsEra('Vtg Hardware', this)" class="overalls-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Vtg Hdwr</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setOverallsFabric('Denim', this)" class="overalls-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Denim</button>
                        <button onclick="setOverallsFabric('Duck', this)" class="overalls-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Duck‚≠ê</button>
                        <button onclick="setOverallsFabric('Hickory', this)" class="overalls-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Hickory‚≠ê</button>
                        <button onclick="setOverallsFabric('Other', this)" class="overalls-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== JUMPSUIT SUB-TYPE SYSTEM ========== -->
            <div id="jumpsuit-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-sky-600 uppercase tracking-widest mb-2 block">üöÄ Jumpsuit Type</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setJumpsuitType('Flight', this)" class="btn-jumpsuit-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚úàÔ∏è</span>
                        <span class="text-[9px]">Flight Suit</span>
                    </button>
                    <button onclick="setJumpsuitType('Boiler', this)" class="btn-jumpsuit-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üîß</span>
                        <span class="text-[9px]">Boiler/Cover</span>
                    </button>
                    <button onclick="setJumpsuitType('Ski', this)" class="btn-jumpsuit-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚õ∑Ô∏è</span>
                        <span class="text-[9px]">Ski Suit</span>
                    </button>
                    <button onclick="setJumpsuitType('Fashion', this)" class="btn-jumpsuit-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëó</span>
                        <span class="text-[9px]">Fashion</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setJumpsuitType('Racing', this)" class="btn-jumpsuit-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèéÔ∏è</span>
                        <span class="text-[9px]">Racing/Moto</span>
                    </button>
                    <button onclick="setJumpsuitType('Disco', this)" class="btn-jumpsuit-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü™©</span>
                        <span class="text-[9px]">Disco/70s</span>
                    </button>
                    <button onclick="setJumpsuitType('Y2K', this)" class="btn-jumpsuit-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚ú®</span>
                        <span class="text-[9px]">Y2K/Modern</span>
                    </button>
                </div>
            </div>
            
            <!-- JUMPSUIT UNIVERSAL FIELDS -->
            <div id="jumpsuit-universal-fields" class="hidden mb-4 p-3 bg-sky-50 rounded-xl border border-sky-200">
                <label class="text-[10px] font-bold text-sky-700 uppercase tracking-widest mb-2 block">üöÄ Jumpsuit Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Closure</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJumpsuitClosure('Front Zip', this)" class="jumpsuit-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Front Zip</button>
                        <button onclick="setJumpsuitClosure('Buttons', this)" class="jumpsuit-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Buttons</button>
                        <button onclick="setJumpsuitClosure('Snap', this)" class="jumpsuit-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Snap</button>
                        <button onclick="setJumpsuitClosure('Wrap', this)" class="jumpsuit-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Wrap</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setJumpsuitOrigin('USA', this)" class="jumpsuit-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setJumpsuitOrigin('Import', this)" class="jumpsuit-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Import</button>
                        <button onclick="setJumpsuitOrigin('Unknown', this)" class="jumpsuit-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
            </div>
            
            <!-- FLIGHT SUIT DETAILS -->
            <div id="flight-jumpsuit-details" class="hidden mb-4 p-3 bg-green-50 rounded-xl border border-green-200">
                <label class="text-[10px] font-bold text-green-700 uppercase tracking-widest mb-2 block">‚úàÔ∏è Flight Suit Details</label>
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Type</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setFlightType('CWU-27/P', this)" class="flight-type-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">CWU-27/P‚≠ê</button>
                        <button onclick="setFlightType('K-2B', this)" class="flight-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">K-2B</button>
                        <button onclick="setFlightType('Other', this)" class="flight-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Patches/Insignia</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setFlightPatches('Squadron', this)" class="flight-patch-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Squadron‚≠ê</button>
                        <button onclick="setFlightPatches('Name Tape', this)" class="flight-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Name Tape</button>
                        <button onclick="setFlightPatches('None', this)" class="flight-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
            </div>
            
            <!-- BOILER/COVERALL DETAILS -->
            <div id="boiler-jumpsuit-details" class="hidden mb-4 p-3 bg-stone-100 rounded-xl border border-stone-300">
                <label class="text-[10px] font-bold text-stone-700 uppercase tracking-widest mb-2 block">üîß Boiler/Coverall Details</label>
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setBoilerBrand('Dickies', this)" class="boiler-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Dickies‚≠ê</button>
                        <button onclick="setBoilerBrand('Carhartt', this)" class="boiler-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Carhartt‚≠ê</button>
                        <button onclick="setBoilerBrand('Red Kap', this)" class="boiler-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Red Kap</button>
                        <button onclick="setBoilerBrand('Other', this)" class="boiler-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setBoilerEra('Vintage', this)" class="boiler-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Vintage (USA)‚≠ê</button>
                        <button onclick="setBoilerEra('Modern', this)" class="boiler-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- SKI SUIT DETAILS -->
            <div id="ski-jumpsuit-details" class="hidden mb-4 p-3 bg-cyan-50 rounded-xl border border-cyan-200">
                <label class="text-[10px] font-bold text-cyan-700 uppercase tracking-widest mb-2 block">‚õ∑Ô∏è Ski Suit Details</label>
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setSkiBrand('Bogner', this)" class="ski-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Bogner‚≠ê‚≠ê</button>
                        <button onclick="setSkiBrand('Obermeyer', this)" class="ski-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Obermeyer‚≠ê</button>
                        <button onclick="setSkiBrand('Spyder', this)" class="ski-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Spyder</button>
                        <button onclick="setSkiBrand('Other', this)" class="ski-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setSkiEra('70s-80s', this)" class="ski-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">70s-80s‚≠ê</button>
                        <button onclick="setSkiEra('90s Neon', this)" class="ski-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s Neon</button>
                        <button onclick="setSkiEra('Modern', this)" class="ski-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- DISCO/70s JUMPSUIT DETAILS -->
            <div id="disco-jumpsuit-details" class="hidden mb-4 p-3 bg-purple-50 rounded-xl border border-purple-200">
                <label class="text-[10px] font-bold text-purple-700 uppercase tracking-widest mb-2 block">ü™© Disco/70s Details</label>
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setDiscoStyle('Halston', this)" class="disco-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Halston‚≠ê‚≠ê</button>
                        <button onclick="setDiscoStyle('Wide Leg', this)" class="disco-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Wide Leg‚≠ê</button>
                        <button onclick="setDiscoStyle('Wrap', this)" class="disco-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Wrap</button>
                    </div>
                </div>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDiscoFabric('Polyester', this)" class="disco-fabric-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Polyester‚≠ê</button>
                        <button onclick="setDiscoFabric('Lurex', this)" class="disco-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Lurex</button>
                        <button onclick="setDiscoFabric('Silk', this)" class="disco-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Silk</button>
                        <button onclick="setDiscoFabric('Other', this)" class="disco-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== JACKET SUB-TYPE SYSTEM ========== -->
            <div id="jacket-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-slate-600 uppercase tracking-widest mb-2 block">üß• Jacket Type</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setJacketType('Denim', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëñ</span>
                        <span class="text-[8px]">Denim</span>
                    </button>
                    <button onclick="setJacketType('Varsity', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üéì</span>
                        <span class="text-[8px]">Varsity</span>
                    </button>
                    <button onclick="setJacketType('Bomber', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚úàÔ∏è</span>
                        <span class="text-[8px]">Bomber</span>
                    </button>
                    <button onclick="setJacketType('Leather', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèçÔ∏è</span>
                        <span class="text-[8px]">Leather</span>
                    </button>
                </div>
                <div class="grid grid-cols-4 gap-2 mt-2">
                    <button onclick="setJacketType('Track', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèÉ</span>
                        <span class="text-[8px]">Track</span>
                    </button>
                    <button onclick="setJacketType('Ski', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèîÔ∏è</span>
                        <span class="text-[8px]">Ski/Puffer</span>
                    </button>
                    <button onclick="setJacketType('Work', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üîß</span>
                        <span class="text-[8px]">Work</span>
                    </button>
                    <button onclick="setJacketType('Racing', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèéÔ∏è</span>
                        <span class="text-[8px]">Racing</span>
                    </button>
                </div>
                <div class="grid grid-cols-4 gap-2 mt-2">
                    <button onclick="setJacketType('Windbreaker', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üåßÔ∏è</span>
                        <span class="text-[8px]">Windbreaker</span>
                    </button>
                    <button onclick="setJacketType('Harrington', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üß•</span>
                        <span class="text-[8px]">Harrington</span>
                    </button>
                    <button onclick="setJacketType('Band', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üé∏</span>
                        <span class="text-[8px]">Band/Tour</span>
                    </button>
                    <button onclick="setJacketType('Starter', this)" class="btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèà</span>
                        <span class="text-[8px]">Starter/Pro</span>
                    </button>
                </div>
            </div>
            
            <!-- JACKET UNIVERSAL FIELDS -->
            <div id="jacket-universal-fields" class="hidden mb-4 p-3 bg-slate-100 rounded-xl border border-slate-300">
                <label class="text-[10px] font-bold text-slate-700 uppercase tracking-widest mb-2 block">üß• Jacket Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Closure</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setJacketClosure('Zipper', this)" class="jacket-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Zipper</button>
                        <button onclick="setJacketClosure('Buttons', this)" class="jacket-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Buttons</button>
                        <button onclick="setJacketClosure('Snap', this)" class="jacket-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Snap</button>
                        <button onclick="setJacketClosure('None', this)" class="jacket-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setJacketOrigin('USA', this)" class="jacket-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setJacketOrigin('Import', this)" class="jacket-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Import</button>
                        <button onclick="setJacketOrigin('Unknown', this)" class="jacket-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
            </div>
            
            <!-- DENIM JACKET DETAILS -->
            <div id="denim-jacket-details" class="hidden mb-4 p-3 bg-indigo-50 rounded-xl border border-indigo-200">
                <label class="text-[10px] font-bold text-indigo-700 uppercase tracking-widest mb-2 block">üëñ Denim/Trucker Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDenimJacketBrand('Levis', this)" class="denim-jkt-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Levi's‚≠ê</button>
                        <button onclick="setDenimJacketBrand('Lee', this)" class="denim-jkt-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Lee‚≠ê</button>
                        <button onclick="setDenimJacketBrand('Wrangler', this)" class="denim-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Wrangler</button>
                        <button onclick="setDenimJacketBrand('Other', this)" class="denim-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style/Type</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDenimJacketLevisType('Type I', this)" class="denim-jkt-type-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Type I‚≠ê‚≠ê</button>
                        <button onclick="setDenimJacketLevisType('Type II', this)" class="denim-jkt-type-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Type II‚≠ê‚≠ê</button>
                        <button onclick="setDenimJacketLevisType('Type III', this)" class="denim-jkt-type-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Type III‚≠ê</button>
                        <button onclick="setDenimJacketLevisType('Trucker', this)" class="denim-jkt-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Trucker</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Tab</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDenimJacketTab('Big E', this)" class="denim-jkt-tab-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Big E‚≠ê‚≠ê</button>
                        <button onclick="setDenimJacketTab('small e', this)" class="denim-jkt-tab-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">small e‚≠ê</button>
                        <button onclick="setDenimJacketTab('Orange', this)" class="denim-jkt-tab-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Orange</button>
                        <button onclick="setDenimJacketTab('None', this)" class="denim-jkt-tab-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">N/A</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDenimJacketEra('Pre-1971', this)" class="denim-jkt-era-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Pre-71‚≠ê‚≠ê</button>
                        <button onclick="setDenimJacketEra('70s', this)" class="denim-jkt-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">70s‚≠ê</button>
                        <button onclick="setDenimJacketEra('80s', this)" class="denim-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">80s</button>
                        <button onclick="setDenimJacketEra('90s+', this)" class="denim-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">90s+</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Lining</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setDenimJacketLining('Blanket', this)" class="denim-jkt-lining-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Blanket‚≠ê‚≠ê</button>
                        <button onclick="setDenimJacketLining('Sherpa', this)" class="denim-jkt-lining-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Sherpa‚≠ê</button>
                        <button onclick="setDenimJacketLining('Unlined', this)" class="denim-jkt-lining-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unlined</button>
                    </div>
                </div>
            </div>
            
            <!-- VARSITY JACKET DETAILS -->
            <div id="varsity-jacket-details" class="hidden mb-4 p-3 bg-red-50 rounded-xl border border-red-200">
                <label class="text-[10px] font-bold text-red-700 uppercase tracking-widest mb-2 block">üéì Varsity/Letterman Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Body Material</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setVarsityBody('Wool', this)" class="varsity-body-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Wool‚≠ê</button>
                        <button onclick="setVarsityBody('Leather', this)" class="varsity-body-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Leather</button>
                        <button onclick="setVarsityBody('Other', this)" class="varsity-body-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Sleeve Material</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setVarsitySleeve('Leather', this)" class="varsity-sleeve-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Leather‚≠ê‚≠ê</button>
                        <button onclick="setVarsitySleeve('Wool', this)" class="varsity-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Wool</button>
                        <button onclick="setVarsitySleeve('Vinyl', this)" class="varsity-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Vinyl</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Patches</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setVarsityPatches('Chenille', this)" class="varsity-patch-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Chenille‚≠ê‚≠ê</button>
                        <button onclick="setVarsityPatches('Embroidered', this)" class="varsity-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Embroidered</button>
                        <button onclick="setVarsityPatches('None', this)" class="varsity-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setVarsityEra('50s-60s', this)" class="varsity-era-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">50s-60s‚≠ê‚≠ê</button>
                        <button onclick="setVarsityEra('70s-80s', this)" class="varsity-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">70s-80s</button>
                        <button onclick="setVarsityEra('90s+', this)" class="varsity-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s+</button>
                    </div>
                </div>
            </div>
            
            <!-- BOMBER/FLIGHT JACKET DETAILS -->
            <div id="bomber-jacket-details" class="hidden mb-4 p-3 bg-green-50 rounded-xl border border-green-200">
                <label class="text-[10px] font-bold text-green-700 uppercase tracking-widest mb-2 block">‚úàÔ∏è Bomber/Flight Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Type</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setBomberType('MA-1', this)" class="bomber-type-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">MA-1‚≠ê</button>
                        <button onclick="setBomberType('A-2', this)" class="bomber-type-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">A-2‚≠ê‚≠ê</button>
                        <button onclick="setBomberType('G-1', this)" class="bomber-type-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">G-1‚≠ê‚≠ê</button>
                        <button onclick="setBomberType('B-15', this)" class="bomber-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">B-15</button>
                        <button onclick="setBomberType('L-2B', this)" class="bomber-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">L-2B</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Issue</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBomberIssue('Military', this)" class="bomber-issue-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Military‚≠ê‚≠ê</button>
                        <button onclick="setBomberIssue('Civilian', this)" class="bomber-issue-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Civilian</button>
                        <button onclick="setBomberIssue('Repro', this)" class="bomber-issue-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Repro</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Patches</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBomberPatches('Squadron', this)" class="bomber-patch-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Squadron‚≠ê</button>
                        <button onclick="setBomberPatches('Blood Chit', this)" class="bomber-patch-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Blood Chit‚≠ê‚≠ê</button>
                        <button onclick="setBomberPatches('None', this)" class="bomber-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBomberEra('WWII', this)" class="bomber-era-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">WWII‚≠ê‚≠ê</button>
                        <button onclick="setBomberEra('Korea/Vietnam', this)" class="bomber-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Korea/Viet‚≠ê</button>
                        <button onclick="setBomberEra('Modern', this)" class="bomber-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- LEATHER JACKET DETAILS -->
            <div id="leather-jacket-details" class="hidden mb-4 p-3 bg-stone-100 rounded-xl border border-stone-300">
                <label class="text-[10px] font-bold text-stone-700 uppercase tracking-widest mb-2 block">üèçÔ∏è Leather Jacket Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setLeatherStyle('Motorcycle', this)" class="leather-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Moto‚≠ê</button>
                        <button onclick="setLeatherStyle('Cafe Racer', this)" class="leather-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Cafe Racer</button>
                        <button onclick="setLeatherStyle('Western', this)" class="leather-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Western</button>
                        <button onclick="setLeatherStyle('Blazer', this)" class="leather-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Blazer</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setLeatherBrand('Schott', this)" class="leather-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Schott‚≠ê‚≠ê</button>
                        <button onclick="setLeatherBrand('Vanson', this)" class="leather-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Vanson‚≠ê</button>
                        <button onclick="setLeatherBrand('Harley', this)" class="leather-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Harley</button>
                        <button onclick="setLeatherBrand('Other', this)" class="leather-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Features (select all)</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="toggleLeatherFeature('Quilted', this)" class="leather-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Quilted</button>
                        <button onclick="toggleLeatherFeature('Belt', this)" class="leather-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Belt</button>
                        <button onclick="toggleLeatherFeature('Zippers', this)" class="leather-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Zippers</button>
                        <button onclick="toggleLeatherFeature('Fringe', this)" class="leather-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Fringe</button>
                    </div>
                </div>
            </div>
            
            <!-- TRACK JACKET DETAILS -->
            <div id="track-jacket-details" class="hidden mb-4 p-3 bg-blue-50 rounded-xl border border-blue-200">
                <label class="text-[10px] font-bold text-blue-700 uppercase tracking-widest mb-2 block">üèÉ Track/Warm-up Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setTrackJacketBrand('Adidas', this)" class="track-jkt-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Adidas‚≠ê</button>
                        <button onclick="setTrackJacketBrand('Nike', this)" class="track-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Nike</button>
                        <button onclick="setTrackJacketBrand('Puma', this)" class="track-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Puma</button>
                        <button onclick="setTrackJacketBrand('Fila', this)" class="track-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Fila</button>
                        <button onclick="setTrackJacketBrand('Other', this)" class="track-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setTrackJacketStyle('Side Stripe', this)" class="track-jkt-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Side Stripe‚≠ê</button>
                        <button onclick="setTrackJacketStyle('Color Block', this)" class="track-jkt-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Color Block</button>
                        <button onclick="setTrackJacketStyle('Solid', this)" class="track-jkt-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Solid</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setTrackJacketEra('70s-80s', this)" class="track-jkt-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">70s-80s‚≠ê</button>
                        <button onclick="setTrackJacketEra('90s', this)" class="track-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s</button>
                        <button onclick="setTrackJacketEra('Y2K', this)" class="track-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Y2K</button>
                    </div>
                </div>
            </div>
            
            <!-- SKI/PUFFER JACKET DETAILS -->
            <div id="ski-jacket-details" class="hidden mb-4 p-3 bg-cyan-50 rounded-xl border border-cyan-200">
                <label class="text-[10px] font-bold text-cyan-700 uppercase tracking-widest mb-2 block">üèîÔ∏è Ski/Puffer Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setSkiJacketBrand('Patagonia', this)" class="ski-jkt-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Patagonia‚≠ê</button>
                        <button onclick="setSkiJacketBrand('North Face', this)" class="ski-jkt-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">North Face‚≠ê</button>
                        <button onclick="setSkiJacketBrand('Columbia', this)" class="ski-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Columbia</button>
                        <button onclick="setSkiJacketBrand('Other', this)" class="ski-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fill</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setSkiJacketFill('Down', this)" class="ski-jkt-fill-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Down‚≠ê</button>
                        <button onclick="setSkiJacketFill('Synthetic', this)" class="ski-jkt-fill-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Synthetic</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setSkiJacketEra('Vintage', this)" class="ski-jkt-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Vintage‚≠ê</button>
                        <button onclick="setSkiJacketEra('90s Neon', this)" class="ski-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s Neon</button>
                        <button onclick="setSkiJacketEra('Modern', this)" class="ski-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- WORK JACKET DETAILS -->
            <div id="work-jacket-details" class="hidden mb-4 p-3 bg-amber-50 rounded-xl border border-amber-200">
                <label class="text-[10px] font-bold text-amber-700 uppercase tracking-widest mb-2 block">üîß Work/Chore Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setWorkJacketBrand('Carhartt', this)" class="work-jkt-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Carhartt‚≠ê</button>
                        <button onclick="setWorkJacketBrand('Dickies', this)" class="work-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Dickies</button>
                        <button onclick="setWorkJacketBrand('Key', this)" class="work-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Key</button>
                        <button onclick="setWorkJacketBrand('Other', this)" class="work-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWorkJacketStyle('Chore', this)" class="work-jkt-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Chore‚≠ê</button>
                        <button onclick="setWorkJacketStyle('Detroit', this)" class="work-jkt-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Detroit</button>
                        <button onclick="setWorkJacketStyle('Duck', this)" class="work-jkt-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Duck</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Lining</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWorkJacketLining('Blanket', this)" class="work-jkt-lining-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Blanket‚≠ê</button>
                        <button onclick="setWorkJacketLining('Quilted', this)" class="work-jkt-lining-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Quilted</button>
                        <button onclick="setWorkJacketLining('Unlined', this)" class="work-jkt-lining-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unlined</button>
                    </div>
                </div>
            </div>
            
            <!-- RACING JACKET DETAILS -->
            <div id="racing-jacket-details" class="hidden mb-4 p-3 bg-red-50 rounded-xl border border-red-200">
                <label class="text-[10px] font-bold text-red-700 uppercase tracking-widest mb-2 block">üèéÔ∏è Racing/Moto Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Type</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setRacingJktType('NASCAR', this)" class="racing-jkt-type-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">NASCAR‚≠ê</button>
                        <button onclick="setRacingJktType('F1', this)" class="racing-jkt-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">F1</button>
                        <button onclick="setRacingJktType('Motocross', this)" class="racing-jkt-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Motocross</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Sponsor Patches</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setRacingJktPatches('Heavy', this)" class="racing-jkt-patch-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Heavy‚≠ê</button>
                        <button onclick="setRacingJktPatches('Light', this)" class="racing-jkt-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Light</button>
                        <button onclick="setRacingJktPatches('None', this)" class="racing-jkt-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setRacingJktEra('Vintage', this)" class="racing-jkt-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Vintage‚≠ê</button>
                        <button onclick="setRacingJktEra('90s', this)" class="racing-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s</button>
                        <button onclick="setRacingJktEra('Modern', this)" class="racing-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- STARTER/PRO SPORTS JACKET DETAILS -->
            <div id="starter-jacket-details" class="hidden mb-4 p-3 bg-violet-50 rounded-xl border border-violet-200">
                <label class="text-[10px] font-bold text-violet-700 uppercase tracking-widest mb-2 block">üèà Starter/Pro Sports Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setStarterBrand('Starter', this)" class="starter-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Starter‚≠ê</button>
                        <button onclick="setStarterBrand('Pro Player', this)" class="starter-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Pro Player</button>
                        <button onclick="setStarterBrand('Chalk Line', this)" class="starter-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Chalk Line</button>
                        <button onclick="setStarterBrand('Logo Athletic', this)" class="starter-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Logo Ath</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">League</label>
                    <div class="grid grid-cols-5 gap-1">
                        <button onclick="setStarterLeague('NFL', this)" class="starter-league-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">NFL‚≠ê</button>
                        <button onclick="setStarterLeague('NBA', this)" class="starter-league-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">NBA</button>
                        <button onclick="setStarterLeague('MLB', this)" class="starter-league-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">MLB</button>
                        <button onclick="setStarterLeague('NHL', this)" class="starter-league-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">NHL</button>
                        <button onclick="setStarterLeague('NCAA', this)" class="starter-league-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">NCAA</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setStarterStyle('Satin', this)" class="starter-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Satin‚≠ê</button>
                        <button onclick="setStarterStyle('Pullover', this)" class="starter-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pullover</button>
                        <button onclick="setStarterStyle('Puffer', this)" class="starter-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Puffer</button>
                    </div>
                </div>
            </div>
            
            <!-- WINDBREAKER JACKET DETAILS -->
            <div id="windbreaker-jacket-details" class="hidden mb-4 p-3 bg-sky-50 rounded-xl border border-sky-200">
                <label class="text-[10px] font-bold text-sky-700 uppercase tracking-widest mb-2 block">üåßÔ∏è Windbreaker Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWindbreakerStyle('Pullover', this)" class="wind-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Pullover‚≠ê</button>
                        <button onclick="setWindbreakerStyle('Full Zip', this)" class="wind-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Full Zip</button>
                        <button onclick="setWindbreakerStyle('Anorak', this)" class="wind-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Anorak</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWindbreakerEra('80s-90s', this)" class="wind-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">80s-90s‚≠ê</button>
                        <button onclick="setWindbreakerEra('Y2K', this)" class="wind-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Y2K</button>
                        <button onclick="setWindbreakerEra('Modern', this)" class="wind-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- HARRINGTON JACKET DETAILS -->
            <div id="harrington-jacket-details" class="hidden mb-4 p-3 bg-emerald-50 rounded-xl border border-emerald-200">
                <label class="text-[10px] font-bold text-emerald-700 uppercase tracking-widest mb-2 block">üß• Harrington Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setHarringtonBrand('Baracuta', this)" class="harrington-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Baracuta‚≠ê‚≠ê</button>
                        <button onclick="setHarringtonBrand('Ben Sherman', this)" class="harrington-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Ben Sherman</button>
                        <button onclick="setHarringtonBrand('Other', this)" class="harrington-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Origin</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setHarringtonOrigin('England', this)" class="harrington-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Made England‚≠ê</button>
                        <button onclick="setHarringtonOrigin('Other', this)" class="harrington-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- BAND/TOUR JACKET DETAILS -->
            <div id="band-jacket-details" class="hidden mb-4 p-3 bg-purple-50 rounded-xl border border-purple-200">
                <label class="text-[10px] font-bold text-purple-700 uppercase tracking-widest mb-2 block">üé∏ Band/Tour Jacket Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBandJacketStyle('Satin', this)" class="band-jkt-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Satin‚≠ê</button>
                        <button onclick="setBandJacketStyle('Denim', this)" class="band-jkt-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Denim</button>
                        <button onclick="setBandJacketStyle('Leather', this)" class="band-jkt-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Leather</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setBandJacketEra('70s-80s', this)" class="band-jkt-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">70s-80s‚≠ê</button>
                        <button onclick="setBandJacketEra('90s', this)" class="band-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s</button>
                        <button onclick="setBandJacketEra('Modern', this)" class="band-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== COAT SUB-TYPE SYSTEM ========== -->
            <div id="coat-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-gray-600 uppercase tracking-widest mb-2 block">üß• Coat Type</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setCoatType('Overcoat', this)" class="btn-coat-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üß•</span>
                        <span class="text-[8px]">Overcoat</span>
                    </button>
                    <button onclick="setCoatType('Trench', this)" class="btn-coat-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üïµÔ∏è</span>
                        <span class="text-[8px]">Trench</span>
                    </button>
                    <button onclick="setCoatType('Peacoat', this)" class="btn-coat-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚öì</span>
                        <span class="text-[8px]">Peacoat</span>
                    </button>
                    <button onclick="setCoatType('Parka', this)" class="btn-coat-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèîÔ∏è</span>
                        <span class="text-[8px]">Parka</span>
                    </button>
                </div>
                <div class="grid grid-cols-4 gap-2 mt-2">
                    <button onclick="setCoatType('Duster', this)" class="btn-coat-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü§†</span>
                        <span class="text-[8px]">Duster</span>
                    </button>
                    <button onclick="setCoatType('Fur', this)" class="btn-coat-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü¶ä</span>
                        <span class="text-[8px]">Fur/Faux</span>
                    </button>
                    <button onclick="setCoatType('Rain', this)" class="btn-coat-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üåßÔ∏è</span>
                        <span class="text-[8px]">Rain/Mac</span>
                    </button>
                    <button onclick="setCoatType('CarCoat', this)" class="btn-coat-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üß∂</span>
                        <span class="text-[8px]">Car Coat</span>
                    </button>
                </div>
            </div>
            
            <!-- COAT UNIVERSAL FIELDS -->
            <div id="coat-universal-fields" class="hidden mb-4 p-3 bg-gray-100 rounded-xl border border-gray-300">
                <label class="text-[10px] font-bold text-gray-700 uppercase tracking-widest mb-2 block">üß• Coat Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Length</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCoatLength('Short', this)" class="coat-len-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Short</button>
                        <button onclick="setCoatLength('Mid', this)" class="coat-len-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mid</button>
                        <button onclick="setCoatLength('Long', this)" class="coat-len-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Long</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCoatOrigin('USA', this)" class="coat-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setCoatOrigin('England', this)" class="coat-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">England‚≠ê</button>
                        <button onclick="setCoatOrigin('Other', this)" class="coat-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
            </div>
            
            <!-- TRENCH COAT DETAILS -->
            <div id="trench-coat-details" class="hidden mb-4 p-3 bg-yellow-50 rounded-xl border border-yellow-200">
                <label class="text-[10px] font-bold text-yellow-700 uppercase tracking-widest mb-2 block">üïµÔ∏è Trench Coat Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setTrenchBrand('Burberry', this)" class="trench-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Burberry‚≠ê‚≠ê</button>
                        <button onclick="setTrenchBrand('Aquascutum', this)" class="trench-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Aquascutum‚≠ê</button>
                        <button onclick="setTrenchBrand('London Fog', this)" class="trench-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">London Fog</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Features (select all)</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleTrenchFeature('Belt', this)" class="trench-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Belt</button>
                        <button onclick="toggleTrenchFeature('Epaulettes', this)" class="trench-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Epaulettes</button>
                        <button onclick="toggleTrenchFeature('Liner', this)" class="trench-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Liner</button>
                    </div>
                </div>
            </div>
            
            <!-- PEACOAT DETAILS -->
            <div id="peacoat-details" class="hidden mb-4 p-3 bg-blue-50 rounded-xl border border-blue-200">
                <label class="text-[10px] font-bold text-blue-700 uppercase tracking-widest mb-2 block">‚öì Peacoat Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Issue</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setPeacoatIssue('Navy Issue', this)" class="peacoat-issue-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Navy Issue‚≠ê‚≠ê</button>
                        <button onclick="setPeacoatIssue('Civilian', this)" class="peacoat-issue-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Civilian</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setPeacoatEra('WWII', this)" class="peacoat-era-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">WWII‚≠ê‚≠ê</button>
                        <button onclick="setPeacoatEra('Korea/Vietnam', this)" class="peacoat-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Korea/Viet‚≠ê</button>
                        <button onclick="setPeacoatEra('Modern', this)" class="peacoat-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Buttons</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setPeacoatButtons('13-Star', this)" class="peacoat-btn-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">13-Star‚≠ê‚≠ê</button>
                        <button onclick="setPeacoatButtons('Anchor', this)" class="peacoat-btn-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Anchor</button>
                        <button onclick="setPeacoatButtons('Civilian', this)" class="peacoat-btn-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Civilian</button>
                    </div>
                </div>
            </div>
            
            <!-- PARKA DETAILS -->
            <div id="parka-details" class="hidden mb-4 p-3 bg-green-50 rounded-xl border border-green-200">
                <label class="text-[10px] font-bold text-green-700 uppercase tracking-widest mb-2 block">üèîÔ∏è Parka Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Type</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setParkaType('N-3B', this)" class="parka-type-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">N-3B‚≠ê‚≠ê</button>
                        <button onclick="setParkaType('M-51', this)" class="parka-type-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">M-51‚≠ê‚≠ê</button>
                        <button onclick="setParkaType('Snorkel', this)" class="parka-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Snorkel</button>
                        <button onclick="setParkaType('M-65', this)" class="parka-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">M-65</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Issue</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setParkaIssue('Military', this)" class="parka-issue-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Military‚≠ê‚≠ê</button>
                        <button onclick="setParkaIssue('Civilian', this)" class="parka-issue-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Civilian</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Hood</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setParkaHood('Fur Ruff', this)" class="parka-hood-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Fur Ruff‚≠ê</button>
                        <button onclick="setParkaHood('Synthetic', this)" class="parka-hood-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Synthetic</button>
                        <button onclick="setParkaHood('None', this)" class="parka-hood-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== HOODIE SUB-TYPE SYSTEM ========== -->
            <div id="hoodie-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-orange-600 uppercase tracking-widest mb-2 block">üéΩ Hoodie Type</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setHoodieType('Vintage', this)" class="btn-hoodie-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèÜ</span>
                        <span class="text-[9px]">Vintage Ath</span>
                    </button>
                    <button onclick="setHoodieType('Y2K', this)" class="btn-hoodie-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚ú®</span>
                        <span class="text-[9px]">Y2K</span>
                    </button>
                    <button onclick="setHoodieType('Streetwear', this)" class="btn-hoodie-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üõπ</span>
                        <span class="text-[9px]">Streetwear</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setHoodieType('Band', this)" class="btn-hoodie-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üé∏</span>
                        <span class="text-[9px]">Band/Tour</span>
                    </button>
                    <button onclick="setHoodieType('College', this)" class="btn-hoodie-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üéì</span>
                        <span class="text-[9px]">College</span>
                    </button>
                    <button onclick="setHoodieType('Basic', this)" class="btn-hoodie-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëï</span>
                        <span class="text-[9px]">Basic</span>
                    </button>
                </div>
            </div>
            
            <!-- HOODIE UNIVERSAL FIELDS -->
            <div id="hoodie-universal-fields" class="hidden mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200">
                <label class="text-[10px] font-bold text-orange-700 uppercase tracking-widest mb-2 block">üéΩ Hoodie Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Closure</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setHoodieClosure('Pullover', this)" class="hoodie-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pullover</button>
                        <button onclick="setHoodieClosure('Full Zip', this)" class="hoodie-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Full Zip</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setHoodieOrigin('USA', this)" class="hoodie-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setHoodieOrigin('Import', this)" class="hoodie-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Import</button>
                        <button onclick="setHoodieOrigin('Unknown', this)" class="hoodie-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
            </div>
            
            <!-- VINTAGE ATHLETIC HOODIE DETAILS -->
            <div id="vintage-hoodie-details" class="hidden mb-4 p-3 bg-gray-100 rounded-xl border border-gray-300">
                <label class="text-[10px] font-bold text-gray-700 uppercase tracking-widest mb-2 block">üèÜ Vintage Athletic Hoodie</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setVintageHoodieBrand('Champion', this)" class="vtg-hoodie-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Champion‚≠ê‚≠ê</button>
                        <button onclick="setVintageHoodieBrand('Russell', this)" class="vtg-hoodie-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Russell‚≠ê</button>
                        <button onclick="setVintageHoodieBrand('Other', this)" class="vtg-hoodie-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Features</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setVintageHoodieStyle('Reverse Weave', this)" class="vtg-hoodie-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Reverse Weave‚≠ê‚≠ê</button>
                        <button onclick="setVintageHoodieStyle('Standard', this)" class="vtg-hoodie-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Standard</button>
                    </div>
                </div>
            </div>
            
            <!-- Y2K HOODIE DETAILS -->
            <div id="y2k-hoodie-details" class="hidden mb-4 p-3 bg-pink-50 rounded-xl border border-pink-200">
                <label class="text-[10px] font-bold text-pink-700 uppercase tracking-widest mb-2 block">‚ú® Y2K Hoodie Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setY2KHoodieBrand('Juicy', this)" class="y2k-hoodie-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Juicy‚≠ê‚≠ê</button>
                        <button onclick="setY2KHoodieBrand('VS Pink', this)" class="y2k-hoodie-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">VS Pink‚≠ê</button>
                        <button onclick="setY2KHoodieBrand('Other', this)" class="y2k-hoodie-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setY2KHoodieStyle('Velour', this)" class="y2k-hoodie-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Velour‚≠ê‚≠ê</button>
                        <button onclick="setY2KHoodieStyle('Terry', this)" class="y2k-hoodie-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Terry</button>
                        <button onclick="setY2KHoodieStyle('Logo', this)" class="y2k-hoodie-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Logo</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== SWEATSHIRT SUB-TYPE SYSTEM ========== -->
            <div id="sweatshirt-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-rose-600 uppercase tracking-widest mb-2 block">üëï Sweatshirt Type</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setSweatshirtType('Vintage', this)" class="btn-sweatshirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèÜ</span>
                        <span class="text-[9px]">Vintage Ath</span>
                    </button>
                    <button onclick="setSweatshirtType('College', this)" class="btn-sweatshirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üéì</span>
                        <span class="text-[9px]">College</span>
                    </button>
                    <button onclick="setSweatshirtType('Band', this)" class="btn-sweatshirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üé∏</span>
                        <span class="text-[9px]">Band/Graphic</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setSweatshirtType('Sports', this)" class="btn-sweatshirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèÉ</span>
                        <span class="text-[9px]">Sports/Team</span>
                    </button>
                    <button onclick="setSweatshirtType('Y2K', this)" class="btn-sweatshirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚ú®</span>
                        <span class="text-[9px]">Y2K</span>
                    </button>
                    <button onclick="setSweatshirtType('Basic', this)" class="btn-sweatshirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëï</span>
                        <span class="text-[9px]">Basic</span>
                    </button>
                </div>
            </div>
            
            <!-- SWEATSHIRT UNIVERSAL FIELDS -->
            <div id="sweatshirt-universal-fields" class="hidden mb-4 p-3 bg-rose-50 rounded-xl border border-rose-200">
                <label class="text-[10px] font-bold text-rose-700 uppercase tracking-widest mb-2 block">üëï Sweatshirt Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Neck Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setSweatshirtNeck('Crew', this)" class="sweatshirt-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Crew</button>
                        <button onclick="setSweatshirtNeck('V-Stitch', this)" class="sweatshirt-neck-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">V-Stitch‚≠ê‚≠ê</button>
                        <button onclick="setSweatshirtNeck('Quarter Zip', this)" class="sweatshirt-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Quarter Zip</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setSweatshirtOrigin('USA', this)" class="sweatshirt-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setSweatshirtOrigin('Import', this)" class="sweatshirt-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Import</button>
                        <button onclick="setSweatshirtOrigin('Unknown', this)" class="sweatshirt-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
            </div>
            
            <!-- VINTAGE ATHLETIC SWEATSHIRT DETAILS -->
            <div id="vintage-sweatshirt-details" class="hidden mb-4 p-3 bg-gray-100 rounded-xl border border-gray-300">
                <label class="text-[10px] font-bold text-gray-700 uppercase tracking-widest mb-2 block">üèÜ Vintage Athletic Sweatshirt</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setVintageSweatshirtBrand('Champion', this)" class="vtg-sweat-brand-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[8px]">Champion‚≠ê‚≠ê</button>
                        <button onclick="setVintageSweatshirtBrand('Russell', this)" class="vtg-sweat-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Russell‚≠ê</button>
                        <button onclick="setVintageSweatshirtBrand('FOTL', this)" class="vtg-sweat-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">FOTL</button>
                        <button onclick="setVintageSweatshirtBrand('Other', this)" class="vtg-sweat-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setVintageSweatshirtStyle('Reverse Weave', this)" class="vtg-sweat-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Reverse Weave‚≠ê‚≠ê</button>
                        <button onclick="setVintageSweatshirtStyle('Raglan', this)" class="vtg-sweat-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Raglan‚≠ê</button>
                        <button onclick="setVintageSweatshirtStyle('Set-In', this)" class="vtg-sweat-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Set-In</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setVintageSweatshirtEra('60s-70s', this)" class="vtg-sweat-era-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">60s-70s‚≠ê‚≠ê</button>
                        <button onclick="setVintageSweatshirtEra('80s', this)" class="vtg-sweat-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">80s</button>
                        <button onclick="setVintageSweatshirtEra('90s', this)" class="vtg-sweat-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">90s</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== SWEATER SUB-TYPE SYSTEM ========== -->
            <div id="sweater-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-purple-600 uppercase tracking-widest mb-2 block">üß∂ Sweater Type</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="setSweaterType('Crewneck', this)" class="btn-sweater-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üß∂</span>
                        <span class="text-[8px]">Crewneck</span>
                    </button>
                    <button onclick="setSweaterType('V-Neck', this)" class="btn-sweater-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëî</span>
                        <span class="text-[8px]">V-Neck</span>
                    </button>
                    <button onclick="setSweaterType('Turtleneck', this)" class="btn-sweater-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üß£</span>
                        <span class="text-[8px]">Turtleneck</span>
                    </button>
                    <button onclick="setSweaterType('Cable', this)" class="btn-sweater-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">ü™¢</span>
                        <span class="text-[8px]">Cable Knit</span>
                    </button>
                </div>
                <div class="grid grid-cols-4 gap-2 mt-2">
                    <button onclick="setSweaterType('FairIsle', this)" class="btn-sweater-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚ùÑÔ∏è</span>
                        <span class="text-[8px]">Fair Isle</span>
                    </button>
                    <button onclick="setSweaterType('Ski', this)" class="btn-sweater-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">‚õ∑Ô∏è</span>
                        <span class="text-[8px]">Ski/Novelty</span>
                    </button>
                    <button onclick="setSweaterType('Tennis', this)" class="btn-sweater-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üéæ</span>
                        <span class="text-[8px]">Tennis/Cricket</span>
                    </button>
                    <button onclick="setSweaterType('Cowichan', this)" class="btn-sweater-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèîÔ∏è</span>
                        <span class="text-[8px]">Cowichan</span>
                    </button>
                </div>
            </div>
            
            <!-- SWEATER UNIVERSAL FIELDS -->
            <div id="sweater-universal-fields" class="hidden mb-4 p-3 bg-purple-50 rounded-xl border border-purple-200">
                <label class="text-[10px] font-bold text-purple-700 uppercase tracking-widest mb-2 block">üß∂ Sweater Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Material</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setSweaterMaterial('Wool', this)" class="sweater-mat-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Wool‚≠ê</button>
                        <button onclick="setSweaterMaterial('Cashmere', this)" class="sweater-mat-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Cashmere‚≠ê‚≠ê</button>
                        <button onclick="setSweaterMaterial('Mohair', this)" class="sweater-mat-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Mohair‚≠ê</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1 mt-1">
                        <button onclick="setSweaterMaterial('Cotton', this)" class="sweater-mat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cotton</button>
                        <button onclick="setSweaterMaterial('Acrylic', this)" class="sweater-mat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Acrylic</button>
                        <button onclick="setSweaterMaterial('Blend', this)" class="sweater-mat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Blend</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setSweaterOrigin('Scotland', this)" class="sweater-origin-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Scotland‚≠ê‚≠ê</button>
                        <button onclick="setSweaterOrigin('Ireland', this)" class="sweater-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Ireland‚≠ê</button>
                        <button onclick="setSweaterOrigin('UK', this)" class="sweater-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">UK‚≠ê</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1 mt-1">
                        <button onclick="setSweaterOrigin('Italy', this)" class="sweater-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Italy‚≠ê</button>
                        <button onclick="setSweaterOrigin('USA', this)" class="sweater-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setSweaterOrigin('Import', this)" class="sweater-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Import</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Era</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setSweaterEra('50s-60s', this)" class="sweater-era-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">50s-60s‚≠ê‚≠ê</button>
                        <button onclick="setSweaterEra('70s', this)" class="sweater-era-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">70s‚≠ê</button>
                        <button onclick="setSweaterEra('80s-90s', this)" class="sweater-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">80s-90s</button>
                        <button onclick="setSweaterEra('Modern', this)" class="sweater-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
            </div>
            
            <!-- FAIR ISLE/NORDIC SWEATER DETAILS -->
            <div id="fairisle-sweater-details" class="hidden mb-4 p-3 bg-blue-50 rounded-xl border border-blue-200">
                <label class="text-[10px] font-bold text-blue-700 uppercase tracking-widest mb-2 block">‚ùÑÔ∏è Fair Isle/Nordic Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Pattern</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setFairIslePattern('Traditional', this)" class="fairisle-pattern-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Traditional‚≠ê</button>
                        <button onclick="setFairIslePattern('Modern', this)" class="fairisle-pattern-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Modern</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Origin Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setFairIsleOriginStyle('Scottish', this)" class="fairisle-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Scottish‚≠ê‚≠ê</button>
                        <button onclick="setFairIsleOriginStyle('Norwegian', this)" class="fairisle-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Norwegian‚≠ê</button>
                        <button onclick="setFairIsleOriginStyle('Icelandic', this)" class="fairisle-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Icelandic‚≠ê</button>
                    </div>
                </div>
            </div>
            
            <!-- COWICHAN/CHUNKY SWEATER DETAILS -->
            <div id="cowichan-sweater-details" class="hidden mb-4 p-3 bg-amber-50 rounded-xl border border-amber-200">
                <label class="text-[10px] font-bold text-amber-700 uppercase tracking-widest mb-2 block">üèîÔ∏è Cowichan/Chunky Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCowichanStyle('Cowichan', this)" class="cowichan-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Cowichan‚≠ê‚≠ê</button>
                        <button onclick="setCowichanStyle('Shawl Collar', this)" class="cowichan-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Shawl Collar‚≠ê</button>
                        <button onclick="setCowichanStyle('Chunky', this)" class="cowichan-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Chunky</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Construction</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setCowichanHandknit('Yes', this)" class="cowichan-knit-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Handknit‚≠ê‚≠ê</button>
                        <button onclick="setCowichanHandknit('No', this)" class="cowichan-knit-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Machine</button>
                    </div>
                </div>
            </div>
            
            <!-- TENNIS/CRICKET SWEATER DETAILS -->
            <div id="tennis-sweater-details" class="hidden mb-4 p-3 bg-green-50 rounded-xl border border-green-200">
                <label class="text-[10px] font-bold text-green-700 uppercase tracking-widest mb-2 block">üéæ Tennis/Cricket Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setTennisSweaterBrand('Lacoste', this)" class="tennis-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Lacoste‚≠ê</button>
                        <button onclick="setTennisSweaterBrand('Fred Perry', this)" class="tennis-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Fred Perry‚≠ê</button>
                        <button onclick="setTennisSweaterBrand('Ralph Lauren', this)" class="tennis-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Ralph Lauren</button>
                        <button onclick="setTennisSweaterBrand('Other', this)" class="tennis-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setTennisSweaterStyle('Cable V-Neck', this)" class="tennis-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Cable V-Neck‚≠ê</button>
                        <button onclick="setTennisSweaterStyle('Cricket', this)" class="tennis-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Cricket‚≠ê</button>
                        <button onclick="setTennisSweaterStyle('Plain', this)" class="tennis-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Plain</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== CARDIGAN SUB-TYPE SYSTEM ========== -->
            <div id="cardigan-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-teal-600 uppercase tracking-widest mb-2 block">üß∂ Cardigan Type</label>
                <div class="grid grid-cols-5 gap-2">
                    <button onclick="setCardiganType('Vintage', this)" class="btn-cardigan-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üë¥</span>
                        <span class="text-[8px]">Vintage</span>
                    </button>
                    <button onclick="setCardiganType('Varsity', this)" class="btn-cardigan-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üéì</span>
                        <span class="text-[8px]">Varsity</span>
                    </button>
                    <button onclick="setCardiganType('Grunge', this)" class="btn-cardigan-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üé∏</span>
                        <span class="text-[8px]">Grunge</span>
                    </button>
                    <button onclick="setCardiganType('Designer', this)" class="btn-cardigan-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üíé</span>
                        <span class="text-[8px]">Designer</span>
                    </button>
                    <button onclick="setCardiganType('Basic', this)" class="btn-cardigan-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üß∂</span>
                        <span class="text-[8px]">Basic</span>
                    </button>
                </div>
            </div>
            
            <!-- CARDIGAN UNIVERSAL FIELDS -->
            <div id="cardigan-universal-fields" class="hidden mb-4 p-3 bg-teal-50 rounded-xl border border-teal-200">
                <label class="text-[10px] font-bold text-teal-700 uppercase tracking-widest mb-2 block">üß∂ Cardigan Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCardiganStyle('Shawl Collar', this)" class="cardigan-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Shawl Collar‚≠ê</button>
                        <button onclick="setCardiganStyle('V-Neck', this)" class="cardigan-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">V-Neck</button>
                        <button onclick="setCardiganStyle('Button Front', this)" class="cardigan-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Button Front</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Material</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setCardiganMaterial('Wool', this)" class="cardigan-mat-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Wool‚≠ê</button>
                        <button onclick="setCardiganMaterial('Mohair', this)" class="cardigan-mat-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Mohair‚≠ê</button>
                        <button onclick="setCardiganMaterial('Acrylic', this)" class="cardigan-mat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Acrylic</button>
                        <button onclick="setCardiganMaterial('Cotton', this)" class="cardigan-mat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cotton</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setCardiganOrigin('UK', this)" class="cardigan-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">UK‚≠ê</button>
                        <button onclick="setCardiganOrigin('USA', this)" class="cardigan-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setCardiganOrigin('Italy', this)" class="cardigan-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Italy‚≠ê</button>
                        <button onclick="setCardiganOrigin('Other', this)" class="cardigan-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Features</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="toggleCardiganFeature('Elbow Patches', this)" class="cardigan-feat-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Elbow Patches‚≠ê</button>
                        <button onclick="toggleCardiganFeature('Pockets', this)" class="cardigan-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pockets</button>
                    </div>
                </div>
            </div>
            
            <!-- ========== VEST SUB-TYPE SYSTEM ========== -->
            <div id="vest-type-section" class="hidden mb-4">
                <label class="text-[10px] font-bold text-lime-600 uppercase tracking-widest mb-2 block">ü¶∫ Vest Type</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setVestType('Puffer', this)" class="btn-vest-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèîÔ∏è</span>
                        <span class="text-[9px]">Puffer/Down</span>
                    </button>
                    <button onclick="setVestType('Denim', this)" class="btn-vest-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üëñ</span>
                        <span class="text-[9px]">Denim</span>
                    </button>
                    <button onclick="setVestType('Sweater', this)" class="btn-vest-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üß∂</span>
                        <span class="text-[9px]">Sweater</span>
                    </button>
                </div>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="setVestType('Leather', this)" class="btn-vest-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üèçÔ∏è</span>
                        <span class="text-[9px]">Leather</span>
                    </button>
                    <button onclick="setVestType('Work', this)" class="btn-vest-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üîß</span>
                        <span class="text-[9px]">Work</span>
                    </button>
                    <button onclick="setVestType('Suit', this)" class="btn-vest-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                        <span class="text-lg">üß•</span>
                        <span class="text-[9px]">Suit/Dress</span>
                    </button>
                </div>
            </div>
            
            <!-- VEST UNIVERSAL FIELDS -->
            <div id="vest-universal-fields" class="hidden mb-4 p-3 bg-lime-50 rounded-xl border border-lime-200">
                <label class="text-[10px] font-bold text-lime-700 uppercase tracking-widest mb-2 block">ü¶∫ Vest Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Closure</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setVestClosure('Zipper', this)" class="vest-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Zipper</button>
                        <button onclick="setVestClosure('Buttons', this)" class="vest-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Buttons</button>
                        <button onclick="setVestClosure('Snap', this)" class="vest-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Snap</button>
                        <button onclick="setVestClosure('None', this)" class="vest-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Made In</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setVestOrigin('USA', this)" class="vest-origin-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">USA‚≠ê</button>
                        <button onclick="setVestOrigin('Import', this)" class="vest-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Import</button>
                        <button onclick="setVestOrigin('Unknown', this)" class="vest-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Unknown</button>
                    </div>
                </div>
            </div>
            
            <!-- LEATHER VEST DETAILS -->
            <div id="leather-vest-details" class="hidden mb-4 p-3 bg-stone-100 rounded-xl border border-stone-300">
                <label class="text-[10px] font-bold text-stone-700 uppercase tracking-widest mb-2 block">üèçÔ∏è Leather Vest Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setLeatherVestStyle('Motorcycle', this)" class="leather-vest-style-btn py-2 border-2 border-red-500 bg-red-100 rounded-lg font-bold text-red-700 text-[9px]">Motorcycle‚≠ê‚≠ê</button>
                        <button onclick="setLeatherVestStyle('Western', this)" class="leather-vest-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Western</button>
                        <button onclick="setLeatherVestStyle('Cut/Battle', this)" class="leather-vest-style-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Cut/Battle‚≠ê</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Patches</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setLeatherVestPatches('MC Club', this)" class="leather-vest-patch-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">MC Club‚≠ê</button>
                        <button onclick="setLeatherVestPatches('Plain', this)" class="leather-vest-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Plain</button>
                    </div>
                </div>
            </div>
            
            <!-- PUFFER VEST DETAILS -->
            <div id="puffer-vest-details" class="hidden mb-4 p-3 bg-cyan-50 rounded-xl border border-cyan-200">
                <label class="text-[10px] font-bold text-cyan-700 uppercase tracking-widest mb-2 block">üèîÔ∏è Puffer/Down Vest Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Brand</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setPufferVestBrand('Patagonia', this)" class="puffer-vest-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">Patagonia‚≠ê</button>
                        <button onclick="setPufferVestBrand('North Face', this)" class="puffer-vest-brand-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[8px]">North Face‚≠ê</button>
                        <button onclick="setPufferVestBrand('Eddie Bauer', this)" class="puffer-vest-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">E. Bauer</button>
                        <button onclick="setPufferVestBrand('Other', this)" class="puffer-vest-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fill</label>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="setPufferVestFill('Down', this)" class="puffer-vest-fill-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Down‚≠ê</button>
                        <button onclick="setPufferVestFill('Synthetic', this)" class="puffer-vest-fill-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Synthetic</button>
                    </div>
                </div>
            </div>
            
            <!-- WESTERN SHIRT DETAILS -->
            <div id="western-details" class="hidden mb-4 p-3 bg-amber-50 rounded-xl border border-amber-200">
                <label class="text-[10px] font-bold text-amber-700 uppercase tracking-widest mb-2 block">ü§† Western Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Closure Type</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setWesternClosure('Pearl Snap', this)" class="western-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Pearl Snap ‚≠ê</button>
                        <button onclick="setWesternClosure('Buttons', this)" class="western-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Buttons</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Yoke Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWesternYoke('Sawtooth', this)" class="western-yoke-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sawtooth‚≠ê</button>
                        <button onclick="setWesternYoke('Pointed', this)" class="western-yoke-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Pointed</button>
                        <button onclick="setWesternYoke('Curved', this)" class="western-yoke-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Curved</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1 mt-1">
                        <button onclick="setWesternYoke('Diamond', this)" class="western-yoke-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Diamond</button>
                        <button onclick="setWesternYoke('Shotgun', this)" class="western-yoke-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Shotgun</button>
                        <button onclick="setWesternYoke('Plain', this)" class="western-yoke-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Plain</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Pocket Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWesternPocket('Sawtooth', this)" class="western-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Sawtooth‚≠ê</button>
                        <button onclick="setWesternPocket('Arrow Stitch', this)" class="western-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Arrow</button>
                        <button onclick="setWesternPocket('Bias-Cut', this)" class="western-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Bias-Cut</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1 mt-1">
                        <button onclick="setWesternPocket('Flap', this)" class="western-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Flap</button>
                        <button onclick="setWesternPocket('Standard', this)" class="western-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Standard</button>
                        <button onclick="setWesternPocket('None', this)" class="western-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Embroidery/Decoration</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setWesternEmbroidery('None', this)" class="western-emb-btn py-2 border border-blue-500 bg-blue-50 rounded-lg font-bold text-blue-600 text-[9px]">None</button>
                        <button onclick="setWesternEmbroidery('Floral', this)" class="western-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Floral</button>
                        <button onclick="setWesternEmbroidery('Rope', this)" class="western-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Rope</button>
                        <button onclick="setWesternEmbroidery('Piping', this)" class="western-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Piping</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Chain Stitch (Vintage Tell)</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setWesternChainStitch('Yes', this)" class="western-chain-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Yes ‚≠ê</button>
                        <button onclick="setWesternChainStitch('No', this)" class="western-chain-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">No</button>
                    </div>
                </div>
            </div>
            
            <!-- DRESS SHIRT DETAILS -->
            <div id="dress-details" class="hidden mb-4 p-3 bg-blue-50 rounded-xl border border-blue-200">
                <label class="text-[10px] font-bold text-blue-700 uppercase tracking-widest mb-2 block">üëî Dress Shirt Details</label>
                
                <!-- Dress Shirt Size Builder -->
                <div class="mb-3 p-2 bg-white rounded-lg border border-blue-100">
                    <label class="text-[9px] font-bold text-blue-600 uppercase mb-2 block">üìè Dress Shirt Size</label>
                    
                    <div class="mb-2">
                        <label class="text-[8px] font-bold text-gray-500 uppercase mb-1 block">Neck Size</label>
                        <div class="grid grid-cols-5 gap-1">
                            <button onclick="setDressNeck('14', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">14</button>
                            <button onclick="setDressNeck('14.5', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">14¬Ω</button>
                            <button onclick="setDressNeck('15', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">15</button>
                            <button onclick="setDressNeck('15.5', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">15¬Ω</button>
                            <button onclick="setDressNeck('16', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">16</button>
                        </div>
                        <div class="grid grid-cols-5 gap-1 mt-1">
                            <button onclick="setDressNeck('16.5', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">16¬Ω</button>
                            <button onclick="setDressNeck('17', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">17</button>
                            <button onclick="setDressNeck('17.5', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">17¬Ω</button>
                            <button onclick="setDressNeck('18', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">18</button>
                            <button onclick="setDressNeck('18.5', this)" class="dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">18¬Ω</button>
                        </div>
                    </div>
                    
                    <div class="mb-2">
                        <label class="text-[8px] font-bold text-gray-500 uppercase mb-1 block">Sleeve Length</label>
                        <div class="grid grid-cols-5 gap-1">
                            <button onclick="setDressSleeve('30/31', this)" class="dress-sleeve-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">30/31</button>
                            <button onclick="setDressSleeve('32/33', this)" class="dress-sleeve-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">32/33</button>
                            <button onclick="setDressSleeve('34/35', this)" class="dress-sleeve-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">34/35</button>
                            <button onclick="setDressSleeve('36/37', this)" class="dress-sleeve-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">36/37</button>
                            <button onclick="setDressSleeve('38/39', this)" class="dress-sleeve-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white">38/39</button>
                        </div>
                    </div>
                    
                    <div id="dress-size-preview" class="text-center text-sm font-bold text-blue-700 py-1 hidden">Size: <span id="dress-size-text"></span></div>
                    
                    <div class="text-center text-[9px] text-gray-400 mt-2">‚Äî OR use Alpha Size in Tag section ‚Äî</div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Collar Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setDressCollar('Point', this)" class="dress-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Point</button>
                        <button onclick="setDressCollar('Spread', this)" class="dress-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Spread</button>
                        <button onclick="setDressCollar('Button-Down', this)" class="dress-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Button-Down</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1 mt-1">
                        <button onclick="setDressCollar('Club', this)" class="dress-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Club/Round</button>
                        <button onclick="setDressCollar('Tab', this)" class="dress-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tab</button>
                        <button onclick="setDressCollar('Band', this)" class="dress-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Band</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Cuff Style</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDressCuff('Single', this)" class="dress-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">1-Button</button>
                        <button onclick="setDressCuff('Two-Button', this)" class="dress-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">2-Button</button>
                        <button onclick="setDressCuff('French', this)" class="dress-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">French‚≠ê</button>
                        <button onclick="setDressCuff('Convert', this)" class="dress-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Convert</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Buttons</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setDressButtons('MOP', this)" class="dress-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Mother of Pearl ‚≠ê</button>
                        <button onclick="setDressButtons('Plastic', this)" class="dress-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Plastic</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Back Pleat</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setDressPleat('Box', this)" class="dress-pleat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Box</button>
                        <button onclick="setDressPleat('Knife', this)" class="dress-pleat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Knife</button>
                        <button onclick="setDressPleat('Side', this)" class="dress-pleat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Side</button>
                        <button onclick="setDressPleat('None', this)" class="dress-pleat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
            </div>
            
            <!-- CAMP/HAWAIIAN SHIRT DETAILS -->
            <div id="camp-details" class="hidden mb-4 p-3 bg-teal-50 rounded-xl border border-teal-200">
                <label class="text-[10px] font-bold text-teal-700 uppercase tracking-widest mb-2 block">üèùÔ∏è Camp/Hawaiian Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Collar Type</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCampCollar('Camp', this)" class="camp-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Camp/Cuban</button>
                        <button onclick="setCampCollar('Loop', this)" class="camp-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Loop ‚≠ê</button>
                        <button onclick="setCampCollar('Open', this)" class="camp-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Open</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCampFabric('Rayon', this)" class="camp-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Rayon ‚≠ê</button>
                        <button onclick="setCampFabric('Barkcloth', this)" class="camp-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Barkcloth‚≠ê</button>
                        <button onclick="setCampFabric('Cotton', this)" class="camp-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cotton</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1 mt-1">
                        <button onclick="setCampFabric('Poly-Cotton', this)" class="camp-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Poly/Ctn</button>
                        <button onclick="setCampFabric('Silk', this)" class="camp-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Silk</button>
                        <button onclick="setCampFabric('Other', this)" class="camp-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Buttons</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setCampButtons('Coconut', this)" class="camp-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Coconut‚≠ê</button>
                        <button onclick="setCampButtons('Shell', this)" class="camp-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Shell‚≠ê</button>
                        <button onclick="setCampButtons('MOP', this)" class="camp-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">MOP</button>
                        <button onclick="setCampButtons('Plastic', this)" class="camp-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Plastic</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Print Type</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setCampPrint('Tiki', this)" class="camp-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tiki/Aloha</button>
                        <button onclick="setCampPrint('Tropical', this)" class="camp-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tropical</button>
                        <button onclick="setCampPrint('Atomic', this)" class="camp-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Atomic‚≠ê</button>
                        <button onclick="setCampPrint('Novelty', this)" class="camp-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Novelty</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1 mt-1">
                        <button onclick="setCampPrint('Abstract', this)" class="camp-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Abstract</button>
                        <button onclick="setCampPrint('Solid', this)" class="camp-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Solid</button>
                        <button onclick="setCampPrint('Other', this)" class="camp-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Hem Style (Camp = Straight)</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setCampHem('Straight+Vents', this)" class="camp-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Straight+Vents‚≠ê</button>
                        <button onclick="setCampHem('Straight', this)" class="camp-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Straight</button>
                        <button onclick="setCampHem('Rounded', this)" class="camp-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Rounded</button>
                    </div>
                </div>
            </div>
            
            <!-- FLANNEL SHIRT DETAILS -->
            <div id="flannel-details" class="hidden mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200">
                <label class="text-[10px] font-bold text-orange-700 uppercase tracking-widest mb-2 block">ü™µ Flannel Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric Weight (#1 Tell)</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setFlannelWeight('Heavy', this)" class="flannel-weight-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Heavy ‚≠ê</button>
                        <button onclick="setFlannelWeight('Medium', this)" class="flannel-weight-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Medium</button>
                        <button onclick="setFlannelWeight('Light', this)" class="flannel-weight-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Light</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Plaid Type</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setFlannelPlaid('Woven', this)" class="flannel-plaid-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Woven ‚≠ê (vintage)</button>
                        <button onclick="setFlannelPlaid('Printed', this)" class="flannel-plaid-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white">Printed (modern)</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Plaid Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setFlannelStyle('Tartan', this)" class="flannel-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tartan</button>
                        <button onclick="setFlannelStyle('Buffalo', this)" class="flannel-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Buffalo</button>
                        <button onclick="setFlannelStyle('Earth', this)" class="flannel-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Earth Tones</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Pattern Match at Pockets</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setFlannelMatch('Matched', this)" class="flannel-match-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Matched ‚≠ê</button>
                        <button onclick="setFlannelMatch('Mismatched', this)" class="flannel-match-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Mismatched</button>
                        <button onclick="setFlannelMatch('No Pockets', this)" class="flannel-match-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">No Pockets</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Buttons</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setFlannelButtons('Thick Matte', this)" class="flannel-btn-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Thick Matte‚≠ê</button>
                        <button onclick="setFlannelButtons('Cat-Eye', this)" class="flannel-btn-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Cat-Eye ‚≠ê</button>
                        <button onclick="setFlannelButtons('Thin Glossy', this)" class="flannel-btn-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Thin Glossy</button>
                    </div>
                </div>
            </div>
            
            <!-- WORK SHIRT DETAILS -->
            <div id="work-details" class="hidden mb-4 p-3 bg-gray-100 rounded-xl border border-gray-300">
                <label class="text-[10px] font-bold text-gray-700 uppercase tracking-widest mb-2 block">üîß Work Shirt Details</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Fabric</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setWorkFabric('Twill', this)" class="work-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Twill</button>
                        <button onclick="setWorkFabric('Chambray', this)" class="work-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Chambray</button>
                        <button onclick="setWorkFabric('Herringbone', this)" class="work-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Herringbone</button>
                    </div>
                    <div class="grid grid-cols-3 gap-1 mt-1">
                        <button onclick="setWorkFabric('Canvas', this)" class="work-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Canvas</button>
                        <button onclick="setWorkFabric('Denim', this)" class="work-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Work Denim</button>
                        <button onclick="setWorkFabric('Other', this)" class="work-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Other</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Pockets</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setWorkPockets('Double', this)" class="work-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Double Chest</button>
                        <button onclick="setWorkPockets('Double+Pen', this)" class="work-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Double + Pen‚≠ê</button>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-1">
                        <button onclick="setWorkPockets('Double+Flap', this)" class="work-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Double + Flap</button>
                        <button onclick="setWorkPockets('Single', this)" class="work-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Single</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Construction</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setWorkConstruction('Double-Needle', this)" class="work-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Double-Needle‚≠ê</button>
                        <button onclick="setWorkConstruction('Triple-Stitch', this)" class="work-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Triple-Stitch‚≠ê</button>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-1">
                        <button onclick="setWorkConstruction('Felled Seams', this)" class="work-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Felled Seams</button>
                        <button onclick="setWorkConstruction('Standard', this)" class="work-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Standard</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Special Features</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="toggleWorkFeature('Name Patch', this)" class="work-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Name Patch‚≠ê</button>
                        <button onclick="toggleWorkFeature('Company Patch', this)" class="work-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Co. Patch‚≠ê</button>
                        <button onclick="toggleWorkFeature('Union Tag', this)" class="work-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Union Tag‚≠ê</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Color</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setWorkColor('Navy', this)" class="work-color-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Navy</button>
                        <button onclick="setWorkColor('Gray', this)" class="work-color-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Gray</button>
                        <button onclick="setWorkColor('Tan', this)" class="work-color-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Tan</button>
                        <button onclick="setWorkColor('Khaki', this)" class="work-color-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Khaki</button>
                    </div>
                </div>
            </div>
            
            <!-- CASUAL BUTTON SHIRT (Generic) -->
            <div id="casual-btn-details" class="hidden mb-4 p-3 bg-green-50 rounded-xl border border-green-200">
                <label class="text-[10px] font-bold text-green-700 uppercase tracking-widest mb-2 block">üå¥ Casual Button Shirt</label>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Collar Style</label>
                    <div class="grid grid-cols-3 gap-1">
                        <button onclick="setCasualCollar('Point', this)" class="casual-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Point</button>
                        <button onclick="setCasualCollar('Button-Down', this)" class="casual-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Button-Down</button>
                        <button onclick="setCasualCollar('Band', this)" class="casual-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Band</button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Hem Style</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setCasualHem('Straight', this)" class="casual-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Straight</button>
                        <button onclick="setCasualHem('Rounded', this)" class="casual-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Rounded</button>
                        <button onclick="setCasualHem('Shirt-Tail', this)" class="casual-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Shirt-Tail</button>
                    </div>
                </div>
                
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Pockets</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setCasualPocket('Single', this)" class="casual-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Single</button>
                        <button onclick="setCasualPocket('Double', this)" class="casual-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Double</button>
                        <button onclick="setCasualPocket('Flap', this)" class="casual-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Flap</button>
                        <button onclick="setCasualPocket('None', this)" class="casual-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">None</button>
                    </div>
                </div>
            </div>
            
            <!-- Print/Graphic Type - Always visible, smart defaults -->
            <div class="mb-4">
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Print / Graphic Type</label>
                <div class="grid grid-cols-5 gap-1">
                    <button onclick="setPrintType('N/A', this)" id="btn-print-NA" class="print-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[9px] shadow-inner">N/A</button>
                    <button onclick="setPrintType('Screen', this)" id="btn-print-Screen" class="print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Screen</button>
                    <button onclick="setPrintType('Heat', this)" id="btn-print-Heat" class="print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Heat</button>
                    <button onclick="setPrintType('Puff', this)" id="btn-print-Puff" class="print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Puff</button>
                    <button onclick="setPrintType('Embroidered', this)" id="btn-print-Embroidered" class="print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Emb</button>
                </div>
                <div class="grid grid-cols-5 gap-1 mt-1">
                    <button onclick="setPrintType('DTG', this)" id="btn-print-DTG" class="print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">DTG</button>
                    <button onclick="setPrintType('Sublimation', this)" id="btn-print-Sublimation" class="print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">AOP</button>
                    <button onclick="setPrintType('Patch', this)" id="btn-print-Patch" class="print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Patch</button>
                    <button onclick="setPrintType('Painted', this)" id="btn-print-Painted" class="print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Paint</button>
                    <button onclick="setPrintType('Other', this)" id="btn-print-Other" class="print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Other</button>
                </div>
            </div>
            
            <!-- Graphic Category - Shows when pattern has graphics -->
            <div id="graphic-category-section" class="mb-4 hidden">
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Graphic Category</label>
                <div class="grid grid-cols-4 gap-1">
                    <button onclick="setGraphicCategory('Band/Music', this)" class="graphic-cat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Band</button>
                    <button onclick="setGraphicCategory('Movie/TV', this)" class="graphic-cat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Movie/TV</button>
                    <button onclick="setGraphicCategory('Sports', this)" class="graphic-cat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Sports</button>
                    <button onclick="setGraphicCategory('Brand/Logo', this)" class="graphic-cat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Brand</button>
                </div>
                <div class="grid grid-cols-4 gap-1 mt-1">
                    <button onclick="setGraphicCategory('Art/Promo', this)" class="graphic-cat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Art/Promo</button>
                    <button onclick="setGraphicCategory('Tourist', this)" class="graphic-cat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Tourist</button>
                    <button onclick="setGraphicCategory('Humor', this)" class="graphic-cat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Humor</button>
                    <button onclick="setGraphicCategory('Other', this)" class="graphic-cat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Other</button>
                </div>
            </div>
            
            <!-- Print Condition - Shows when has print -->
            <div id="print-condition-section" class="mb-4 hidden">
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Print Condition</label>
                <div class="grid grid-cols-4 gap-1">
                    <button onclick="setPrintCondition('Crisp', this)" class="print-cond-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Crisp</button>
                    <button onclick="setPrintCondition('Light Crack', this)" class="print-cond-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Lt Crack</button>
                    <button onclick="setPrintCondition('Heavy Crack', this)" class="print-cond-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Hvy Crack</button>
                    <button onclick="setPrintCondition('Faded', this)" class="print-cond-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Faded</button>
                </div>
            </div>
            
            <!-- Collar Style - For tops -->
            <div id="collar-style-section" class="mb-4">
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Collar Style</label>
                <div class="grid grid-cols-5 gap-1">
                    <button onclick="setCollarStyle('Crew', this)" id="btn-collar-Crew" class="collar-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[9px] shadow-inner">Crew</button>
                    <button onclick="setCollarStyle('V-Neck', this)" id="btn-collar-VNeck" class="collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">V-Neck</button>
                    <button onclick="setCollarStyle('Ringer', this)" id="btn-collar-Ringer" class="collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Ringer</button>
                    <button onclick="setCollarStyle('Scoop', this)" id="btn-collar-Scoop" class="collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Scoop</button>
                    <button onclick="setCollarStyle('Henley', this)" id="btn-collar-Henley" class="collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Henley</button>
                </div>
            </div>
            
            <!-- Single Stitch Toggle - CRITICAL for vintage value -->
            <div id="stitch-type-section" class="mb-4">
                <label class="text-[10px] font-bold text-amber-600 uppercase tracking-widest mb-1 block">‚≠ê Stitch Type (Hem & Sleeves)</label>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="setStitchType('Single', this)" id="btn-stitch-Single" class="stitch-btn py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-500 text-sm bg-white transition-all">
                        <span class="block">Single Stitch</span>
                        <span class="text-[9px] text-amber-600">Pre-1995 ‚Ä¢ Higher Value</span>
                    </button>
                    <button onclick="setStitchType('Double', this)" id="btn-stitch-Double" class="stitch-btn py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-500 text-sm bg-white transition-all">
                        <span class="block">Double Stitch</span>
                        <span class="text-[9px] text-gray-400">Modern Standard</span>
                    </button>
                </div>
            </div>
            
            <div id="features-container" class="feature-grid">
                </div>
            <div id="thumbs-feature" class="flex gap-2 mt-4 overflow-x-auto pb-2 h-20 empty:hidden snap-x"></div>
        </div>

        <div id="section-tag" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200 transition-all">
            <label class="text-xs font-bold text-gray-400 uppercase tracking-wide flex items-center gap-2">
                <span id="check-tag" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                5. Tag Info & Origin
            </label>
            <div class="grid grid-cols-3 gap-2 mt-3 mb-3">
                <button onclick="setTagState('has')" id="btn-tag-has" class="py-4 border border-gray-200 rounded-xl font-bold text-gray-500 text-xs transition-all">Has Tag</button>
                <button onclick="setTagState('unreadable')" id="btn-tag-unreadable" class="py-4 border border-gray-200 rounded-xl font-bold text-gray-500 text-xs transition-all">Unreadable</button>
                <button onclick="setTagState('none')" id="btn-tag-none" class="py-4 border border-gray-200 rounded-xl font-bold text-gray-500 text-xs transition-all">No Tag</button>
            </div>
            
            <!-- TAG PHOTOS FIRST - Prominent placement -->
            <div id="section-tag-photos" class="hidden mb-4">
                <div class="bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-xl border-2 border-amber-300 shadow-inner">
                    <div class="flex items-center justify-center gap-2 mb-3">
                        <span class="text-lg">üì∏</span>
                        <label class="text-sm font-bold text-amber-800 uppercase tracking-wide">Snap Tag Photos First</label>
                    </div>
                    <p class="text-[10px] text-amber-700 text-center mb-3">Capture tags now ‚Äî use photos as reference to fill in details below ‚Üì</p>
                    <div class="grid grid-cols-2 gap-3">
                        <button id="btn-snap-neck" onclick="openCamera('tag', 'neck')" class="w-full py-5 rounded-xl border-2 border-amber-400 bg-white text-amber-700 font-bold flex flex-col items-center justify-center gap-2 active:bg-amber-50 shadow-md hover:shadow-lg transition-all">
                            <i data-lucide="camera" class="w-6 h-6"></i>
                            <span class="text-xs">NECK TAG</span>
                        </button>
                        <button id="btn-snap-care" onclick="openCamera('tag', 'care')" class="w-full py-5 rounded-xl border-2 border-orange-400 bg-white text-orange-700 font-bold flex flex-col items-center justify-center gap-2 active:bg-orange-50 shadow-md hover:shadow-lg transition-all">
                            <i data-lucide="camera" class="w-6 h-6"></i>
                            <span class="text-xs">CARE TAG</span>
                        </button>
                    </div>
                    <div id="thumbs-tag" class="flex gap-2 overflow-x-auto h-20 empty:hidden snap-x mt-3"></div>
                </div>
            </div>
            
            <!-- TAG SIZE - Shows after photos section -->
            <div id="section-tag-size" class="hidden mb-4 bg-amber-50 p-3 rounded-xl border border-amber-200">
                <label class="text-[10px] font-bold text-amber-700 uppercase tracking-widest mb-2 block">Tag Reads</label>
                <div class="grid grid-cols-6 gap-1 mb-2">
                    <button onclick="setTagSize('XS', this)" class="size-btn py-3 border border-gray-200 rounded-md font-bold text-gray-600 bg-white text-xs">XS</button>
                    <button onclick="setTagSize('S', this)" class="size-btn py-3 border border-gray-200 rounded-md font-bold text-gray-600 bg-white text-xs">S</button>
                    <button onclick="setTagSize('M', this)" class="size-btn py-3 border border-gray-200 rounded-md font-bold text-gray-600 bg-white text-xs">M</button>
                    <button onclick="setTagSize('L', this)" class="size-btn py-3 border border-gray-200 rounded-md font-bold text-gray-600 bg-white text-xs">L</button>
                    <button onclick="setTagSize('XL', this)" class="size-btn py-3 border border-gray-200 rounded-md font-bold text-gray-600 bg-white text-xs">XL</button>
                    <button onclick="setTagSize('XXL', this)" class="size-btn py-3 border border-gray-200 rounded-md font-bold text-gray-600 bg-white text-xs">XXL</button>
                </div>
                <input type="text" id="tag-size-input" placeholder="Or Type (e.g. 42R, 32x30)" onfocus="clearTagSizeBtns()" onchange="persistData()" onkeydown="if(event.key==='Enter'){this.blur();}" class="w-full p-2 border border-gray-200 rounded-lg text-sm text-center outline-none focus:border-amber-500 bg-white">
            </div>
            
            <div class="mb-4">
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <button onclick="setOrigin('usa', this)" id="btn-origin-usa" class="origin-btn py-3 border border-gray-200 rounded-xl font-bold text-gray-500 text-xs transition-all flex items-center justify-center gap-2"><span class="text-base">üá∫üá∏</span> USA Made</button>
                    <button onclick="setOrigin('import', this)" id="btn-origin-import" class="origin-btn py-3 border border-gray-200 rounded-xl font-bold text-gray-500 text-xs transition-all flex items-center justify-center gap-2"><span class="text-base">üåç</span> Import</button>
                </div>
                <select id="country-select" onchange="data.madeInCountry=this.value; persistData();" class="hidden w-full p-2 border border-gray-200 rounded-xl text-gray-800 font-normal outline-none focus:border-blue-500 text-[11px]">
                    <option value="" disabled selected>Select Country...</option>
                    <option>China</option><option>Vietnam</option><option>Bangladesh</option><option>India</option><option>Indonesia</option><option>Mexico</option><option>Honduras</option><option>Cambodia</option><option>Pakistan</option><option>Turkey</option><option>Sri Lanka</option><option>Philippines</option><option>Taiwan</option><option>South Korea</option><option>Japan</option><option>Italy</option><option>Portugal</option><option>United Kingdom</option><option>Canada</option><option>Other / Unknown</option>
                </select>
            </div>
            
            <div class="mb-4">
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Copyright / Date Year (Optional)</label>
                <input type="tel" id="copyright-year" placeholder="YYYY (e.g. 1994)" onchange="data.copyrightYear=this.value; persistData();" onkeydown="if(event.key==='Enter'){this.blur();}" class="w-full p-2 border border-gray-200 rounded-xl text-sm text-center outline-none focus:border-blue-500 mb-2" maxlength="4">
                
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Era / Decade Estimate</label>
                <div class="grid grid-cols-5 gap-1">
                    <button onclick="setEra('1970s', this)" class="era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white">70s</button>
                    <button onclick="setEra('1980s', this)" class="era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white">80s</button>
                    <button onclick="setEra('1990s', this)" class="era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white">90s</button>
                    <button onclick="setEra('2000s', this)" class="era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white">Y2K</button>
                    <button onclick="toggleEraDropdown()" id="btn-era-other" class="era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white">Other</button>
                </div>
                <select id="era-dropdown" onchange="setEraFromDropdown(this.value)" class="hidden w-full mt-2 p-2 border border-gray-200 rounded-xl text-gray-800 font-normal outline-none focus:border-blue-500 text-[11px]">
                    <option value="" disabled selected>Select Era...</option>
                    <option>2020-2029</option><option>2010-2019</option><option>2000-2009</option><option>1960-1969</option><option>1950-1959</option><option>1940-1949</option><option>1930-1939</option><option>1920-1929</option><option>1910-1919</option><option>1900-1909</option><option>Pre-1900s</option>
                </select>
            </div>
            
            <div class="space-y-4 bg-gray-50 p-4 rounded-xl border border-gray-200 mb-4">
                <div>
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Fabric Type</label>
                    <select id="fabric-select" onchange="handleFabricChange()" class="w-full p-2 border border-gray-300 rounded-xl text-gray-800 font-normal outline-none focus:border-blue-500 text-[11px] tracking-tight">
                        <option value="" disabled selected>Select Material...</option>
                        <optgroup label="Common"><option>100% Cotton</option><option>Pima Cotton</option><option>50/50 (Cotton/Poly)</option><option>Tri-Blend</option><option>100% Polyester</option></optgroup>
                        <optgroup label="Other"><option>Canvas</option><option>Twill</option><option>Denim</option><option>Dacron / Poly</option><option>Acrylic</option><option>Acrylic/Poly Blend</option><option>Nylon</option><option>Rayon</option><option>Wool</option><option>Silk</option><option>Linen</option><option>Velour</option><option>Terry Cloth</option><option>Leather</option><option>Cannot Determine</option></optgroup>
                        <optgroup label="Custom"><option value="Custom Blend">Custom Blend (build below)</option></optgroup>
                    </select>
                    
                    <!-- Blend Builder -->
                    <div id="custom-blend-input" class="hidden mt-3 p-3 bg-blue-50 rounded-xl border border-blue-200">
                        <label class="text-[10px] font-bold text-blue-600 uppercase tracking-widest mb-2 block">Build Your Blend</label>
                        
                        <!-- Material 1 -->
                        <div class="flex gap-2 mb-2 items-center">
                            <select id="blend-mat-1" onchange="updateBlendPreview()" class="flex-1 p-2 border border-gray-300 rounded-lg text-[11px] outline-none focus:border-blue-500 bg-white">
                                <option value="">Material 1...</option>
                                <option>Cotton</option><option>Polyester</option><option>Rayon</option><option>Spandex</option><option>Nylon</option><option>Acrylic</option><option>Wool</option><option>Linen</option><option>Modal</option><option>Viscose</option><option>Elastane</option><option>Other</option>
                            </select>
                            <select id="blend-pct-1" onchange="updateBlendPreview()" class="w-20 p-2 border border-gray-300 rounded-lg text-[11px] outline-none focus:border-blue-500 bg-white font-bold text-center">
                                <option value="">%</option>
                                <option>5</option><option>10</option><option>15</option><option>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>50</option><option>55</option><option>60</option><option>65</option><option>70</option><option>75</option><option>80</option><option>85</option><option>90</option><option>95</option><option>100</option>
                            </select>
                        </div>
                        
                        <!-- Material 2 -->
                        <div class="flex gap-2 mb-2 items-center">
                            <select id="blend-mat-2" onchange="updateBlendPreview()" class="flex-1 p-2 border border-gray-300 rounded-lg text-[11px] outline-none focus:border-blue-500 bg-white">
                                <option value="">Material 2...</option>
                                <option>Cotton</option><option>Polyester</option><option>Rayon</option><option>Spandex</option><option>Nylon</option><option>Acrylic</option><option>Wool</option><option>Linen</option><option>Modal</option><option>Viscose</option><option>Elastane</option><option>Other</option>
                            </select>
                            <select id="blend-pct-2" onchange="updateBlendPreview()" class="w-20 p-2 border border-gray-300 rounded-lg text-[11px] outline-none focus:border-blue-500 bg-white font-bold text-center">
                                <option value="">%</option>
                                <option>5</option><option>10</option><option>15</option><option>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>50</option><option>55</option><option>60</option><option>65</option><option>70</option><option>75</option><option>80</option><option>85</option><option>90</option><option>95</option><option>100</option>
                            </select>
                        </div>
                        
                        <!-- Material 3 (optional, for tri-blends) -->
                        <div id="blend-row-3" class="hidden flex gap-2 mb-2 items-center">
                            <select id="blend-mat-3" onchange="updateBlendPreview()" class="flex-1 p-2 border border-gray-300 rounded-lg text-[11px] outline-none focus:border-blue-500 bg-white">
                                <option value="">Material 3...</option>
                                <option>Cotton</option><option>Polyester</option><option>Rayon</option><option>Spandex</option><option>Nylon</option><option>Acrylic</option><option>Wool</option><option>Linen</option><option>Modal</option><option>Viscose</option><option>Elastane</option><option>Other</option>
                            </select>
                            <select id="blend-pct-3" onchange="updateBlendPreview()" class="w-20 p-2 border border-gray-300 rounded-lg text-[11px] outline-none focus:border-blue-500 bg-white font-bold text-center">
                                <option value="">%</option>
                                <option>5</option><option>10</option><option>15</option><option>20</option><option>25</option><option>30</option><option>35</option><option>40</option><option>45</option><option>50</option><option>55</option><option>60</option><option>65</option><option>70</option><option>75</option><option>80</option><option>85</option><option>90</option><option>95</option><option>100</option>
                            </select>
                        </div>
                        
                        <!-- Add 3rd material button -->
                        <button id="btn-add-mat-3" onclick="showThirdMaterial()" class="text-[10px] text-blue-600 font-medium mb-2">+ Add 3rd material (tri-blend)</button>
                        
                        <!-- Preview -->
                        <div id="blend-preview" class="mt-2 p-2 bg-white rounded-lg border border-blue-300 text-center">
                            <span class="text-[10px] text-gray-400">Select materials above</span>
                        </div>
                        
                        <!-- Hidden field to store the blend string -->
                        <input type="hidden" id="fabric-custom" value="">
                    </div>
                </div>
                
                <div class="mt-3">
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Primary Color</label>
                    <select id="color-primary" onchange="data.colorPrimary=this.value; persistData();" class="w-full p-2 border border-gray-300 rounded-xl text-gray-800 font-normal outline-none focus:border-blue-500 text-[11px]">
                        <option value="" disabled selected>Select Color...</option>
                        <option>Beige</option><option>Black</option><option>Blue</option><option>Brown</option><option>Clear</option><option>Gold</option><option>Gray</option><option>Green</option><option>Ivory</option><option>Multicolor</option><option>Orange</option><option>Pink</option><option>Purple</option><option>Red</option><option>Silver</option><option>White</option><option>Yellow</option>
                    </select>
                </div>
                
                <div class="mt-2">
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Secondary Color <span class="text-gray-300 font-normal">(optional)</span></label>
                    <select id="color-secondary" onchange="data.colorSecondary=this.value; persistData();" class="w-full p-2 border border-gray-200 rounded-xl text-gray-800 font-normal outline-none focus:border-blue-500 text-[11px]">
                        <option value="" selected>None / N/A</option>
                        <option>Beige</option><option>Black</option><option>Blue</option><option>Brown</option><option>Clear</option><option>Gold</option><option>Gray</option><option>Green</option><option>Ivory</option><option>Multicolor</option><option>Orange</option><option>Pink</option><option>Purple</option><option>Red</option><option>Silver</option><option>White</option><option>Yellow</option>
                    </select>
                </div>
                
                <!-- Fade Level - Important for vintage value -->
                <div id="fade-level-section" class="mt-3">
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Fade Level <span class="text-amber-500">(Vintage Patina)</span></label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setFadeLevel('None', this)" id="btn-fade-None" class="fade-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[9px] shadow-inner">None</button>
                        <button onclick="setFadeLevel('Light', this)" id="btn-fade-Light" class="fade-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Light</button>
                        <button onclick="setFadeLevel('Sun Fade', this)" id="btn-fade-Sun" class="fade-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Sun Fade</button>
                        <button onclick="setFadeLevel('Heavy', this)" id="btn-fade-Heavy" class="fade-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Heavy</button>
                    </div>
                </div>
                
                <!-- WASH - For Bottoms only -->
                <div id="wash-section" class="mt-3 hidden">
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Denim Wash</label>
                    <div class="grid grid-cols-4 gap-1">
                        <button onclick="setWash('Light', this)" class="wash-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Light</button>
                        <button onclick="setWash('Medium', this)" class="wash-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Medium</button>
                        <button onclick="setWash('Dark', this)" class="wash-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Dark</button>
                        <button onclick="setWash('Raw', this)" class="wash-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Raw</button>
                    </div>
                    <div class="grid grid-cols-4 gap-1 mt-1">
                        <button onclick="setWash('Acid Wash', this)" class="wash-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Acid</button>
                        <button onclick="setWash('Stone', this)" class="wash-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Stone</button>
                        <button onclick="setWash('Rinse', this)" class="wash-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Rinse</button>
                        <button onclick="setWash('Charcoal Wash', this)" class="wash-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white">Charcoal</button>
                    </div>
                </div>

                <!-- Visual Tag Audit Grid -->
                <div class="mt-4" id="visual-tag-audit">
                    <label class="text-[10px] font-bold text-blue-500 uppercase tracking-widest mb-2 block">Visual Tag Audit</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="setTagAudit('true_to_size', this)" class="tag-audit-btn py-3 px-2 rounded-lg font-bold text-xs border-2 border-green-200 bg-green-50 text-green-700 transition-all active:scale-95">
                            ‚úì True to Size
                        </button>
                        <button onclick="setTagAudit('runs_small', this)" class="tag-audit-btn py-3 px-2 rounded-lg font-bold text-xs border-2 border-yellow-200 bg-yellow-50 text-yellow-700 transition-all active:scale-95">
                            ‚Üì Runs Small
                        </button>
                        <button onclick="setTagAudit('runs_big', this)" class="tag-audit-btn py-3 px-2 rounded-lg font-bold text-xs border-2 border-yellow-200 bg-yellow-50 text-yellow-700 transition-all active:scale-95">
                            ‚Üë Runs Big
                        </button>
                        <button onclick="setTagAudit('shape_distortion', this)" class="tag-audit-btn py-3 px-2 rounded-lg font-bold text-xs border-2 border-red-200 bg-red-50 text-red-700 transition-all active:scale-95">
                            ‚ö† Shape Distortion
                        </button>
                        <button onclick="setTagAudit('not_sure', this)" class="tag-audit-btn py-3 px-2 rounded-lg font-bold text-xs border-2 border-gray-200 bg-gray-50 text-gray-600 transition-all active:scale-95 col-span-2">
                            ? Not Sure
                        </button>
                    </div>
                    <p class="text-[9px] text-gray-400 mt-2 text-center">Compare tag size to actual measurements</p>
                </div>
            </div>
            
            <!-- Brand & Manufacturer Info - replaces audio -->
            <div id="brand-info-section" class="hidden mt-4 space-y-3 p-3 bg-gray-50 rounded-xl border border-gray-200">
                <div>
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Blank / Manufacturer</label>
                    <select id="brand-select" onchange="handleBrandChange()" class="w-full p-2 border border-gray-300 rounded-xl text-gray-800 font-normal outline-none focus:border-blue-500 text-[11px]">
                        <option value="" selected>Select or type below...</option>
                        <optgroup label="Vintage (Pre-1995)">
                            <option>Screen Stars</option>
                            <option>Hanes Beefy-T</option>
                            <option>Fruit of the Loom</option>
                            <option>Oneita</option>
                            <option>Tennessee River</option>
                            <option>Sportswear</option>
                            <option>Tultex</option>
                            <option>Signal</option>
                            <option>Best</option>
                            <option>Stedman</option>
                        </optgroup>
                        <optgroup label="90s-2000s">
                            <option>Hanes</option>
                            <option>Anvil</option>
                            <option>Jerzees</option>
                            <option>Russell</option>
                            <option>Delta</option>
                            <option>Alstyle</option>
                            <option>AAA</option>
                        </optgroup>
                        <optgroup label="Modern">
                            <option>Gildan</option>
                            <option>Next Level</option>
                            <option>Bella+Canvas</option>
                            <option>American Apparel</option>
                            <option>Comfort Colors</option>
                            <option>Champion</option>
                            <option>Port & Company</option>
                        </optgroup>
                        <optgroup label="Premium/Streetwear">
                            <option>Supreme</option>
                            <option>Stussy</option>
                            <option>BAPE</option>
                            <option>Palace</option>
                            <option>Fear of God</option>
                        </optgroup>
                        <option value="Custom">Other (type below)</option>
                    </select>
                    <input type="text" id="brand-custom" placeholder="Type brand if not listed..." onchange="data.brandCustom=this.value; persistData();" onkeydown="if(event.key==='Enter'){this.blur();}" class="hidden w-full mt-2 p-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500">
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">RN # (Optional)</label>
                        <input type="text" id="rn-number" placeholder="e.g. 14806" maxlength="10" onchange="data.rnNumber=this.value; persistData();" onkeydown="if(event.key==='Enter'){this.blur();}" class="w-full p-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500 font-mono">
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Style (Optional)</label>
                        <input type="text" id="style-name" placeholder="e.g. Heavy Cotton" onchange="data.styleName=this.value; persistData();" onkeydown="if(event.key==='Enter'){this.blur();}" class="w-full p-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-500">
                    </div>
                </div>
            </div>
        </div>

        <div id="section-specs" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200 space-y-5">
            
            <div id="sleeve-selector">
                <label class="text-xs font-bold text-gray-400 uppercase tracking-wide">6. Sleeve Length</label>
                <div class="grid grid-cols-2 gap-2 mt-2">
                    <div class="space-y-2">
                        <button onclick="setSleeve('None', this)" id="btn-sleeve-none" class="sleeve-btn w-full py-3 rounded-md font-bold text-xs btn-default">Sleeveless</button>
                        <button onclick="setSleeve('3/4', this)" id="btn-sleeve-34" class="sleeve-btn w-full py-3 rounded-md font-bold text-xs btn-default">3/4 Sleeve</button>
                    </div>
                    <div class="space-y-2">
                        <button onclick="setSleeve('Short', this)" id="btn-sleeve-short" class="sleeve-btn w-full py-3 rounded-md font-bold text-xs btn-selected">Short Sleeve</button>
                        <button onclick="setSleeve('Long', this)" id="btn-sleeve-long" class="sleeve-btn w-full py-3 rounded-md font-bold text-xs btn-default">Long Sleeve</button>
                    </div>
                </div>
            </div>
            
            <!-- Sleeve Style - Only shows when has sleeves -->
            <div id="sleeve-style-selector" class="hidden">
                <label class="text-xs font-bold text-gray-400 uppercase tracking-wide">Sleeve Style</label>
                <div class="grid grid-cols-4 gap-1 mt-2">
                    <button onclick="setSleeveStyle('Standard', this)" id="btn-style-standard" class="style-btn py-2 rounded-lg font-bold text-[10px] btn-selected">Standard</button>
                    <button onclick="setSleeveStyle('Raglan', this)" id="btn-style-raglan" class="style-btn py-2 rounded-lg font-bold text-[10px] btn-default">Raglan</button>
                    <button onclick="setSleeveStyle('Dolman', this)" id="btn-style-dolman" class="style-btn py-2 rounded-lg font-bold text-[10px] btn-default">Dolman</button>
                    <button onclick="setSleeveStyle('Other', this)" id="btn-style-other" class="style-btn py-2 rounded-lg font-bold text-[10px] btn-default">Other</button>
                </div>
                
                <!-- Raglan/Dolman measurement notice -->
                <div id="raglan-notice" class="hidden mt-3 p-3 bg-amber-50 border border-amber-300 rounded-xl">
                    <div class="flex items-start gap-2">
                        <span class="text-lg">üìè</span>
                        <div>
                            <p class="text-xs font-bold text-amber-800">Raglan Measurement Guide</p>
                            <p class="text-[10px] text-amber-700 mt-1">In measurements, capture:</p>
                            <ul class="text-[10px] text-amber-700 mt-1 ml-3 list-disc">
                                <li><strong>Neck to Cuff</strong> (center of collar to end of sleeve)</li>
                                <li><strong>Underarm to Cuff</strong> (armpit seam to end of sleeve)</li>
                            </ul>
                            <p class="text-[9px] text-amber-600 mt-2 italic">We'll calculate shoulder-to-cuff for platforms that need it.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- T-Shirt Cut-off Section - Shows when T-Shirt + Sleeveless selected -->
            <div id="cutoff-section" class="hidden">
                <label class="text-xs font-bold text-orange-600 uppercase tracking-wide">üî™ Cut-off / Muscle Tee?</label>
                <div class="mt-2 p-3 bg-orange-50 rounded-xl border border-orange-200">
                    <div class="grid grid-cols-2 gap-2 mb-3">
                        <button onclick="setCutOff(true, this)" class="cutoff-btn py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                            <span class="text-lg">‚úÇÔ∏è</span>
                            <span>DIY Cut-off</span>
                            <span class="text-[8px] text-gray-400 font-normal">Sleeves removed</span>
                        </button>
                        <button onclick="setCutOff(false, this)" class="cutoff-btn py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center">
                            <span class="text-lg">üëï</span>
                            <span>Manufactured</span>
                            <span class="text-[8px] text-gray-400 font-normal">Made sleeveless</span>
                        </button>
                    </div>
                    
                    <!-- Armhole finish - shows when DIY Cut-off selected -->
                    <div id="cutoff-armhole-section" class="hidden">
                        <label class="text-[9px] font-bold text-gray-500 uppercase mb-1 block">Armhole Condition</label>
                        <div class="grid grid-cols-3 gap-1">
                            <button onclick="setCutOffArmhole('Raw/Frayed', this)" class="cutoff-arm-btn py-2 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[9px]">Raw/Frayed‚≠ê</button>
                            <button onclick="setCutOffArmhole('Rolled', this)" class="cutoff-arm-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Rolled</button>
                            <button onclick="setCutOffArmhole('Hemmed', this)" class="cutoff-arm-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white">Hemmed</button>
                        </div>
                        <p class="text-[9px] text-orange-600 mt-2 italic">üí° This is still a T-Shirt in listings - the cut-off is noted as a style detail.</p>
                    </div>
                </div>
            </div>

            <div id="fit-selector-tops">
                <label class="text-xs font-bold text-gray-400 uppercase tracking-wide">7. Fit / Cut / Style <span class="text-gray-300 font-normal">(select all that apply)</span></label>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <button onclick="toggleFit('Crop', this)" class="fit-btn py-2 rounded-lg font-medium text-[11px] btn-default">Crop</button>
                    <button onclick="toggleFit('Boxy', this)" class="fit-btn py-2 rounded-lg font-medium text-[11px] btn-default">Boxy</button>
                    <button onclick="toggleFit('Regular', this)" class="fit-btn py-2 rounded-lg font-medium text-[11px] btn-selected">Regular</button>
                    <button onclick="toggleFit('Slim', this)" class="fit-btn py-2 rounded-lg font-medium text-[11px] btn-default">Slim Fit</button>
                    <button onclick="toggleFit('Tapered', this)" class="fit-btn py-2 rounded-lg font-medium text-[11px] btn-default">Tapered</button>
                    <button onclick="toggleFit('Oversized', this)" class="fit-btn py-2 rounded-lg font-medium text-[11px] btn-default">Oversized</button>
                </div>
            </div>

            <div id="fit-selector-bottoms" class="hidden">
                <label class="text-xs font-bold text-gray-400 uppercase tracking-wide">7. Style / Fit</label>
                <div id="bottoms-style-grid" class="style-chip-grid mt-2">
                    </div>
            </div>

            <div id="section-gender">
                <label class="text-xs font-bold text-gray-400 uppercase tracking-wide flex items-center gap-2">
                    <span id="check-gender" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                    8. Gender / Department
                </label>
                <div class="grid grid-cols-3 gap-2 mt-2">
                    <div class="space-y-2">
                        <button onclick="setGender('Adult Unisex', this)" class="g-btn w-full py-3 rounded-xl font-bold text-xs btn-default">Adult Unisex</button>
                        <button onclick="setGender('Kids Unisex', this)" class="g-btn w-full py-3 rounded-xl font-bold text-xs btn-default">Kids Unisex</button>
                    </div>
                    <div class="space-y-2">
                        <button onclick="setGender('Boys', this)" class="g-btn w-full py-3 rounded-xl font-bold text-xs btn-default">Boys</button>
                        <button onclick="setGender('Girls', this)" class="g-btn w-full py-3 rounded-xl font-bold text-xs btn-default">Girls</button>
                    </div>
                    <div class="space-y-2">
                        <button onclick="setGender('Men', this)" class="g-btn w-full py-3 rounded-xl font-bold text-xs btn-default">Men</button>
                        <button onclick="setGender('Women', this)" class="g-btn w-full py-3 rounded-xl font-bold text-xs btn-default">Women</button>
                    </div>
                </div>
            </div>

            <div id="section-condition">
                <label class="text-xs font-bold text-gray-400 uppercase tracking-wide flex items-center gap-2">
                    <span id="check-condition" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                    9. Condition
                </label>
                <select id="cond-select" onchange="handleConditionChange()" class="w-full mt-2 p-2 border border-gray-200 rounded-xl text-xs font-medium outline-none focus:border-blue-500">
                    <option>Pre-owned excellent</option><option>Pre-owned good</option><option>Pre-owned fair</option><option>Poor ‚Äì major flaws</option><option>New with tag</option><option>New without tag</option>
                </select>
            </div>
        </div>

        <div id="section-defects" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200 transition-all">
            <label class="text-xs font-bold text-red-500 uppercase tracking-wide mb-3 flex items-center gap-2">
                <span id="check-defects" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                10. Defects & Issues
            </label>
            <div class="flex gap-3 mb-4">
                <button onclick="setDefectState(false)" id="btn-no-defects" class="flex-1 py-4 border border-green-200 bg-green-50 text-green-700 rounded-xl font-bold transition-all shadow-inner">No Defects</button>
                <button onclick="setDefectState(true)" id="btn-has-defects" class="flex-1 py-4 border border-gray-200 bg-white text-gray-400 rounded-xl font-bold transition-all">Has Defects</button>
            </div>
            <div id="defect-content" class="hidden">
                <div class="text-center mb-3 text-xs text-gray-500 font-medium">Tap EXACT location on Map</div>
                <div class="space-y-3 mb-4">
                    <div class="relative w-full bg-white rounded-xl border border-gray-200 overflow-hidden h-64">
                         <div class="absolute top-2 left-3 text-[10px] font-bold text-gray-400 tracking-widest z-30">FRONT</div>
                         <div id="map-front" class="map-wrapper"></div>
                         <div id="dots-front" class="absolute inset-0 w-full h-full pointer-events-none z-30"></div>
                    </div>
                    <div class="relative w-full bg-white rounded-xl border border-gray-200 overflow-hidden h-64">
                         <div class="absolute top-2 left-3 text-[10px] font-bold text-gray-400 tracking-widest z-30">BACK</div>
                         <div id="map-back" class="map-wrapper"></div>
                         <div id="dots-back" class="absolute inset-0 w-full h-full pointer-events-none z-30"></div>
                    </div>
                </div>
                <div id="thumbs-defect" class="flex gap-2 overflow-x-auto h-24 empty:hidden snap-x"></div>
            </div>
        </div>

        <div id="section-measure" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200 transition-all">
            <label class="text-xs font-bold text-gray-400 uppercase tracking-wide flex items-center gap-2">
                <span id="check-measure" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                11. Measurements
            </label>
            <div id="measure-hint" class="text-xs font-mono text-gray-600 mb-3 bg-gray-50 p-3 rounded-lg border border-gray-200 leading-relaxed"></div>
            <button id="rec-measure" onclick="recordAudio('measure')" class="w-full py-8 rounded-xl border-2 border-dashed border-gray-300 text-gray-400 font-bold flex flex-col items-center justify-center gap-1 active:bg-gray-50 transition-colors">
                <i data-lucide="ruler" class="w-8 h-8 text-gray-300"></i>
                <span id="lbl-measure">Tap to Record Measurements</span>
            </button>
        </div>

        <!-- NEW: Fabric Feel & Construction - Physical inspection phase -->
        <div id="section-fabric-feel" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200">
            <div class="flex justify-between items-center mb-3">
                <label class="text-xs font-bold text-teal-600 uppercase tracking-wide">üìê Fabric Feel & Construction</label>
                <span class="text-[9px] text-gray-400">(Touch the fabric)</span>
            </div>
            
            <!-- Thickness -->
            <div class="mb-4">
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block">Thickness</label>
                <div class="grid grid-cols-4 gap-1">
                    <button onclick="setThickness('Paper Thin', this)" class="thickness-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white transition-all flex flex-col items-center">
                        <span>Paper</span>
                        <span class="text-[8px] text-gray-400">see-thru</span>
                    </button>
                    <button onclick="setThickness('Light', this)" class="thickness-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white transition-all flex flex-col items-center">
                        <span>Light</span>
                        <span class="text-[8px] text-gray-400">50/50</span>
                    </button>
                    <button onclick="setThickness('Standard', this)" class="thickness-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white transition-all flex flex-col items-center">
                        <span>Standard</span>
                        <span class="text-[8px] text-gray-400">Gildan</span>
                    </button>
                    <button onclick="setThickness('Heavy', this)" class="thickness-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white transition-all flex flex-col items-center">
                        <span>Heavy</span>
                        <span class="text-[8px] text-gray-400">Beefy</span>
                    </button>
                </div>
            </div>
            
            <!-- Texture/Feel -->
            <div class="mb-4">
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block">Texture / Feel</label>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="setTexture('Stiff', this)" class="texture-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-xs bg-white transition-all">
                        Stiff / Crisp / New
                    </button>
                    <button onclick="setTexture('Soft', this)" class="texture-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-xs bg-white transition-all">
                        Soft / Broken-In
                    </button>
                </div>
            </div>
            
            <!-- Construction -->
            <div class="mb-2">
                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 block">Construction</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setConstruction('Single', this)" id="btn-construction-single" class="construction-btn py-3 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[10px] shadow-inner transition-all">
                        Single Layer
                    </button>
                    <button onclick="setConstruction('Reversible', this)" id="btn-construction-reversible" class="construction-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white transition-all">
                        Double / Reversible
                    </button>
                    <button onclick="setConstruction('Lined', this)" id="btn-construction-lined" class="construction-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white transition-all">
                        Lined / Fleece
                    </button>
                </div>
            </div>
            
            <!-- Reversible note -->
            <div id="reversible-note" class="hidden mt-3 p-2 bg-amber-50 border border-amber-200 rounded-lg">
                <p class="text-[10px] text-amber-700 font-medium text-center">‚ö†Ô∏è Double layer = expect ~2x normal weight</p>
            </div>
        </div>

        <div id="section-weight" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-200 transition-all">
            <div class="flex justify-between items-center mb-3">
                <label class="text-xs font-bold text-purple-600 uppercase tracking-wide flex items-center gap-2">
                    <span id="check-weight" class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-white text-[10px] transition-all">‚óã</span>
                    12. Estimated Weight
                </label>
            </div>
            
            <!-- Weight hint based on category -->
            <div id="weight-hint" class="mb-3 p-2 bg-purple-50 rounded-lg border border-purple-100">
                <p class="text-[10px] text-purple-600 font-medium text-center">üí° Select category to see typical weight range</p>
            </div>
            
            <div class="grid grid-cols-2 gap-3">
                <div>
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Pounds (lb)</label>
                    <select id="weight-lb" onchange="updateWeight()" class="w-full p-3 border border-gray-300 rounded-xl text-gray-800 font-bold outline-none focus:border-purple-500 text-sm">
                        <option value="0" selected>0 lb</option>
                        <option value="1">1 lb</option>
                        <option value="2">2 lb</option>
                        <option value="3">3 lb</option>
                        <option value="4">4 lb</option>
                        <option value="5">5 lb</option>
                    </select>
                </div>
                <div>
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 block">Ounces (oz)</label>
                    <select id="weight-oz" onchange="updateWeight()" class="w-full p-3 border border-gray-300 rounded-xl text-gray-800 font-bold outline-none focus:border-purple-500 text-sm">
                        <option value="0" selected>0 oz</option>
                        <option value="1">1 oz</option>
                        <option value="2">2 oz</option>
                        <option value="3">3 oz</option>
                        <option value="4">4 oz</option>
                        <option value="5">5 oz</option>
                        <option value="6">6 oz</option>
                        <option value="7">7 oz</option>
                        <option value="8">8 oz</option>
                        <option value="9">9 oz</option>
                        <option value="10">10 oz</option>
                        <option value="11">11 oz</option>
                        <option value="12">12 oz</option>
                        <option value="13">13 oz</option>
                        <option value="14">14 oz</option>
                        <option value="15">15 oz</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="fixed bottom-0 left-0 right-0 p-4 bg-white/90 backdrop-blur-md border-t border-gray-200 z-30" style="padding-bottom: max(1rem, env(safe-area-inset-bottom));">
            <button onclick="submitData()" id="btn-submit" class="w-full bg-gray-400 text-white font-bold text-xl py-4 rounded-xl shadow-lg flex justify-center items-center gap-2 transition-all">
                <span id="submit-icon">‚ö†Ô∏è</span>
                <span id="submit-text">COMPLETE REQUIRED FIELDS</span>
                <span id="submit-count" class="bg-white/20 px-2 py-0.5 rounded text-sm">7</span>
            </button>
        </div>

    </div>

    <div id="cam-overlay" class="fixed inset-0 z-50 bg-black hidden flex flex-col justify-center">
        <div class="flex-1 bg-black"></div>
        <div class="relative w-full aspect-square bg-gray-900 overflow-hidden shadow-2xl border-y-2 border-gray-800">
            <video id="cam-feed" class="w-full h-full object-cover" autoplay playsinline muted></video>
            <!-- Photo Grid Overlay -->
            <div id="photo-grid" class="absolute inset-0 pointer-events-none">
                <!-- Rule of thirds grid lines -->
                <div class="absolute top-1/3 left-0 right-0 h-px bg-white/30"></div>
                <div class="absolute top-2/3 left-0 right-0 h-px bg-white/30"></div>
                <div class="absolute left-1/3 top-0 bottom-0 w-px bg-white/30"></div>
                <div class="absolute left-2/3 top-0 bottom-0 w-px bg-white/30"></div>
                <!-- Center crosshair -->
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8">
                    <div class="absolute top-1/2 left-0 right-0 h-px bg-white/50"></div>
                    <div class="absolute left-1/2 top-0 bottom-0 w-px bg-white/50"></div>
                </div>
            </div>
            <!-- Stabilizer Indicator -->
            <div id="stabilizer-indicator" class="absolute top-4 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-black/60 px-3 py-1.5 rounded-full">
                <div id="stabilizer-dot" class="w-3 h-3 rounded-full bg-red-500 transition-colors duration-200"></div>
                <span id="stabilizer-text" class="text-white text-xs font-bold">HOLD STEADY</span>
            </div>
            <div id="flash" class="flash"></div>
        </div>
        <div class="flex-1 bg-black flex flex-col items-center justify-start pt-8 pb-8">
            <p class="text-gray-400 text-sm font-mono tracking-widest mb-6"><span id="cam-mode-label" class="text-blue-400 font-bold uppercase">MAIN</span> PHOTOS: <span id="cam-count" class="text-white font-bold text-lg">0</span></p>
            <div class="flex items-center justify-evenly w-full px-4 max-w-sm">
                <button onclick="closeCamera()" class="flex flex-col items-center justify-center w-16 h-16 rounded-full bg-gray-800 text-gray-300 font-bold text-[10px] active:bg-gray-700 border border-gray-700">CANCEL</button>
                <button id="shutter-btn" onclick="takeSnap()" class="w-24 h-24 rounded-full bg-white border-[6px] border-gray-300 shadow-2xl active:scale-90 active:border-blue-500 flex items-center justify-center relative disabled:opacity-50 disabled:active:scale-100"><div class="w-20 h-20 rounded-full border-2 border-gray-100"></div></button>
                <button onclick="closeCamera()" class="flex flex-col items-center justify-center w-16 h-16 rounded-full bg-green-600 text-white font-bold text-[10px] active:bg-green-700 shadow-lg border border-green-500">DONE</button>
            </div>
        </div>
    </div>

    <!-- Photo Preview Modal -->
    <div id="photo-preview-modal" class="fixed inset-0 z-[80] bg-black hidden flex flex-col">
        <div class="flex-1 flex items-center justify-center p-4">
            <img id="preview-image" class="max-w-full max-h-full object-contain rounded-lg" src="" alt="Preview">
        </div>
        <div class="bg-black p-6 pb-8">
            <p class="text-center text-gray-400 text-sm mb-4"><span id="preview-mode-label" class="text-white font-bold">MAIN</span> PHOTO</p>
            <div class="flex items-center justify-center gap-6">
                <button onclick="rejectPhoto()" class="flex flex-col items-center justify-center w-20 h-20 rounded-full bg-red-600 text-white font-bold text-xs active:bg-red-700 shadow-lg">
                    <span class="text-2xl mb-1">‚úï</span>
                    RETAKE
                </button>
                <button onclick="acceptPhoto()" class="flex flex-col items-center justify-center w-20 h-20 rounded-full bg-green-600 text-white font-bold text-xs active:bg-green-700 shadow-lg">
                    <span class="text-2xl mb-1">‚úì</span>
                    KEEP
                </button>
            </div>
        </div>
    </div>

    <div id="defect-type-modal" class="fixed inset-0 z-[70] bg-black/80 hidden flex items-end justify-center sm:items-center p-4">
        <div class="bg-white w-full max-w-sm rounded-2xl p-6 pb-8 animate-slide-up">
            <div class="text-center mb-4">
                <p class="text-[10px] text-gray-400 font-bold tracking-widest uppercase mb-1">CONFIRM HAND SIGNAL</p>
                <h3 id="zone-label" class="text-xl font-black text-gray-800">R4-C5</h3>
            </div>
            <div class="grid grid-cols-2 gap-3">
                <button onclick="selectDefectType('Stain')" class="defect-btn-stain py-4 rounded-xl font-bold active:scale-95 flex flex-col items-center justify-center gap-1"><span class="text-lg">STAIN</span><span class="text-[10px] opacity-70">‚òùÔ∏è 1 Finger</span></button>
                <button onclick="selectDefectType('Hole')" class="defect-btn-hole py-4 rounded-xl font-bold active:scale-95 flex flex-col items-center justify-center gap-1"><span class="text-lg">HOLE</span><span class="text-[10px] opacity-70">‚úåÔ∏è 2 Fingers</span></button>
                <button onclick="selectDefectType('Repair')" class="defect-btn-repair py-4 rounded-xl font-bold active:scale-95 flex flex-col items-center justify-center gap-1"><span class="text-lg">REPAIR</span><span class="text-[10px] opacity-70">ü§ü 3 Fingers</span></button>
                <button onclick="selectDefectType('Other Defect')" class="defect-btn-fade py-4 rounded-xl font-bold active:scale-95 flex flex-col items-center justify-center gap-1"><span class="text-lg">OTHER DEFECT</span><span class="text-[10px] opacity-70">üññ 4 Fingers</span></button>
            </div>
            <button onclick="document.getElementById('defect-type-modal').classList.add('hidden')" class="w-full mt-4 text-gray-400 font-bold text-sm py-2">Cancel</button>
        </div>
    </div>

    <div id="upload-modal" class="fixed inset-0 z-[80] bg-black/80 hidden flex items-center justify-center backdrop-blur-sm p-4">
        <div class="bg-white rounded-2xl p-8 w-full max-w-sm text-center shadow-2xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Uploading...</h2>
            <div class="w-full bg-gray-100 rounded-full h-4 mb-3 overflow-hidden"><div id="progress-bar" class="bg-blue-600 h-full transition-all" style="width: 0%"></div></div>
            <p id="upload-detail" class="text-sm text-gray-500">Processing...</p>
        </div>
    </div>

    <script>
        // --- SVG ASSETS ---
        const SVG_SHORT_FRONT = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="209" y="139" width="350" height="489" fill="#1a1a1a"/><rect x="69" y="139" width="140" height="141" fill="#1a1a1a"/><rect x="559" y="139" width="140" height="141" fill="#1a1a1a"/><rect class="zone-hit" data-zone="RIGHT SLEEVE" x="69" y="139" width="140" height="141"/><rect class="zone-hit" data-zone="RIGHT SHOULDER" x="209" y="140" width="140" height="70"/><rect class="zone-hit" data-zone="NECK" x="349" y="140" width="70" height="70"/><rect class="zone-hit" data-zone="LEFT SHOULDER" x="420" y="140" width="139" height="70"/><rect class="zone-hit" data-zone="LEFT SLEEVE" x="559" y="139" width="140" height="141"/><rect class="zone-hit" data-zone="RIGHT PIT" x="209" y="210" width="70" height="139"/><rect class="zone-hit" data-zone="RIGHT CHEST" x="279" y="210" width="105" height="139"/><rect class="zone-hit" data-zone="LEFT CHEST" x="385" y="210" width="105" height="140"/><rect class="zone-hit" data-zone="LEFT PIT" x="489" y="210" width="70" height="139"/><rect class="zone-hit" data-zone="RIGHT MID SECTION" x="209" y="350" width="70" height="207"/><rect class="zone-hit" data-zone="MID SECTION" x="279" y="349" width="210" height="208"/><rect class="zone-hit" data-zone="LEFT MID SECTION" x="489" y="349" width="70" height="208"/><rect class="zone-hit" data-zone="RIGHT HEM" x="209" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="CENTER HEM" x="279" y="557" width="210" height="70"/><rect class="zone-hit" data-zone="LEFT HEM" x="489" y="559" width="70" height="70"/></svg>`;
        const SVG_SHORT_BACK = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="209" y="139" width="350" height="489" fill="#1a1a1a"/><rect x="69" y="139" width="140" height="141" fill="#1a1a1a"/><rect x="559" y="139" width="140" height="141" fill="#1a1a1a"/><rect class="zone-hit" data-zone="LEFT SLEEVE" x="69" y="139" width="140" height="141"/><rect class="zone-hit" data-zone="LEFT SHOULDER" x="209" y="140" width="140" height="70"/><rect class="zone-hit" data-zone="NECK" x="349" y="140" width="70" height="70"/><rect class="zone-hit" data-zone="RIGHT SHOULDER" x="420" y="140" width="139" height="70"/><rect class="zone-hit" data-zone="RIGHT SLEEVE" x="559" y="139" width="140" height="141"/><rect class="zone-hit" data-zone="LEFT PIT" x="209" y="210" width="70" height="139"/><rect class="zone-hit" data-zone="UPPER BACK" x="279" y="210" width="210" height="140"/><rect class="zone-hit" data-zone="RIGHT PIT" x="489" y="210" width="70" height="139"/><rect class="zone-hit" data-zone="LEFT MID SECTION" x="209" y="350" width="70" height="207"/><rect class="zone-hit" data-zone="LOWER BACK" x="279" y="349" width="210" height="208"/><rect class="zone-hit" data-zone="RIGHT MID SECTION" x="489" y="349" width="70" height="208"/><rect class="zone-hit" data-zone="LEFT HEM" x="209" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="CENTER HEM" x="279" y="557" width="210" height="70"/><rect class="zone-hit" data-zone="RIGHT HEM" x="489" y="559" width="70" height="70"/></svg>`;
        const SVG_LONG_FRONT = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="209" y="139" width="350" height="489" fill="#1a1a1a"/><rect x="69" y="139" width="141" height="141" fill="#1a1a1a"/><rect x="69" y="279" width="71" height="350" fill="#1a1a1a"/><rect x="140" y="210" width="70" height="70" fill="#1a1a1a"/><rect x="558" y="139" width="141" height="141" fill="#1a1a1a"/><rect x="628" y="279" width="71" height="350" fill="#1a1a1a"/><rect x="558" y="210" width="71" height="70" fill="#1a1a1a"/><rect class="zone-hit" data-zone="RIGHT UPPER SLEEVE" x="70" y="140" width="71" height="138"/><rect class="zone-hit" data-zone="RIGHT SHOULDER" x="141" y="140" width="209" height="70"/><rect class="zone-hit" data-zone="NECK" x="349" y="140" width="70" height="70"/><rect class="zone-hit" data-zone="LEFT SHOULDER" x="420" y="140" width="208" height="70"/><rect class="zone-hit" data-zone="LEFT UPPER SLEEVE" x="628" y="139" width="70" height="141"/><polygon class="zone-hit" data-zone="RIGHT PIT" points="141,210 279,210 279,348 209,348 209,280 141,280"/><rect class="zone-hit" data-zone="RIGHT CHEST" x="279" y="210" width="105" height="139"/><rect class="zone-hit" data-zone="LEFT CHEST" x="385" y="210" width="105" height="140"/><polygon class="zone-hit" data-zone="LEFT PIT" points="489,210 489,349 560,349 560,280 629,280 629,210"/><rect class="zone-hit" data-zone="RIGHT MID SLEEVE" x="70" y="280" width="70" height="278"/><rect class="zone-hit" data-zone="RIGHT MID SECTION" x="209" y="350" width="70" height="207"/><rect class="zone-hit" data-zone="MID SECTION" x="279" y="349" width="210" height="208"/><rect class="zone-hit" data-zone="LEFT MID SECTION" x="489" y="349" width="70" height="208"/><rect class="zone-hit" data-zone="LEFT MID SLEEVE" x="628" y="280" width="70" height="278"/><rect class="zone-hit" data-zone="RIGHT CUFF" x="69" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="RIGHT HEM" x="209" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="CENTER HEM" x="279" y="557" width="210" height="70"/><rect class="zone-hit" data-zone="LEFT HEM" x="489" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="LEFT CUFF" x="628" y="558" width="70" height="70"/></svg>`;
        const SVG_LONG_BACK = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="209" y="139" width="350" height="489" fill="#1a1a1a"/><rect x="69" y="139" width="141" height="141" fill="#1a1a1a"/><rect x="69" y="279" width="71" height="350" fill="#1a1a1a"/><rect x="140" y="210" width="70" height="70" fill="#1a1a1a"/><rect x="558" y="139" width="141" height="141" fill="#1a1a1a"/><rect x="628" y="279" width="71" height="350" fill="#1a1a1a"/><rect x="558" y="210" width="71" height="70" fill="#1a1a1a"/><rect class="zone-hit" data-zone="LEFT UPPER SLEEVE" x="70" y="140" width="70" height="138"/><rect class="zone-hit" data-zone="LEFT SHOULDER" x="141" y="140" width="209" height="70"/><rect class="zone-hit" data-zone="NECK" x="349" y="140" width="70" height="70"/><rect class="zone-hit" data-zone="RIGHT SHOULDER" x="420" y="140" width="209" height="70"/><rect class="zone-hit" data-zone="RIGHT UPPER SLEEVE" x="628" y="139" width="70" height="140"/><polygon class="zone-hit" data-zone="LEFT PIT" points="141,210 279,210 279,349 209,349 209,280 141,280"/><rect class="zone-hit" data-zone="UPPER BACK" x="279" y="210" width="210" height="140"/><polygon class="zone-hit" data-zone="RIGHT PIT" points="489,210 489,349 560,349 560,280 629,280 629,210"/><rect class="zone-hit" data-zone="LEFT MID SLEEVE" x="70" y="279" width="70" height="280"/><rect class="zone-hit" data-zone="LEFT MID SECTION" x="209" y="350" width="70" height="207"/><rect class="zone-hit" data-zone="LOWER BACK" x="279" y="349" width="210" height="208"/><rect class="zone-hit" data-zone="RIGHT MID SECTION" x="489" y="349" width="70" height="208"/><rect class="zone-hit" data-zone="RIGHT MID SLEEVE" x="629" y="280" width="70" height="278"/><rect class="zone-hit" data-zone="LEFT CUFF" x="70" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="LEFT HEM" x="209" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="CENTER HEM" x="279" y="557" width="210" height="70"/><rect class="zone-hit" data-zone="RIGHT HEM" x="489" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="RIGHT CUFF" x="628" y="559" width="70" height="70"/></svg>`;
        const SVG_34_FRONT = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="209" y="139" width="350" height="489" fill="#1a1a1a"/><rect x="69" y="139" width="141" height="141" fill="#1a1a1a"/><rect x="69" y="279" width="71" height="212" fill="#1a1a1a"/><rect x="140" y="210" width="70" height="70" fill="#1a1a1a"/><rect x="558" y="139" width="141" height="141" fill="#1a1a1a"/><rect x="628" y="279" width="71" height="212" fill="#1a1a1a"/><rect x="558" y="210" width="71" height="70" fill="#1a1a1a"/><rect class="zone-hit" data-zone="RIGHT UPPER SLEEVE" x="70" y="140" width="71" height="138"/><rect class="zone-hit" data-zone="RIGHT SHOULDER" x="141" y="140" width="209" height="70"/><rect class="zone-hit" data-zone="NECK" x="349" y="140" width="70" height="70"/><rect class="zone-hit" data-zone="LEFT SHOULDER" x="420" y="140" width="208" height="70"/><rect class="zone-hit" data-zone="LEFT UPPER SLEEVE" x="628" y="139" width="70" height="141"/><polygon class="zone-hit" data-zone="RIGHT PIT" points="141,210 279,210 279,348 209,348 209,280 141,280"/><rect class="zone-hit" data-zone="RIGHT CHEST" x="279" y="210" width="105" height="139"/><rect class="zone-hit" data-zone="LEFT CHEST" x="385" y="210" width="105" height="140"/><polygon class="zone-hit" data-zone="LEFT PIT" points="489,210 489,349 560,349 560,280 629,280 629,210"/><rect class="zone-hit" data-zone="RIGHT MID SLEEVE" x="70" y="280" width="70" height="139"/><rect class="zone-hit" data-zone="RIGHT MID SECTION" x="209" y="350" width="70" height="207"/><rect class="zone-hit" data-zone="MID SECTION" x="279" y="349" width="210" height="208"/><rect class="zone-hit" data-zone="LEFT MID SECTION" x="489" y="349" width="70" height="208"/><rect class="zone-hit" data-zone="LEFT MID SLEEVE" x="628" y="280" width="70" height="139"/><rect class="zone-hit" data-zone="RIGHT CUFF" x="70" y="421" width="70" height="70"/><rect class="zone-hit" data-zone="RIGHT HEM" x="209" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="CENTER HEM" x="279" y="557" width="210" height="70"/><rect class="zone-hit" data-zone="LEFT HEM" x="489" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="LEFT CUFF" x="628" y="421" width="70" height="70"/></svg>`;
        const SVG_34_BACK = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="209" y="139" width="350" height="489" fill="#1a1a1a"/><rect x="69" y="139" width="141" height="141" fill="#1a1a1a"/><rect x="69" y="279" width="71" height="212" fill="#1a1a1a"/><rect x="140" y="210" width="70" height="70" fill="#1a1a1a"/><rect x="558" y="139" width="141" height="141" fill="#1a1a1a"/><rect x="628" y="279" width="71" height="212" fill="#1a1a1a"/><rect x="558" y="210" width="71" height="70" fill="#1a1a1a"/><rect class="zone-hit" data-zone="LEFT UPPER SLEEVE" x="70" y="140" width="70" height="138"/><rect class="zone-hit" data-zone="LEFT SHOULDER" x="141" y="140" width="209" height="70"/><rect class="zone-hit" data-zone="NECK" x="349" y="140" width="70" height="70"/><rect class="zone-hit" data-zone="RIGHT SHOULDER" x="420" y="140" width="209" height="70"/><rect class="zone-hit" data-zone="RIGHT UPPER SLEEVE" x="628" y="139" width="70" height="140"/><polygon class="zone-hit" data-zone="LEFT PIT" points="141,210 279,210 279,349 209,349 209,280 141,280"/><rect class="zone-hit" data-zone="UPPER BACK" x="279" y="210" width="210" height="140"/><polygon class="zone-hit" data-zone="RIGHT PIT" points="489,210 489,349 560,349 560,280 629,280 629,210"/><rect class="zone-hit" data-zone="LEFT MID SLEEVE" x="70" y="279" width="70" height="140"/><rect class="zone-hit" data-zone="LEFT MID SECTION" x="209" y="350" width="70" height="207"/><rect class="zone-hit" data-zone="LOWER BACK" x="279" y="349" width="210" height="208"/><rect class="zone-hit" data-zone="RIGHT MID SECTION" x="489" y="349" width="70" height="208"/><rect class="zone-hit" data-zone="RIGHT MID SLEEVE" x="629" y="280" width="70" height="139"/><rect class="zone-hit" data-zone="LEFT CUFF" x="70" y="421" width="70" height="70"/><rect class="zone-hit" data-zone="LEFT HEM" x="209" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="CENTER HEM" x="279" y="557" width="210" height="70"/><rect class="zone-hit" data-zone="RIGHT HEM" x="489" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="RIGHT CUFF" x="628" y="421" width="70" height="70"/></svg>`;
        const SVG_SLEEVELESS_FRONT = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="209" y="139" width="350" height="489" fill="#1a1a1a"/><rect class="zone-hit" data-zone="RIGHT SHOULDER" x="209" y="140" width="140" height="70"/><rect class="zone-hit" data-zone="NECK" x="349" y="140" width="70" height="70"/><rect class="zone-hit" data-zone="LEFT SHOULDER" x="420" y="140" width="139" height="70"/><rect class="zone-hit" data-zone="RIGHT PIT" x="209" y="210" width="70" height="139"/><rect class="zone-hit" data-zone="RIGHT CHEST" x="279" y="210" width="105" height="139"/><rect class="zone-hit" data-zone="LEFT CHEST" x="385" y="210" width="105" height="140"/><rect class="zone-hit" data-zone="LEFT PIT" x="489" y="210" width="70" height="139"/><rect class="zone-hit" data-zone="RIGHT MID SECTION" x="209" y="350" width="70" height="207"/><rect class="zone-hit" data-zone="MID SECTION" x="279" y="349" width="210" height="208"/><rect class="zone-hit" data-zone="LEFT MID SECTION" x="489" y="349" width="70" height="208"/><rect class="zone-hit" data-zone="RIGHT HEM" x="209" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="CENTER HEM" x="279" y="557" width="210" height="70"/><rect class="zone-hit" data-zone="LEFT HEM" x="489" y="559" width="70" height="70"/></svg>`;
        const SVG_SLEEVELESS_BACK = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="209" y="139" width="350" height="489" fill="#1a1a1a"/><rect class="zone-hit" data-zone="LEFT SHOULDER" x="209" y="140" width="140" height="70"/><rect class="zone-hit" data-zone="NECK" x="349" y="140" width="70" height="70"/><rect class="zone-hit" data-zone="RIGHT SHOULDER" x="420" y="140" width="139" height="70"/><rect class="zone-hit" data-zone="LEFT PIT" x="209" y="210" width="70" height="139"/><rect class="zone-hit" data-zone="UPPER BACK" x="279" y="210" width="210" height="140"/><rect class="zone-hit" data-zone="RIGHT PIT" x="489" y="210" width="70" height="139"/><rect class="zone-hit" data-zone="LEFT MID SECTION" x="209" y="350" width="70" height="207"/><rect class="zone-hit" data-zone="LOWER BACK" x="279" y="349" width="210" height="208"/><rect class="zone-hit" data-zone="RIGHT MID SECTION" x="489" y="349" width="70" height="208"/><rect class="zone-hit" data-zone="LEFT HEM" x="209" y="559" width="70" height="70"/><rect class="zone-hit" data-zone="CENTER HEM" x="279" y="557" width="210" height="70"/><rect class="zone-hit" data-zone="RIGHT HEM" x="489" y="559" width="70" height="70"/></svg>`;
        const SVG_PANTS_FRONT = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="140" y="69" width="488" height="141" fill="#1a1a1a"/><rect x="140" y="209" width="210" height="488" fill="#1a1a1a"/><rect x="419" y="209" width="209" height="488" fill="#1a1a1a"/><rect x="347" y="209" width="75" height="72" fill="#1a1a1a"/><rect class="zone-hit" data-zone="RIGHT WAIST" x="140" y="69" width="208" height="70"/><rect class="zone-hit" data-zone="CENTER WAIST" x="347" y="69" width="72" height="70"/><rect class="zone-hit" data-zone="LEFT WAIST" x="419" y="70" width="209" height="70"/><rect class="zone-hit" data-zone="RIGHT HIP" x="140" y="140" width="208" height="70"/><rect class="zone-hit" data-zone="FLY" x="348" y="139" width="71" height="70"/><rect class="zone-hit" data-zone="LEFT HIP" x="419" y="140" width="209" height="70"/><rect class="zone-hit" data-zone="CROTCH" x="347" y="209" width="72" height="72"/><rect class="zone-hit" data-zone="RIGHT OUTER THIGH" x="140" y="209" width="74" height="210"/><rect class="zone-hit" data-zone="RIGHT CENTER THIGH" x="211" y="209" width="68" height="210"/><rect class="zone-hit" data-zone="RIGHT INNER THIGH" x="279" y="209" width="70" height="208"/><rect class="zone-hit" data-zone="LEFT INNER THIGH" x="420" y="209" width="72" height="210"/><rect class="zone-hit" data-zone="LEFT CENTER THIGH" x="491" y="209" width="69" height="210"/><rect class="zone-hit" data-zone="LEFT OUTER THIGH" x="558" y="210" width="70" height="209"/><rect class="zone-hit" data-zone="RIGHT KNEE" x="140" y="417" width="210" height="72"/><rect class="zone-hit" data-zone="LEFT KNEE" x="419" y="417" width="209" height="72"/><rect class="zone-hit" data-zone="RIGHT SHIN" x="140" y="489" width="210" height="136"/><rect class="zone-hit" data-zone="LEFT SHIN" x="419" y="489" width="209" height="136"/><rect class="zone-hit" data-zone="RIGHT LEG OPENING" x="140" y="625" width="210" height="72"/><rect class="zone-hit" data-zone="LEFT LEG OPENING" x="419" y="625" width="209" height="72"/></svg>`;
        const SVG_PANTS_BACK = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="140" y="69" width="488" height="141" fill="#1a1a1a"/><rect x="140" y="209" width="210" height="488" fill="#1a1a1a"/><rect x="419" y="209" width="209" height="488" fill="#1a1a1a"/><rect x="347" y="209" width="75" height="72" fill="#1a1a1a"/><rect class="zone-hit" data-zone="LEFT WAIST" x="140" y="69" width="208" height="70"/><rect class="zone-hit" data-zone="CENTER WAIST" x="347" y="69" width="72" height="70"/><rect class="zone-hit" data-zone="RIGHT WAIST" x="419" y="70" width="209" height="70"/><rect class="zone-hit" data-zone="LEFT HIP" x="140" y="140" width="72" height="70"/><rect class="zone-hit" data-zone="LEFT BACK POCKET" x="211" y="140" width="69" height="70"/><rect class="zone-hit" data-zone="BACK SEAT" x="281" y="140" width="208" height="72"/><rect class="zone-hit" data-zone="RIGHT BACK POCKET" x="489" y="140" width="68" height="70"/><rect class="zone-hit" data-zone="RIGHT HIP" x="557" y="140" width="71" height="70"/><rect class="zone-hit" data-zone="BACK CROTCH" x="347" y="209" width="72" height="72"/><rect class="zone-hit" data-zone="LEFT HAMSTRING" x="140" y="210" width="209" height="210"/><rect class="zone-hit" data-zone="RIGHT HAMSTRING" x="419" y="209" width="209" height="210"/><rect class="zone-hit" data-zone="LEFT BACK KNEE" x="140" y="417" width="210" height="72"/><rect class="zone-hit" data-zone="RIGHT BACK KNEE" x="419" y="417" width="209" height="72"/><rect class="zone-hit" data-zone="LEFT SHIN" x="140" y="489" width="210" height="136"/><rect class="zone-hit" data-zone="RIGHT SHIN" x="419" y="489" width="209" height="136"/><rect class="zone-hit" data-zone="LEFT LEG OPENING" x="140" y="625" width="210" height="72"/><rect class="zone-hit" data-zone="RIGHT LEG OPENING" x="419" y="625" width="209" height="72"/></svg>`;
        const SVG_SHORTS_FRONT = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="140" y="69" width="488" height="141" fill="#1a1a1a"/><rect x="140" y="209" width="210" height="280" fill="#1a1a1a"/><rect x="419" y="209" width="209" height="280" fill="#1a1a1a"/><rect x="347" y="209" width="75" height="72" fill="#1a1a1a"/><rect class="zone-hit" data-zone="RIGHT WAIST" x="140" y="69" width="208" height="70"/><rect class="zone-hit" data-zone="CENTER WAIST" x="347" y="69" width="72" height="70"/><rect class="zone-hit" data-zone="LEFT WAIST" x="419" y="70" width="209" height="70"/><rect class="zone-hit" data-zone="RIGHT HIP" x="140" y="140" width="208" height="70"/><rect class="zone-hit" data-zone="FLY" x="348" y="139" width="71" height="70"/><rect class="zone-hit" data-zone="LEFT HIP" x="419" y="140" width="209" height="70"/><rect class="zone-hit" data-zone="CROTCH" x="347" y="209" width="72" height="72"/><rect class="zone-hit" data-zone="RIGHT OUTER THIGH" x="140" y="209" width="74" height="210"/><rect class="zone-hit" data-zone="RIGHT CENTER THIGH" x="211" y="209" width="68" height="210"/><rect class="zone-hit" data-zone="RIGHT INNER THIGH" x="279" y="209" width="70" height="208"/><rect class="zone-hit" data-zone="LEFT INNER THIGH" x="420" y="209" width="72" height="210"/><rect class="zone-hit" data-zone="LEFT CENTER THIGH" x="491" y="209" width="69" height="210"/><rect class="zone-hit" data-zone="LEFT OUTER THIGH" x="558" y="210" width="70" height="209"/><rect class="zone-hit" data-zone="RIGHT LEG OPENING" x="140" y="417" width="210" height="72"/><rect class="zone-hit" data-zone="LEFT LEG OPENING" x="419" y="417" width="209" height="72"/></svg>`;
        const SVG_SHORTS_BACK = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768" class="w-full h-full" preserveAspectRatio="xMidYMid meet"><rect x="140" y="69" width="488" height="141" fill="#1a1a1a"/><rect x="140" y="209" width="210" height="280" fill="#1a1a1a"/><rect x="419" y="209" width="209" height="280" fill="#1a1a1a"/><rect x="347" y="209" width="75" height="72" fill="#1a1a1a"/><rect class="zone-hit" data-zone="LEFT WAIST" x="140" y="69" width="208" height="70"/><rect class="zone-hit" data-zone="CENTER WAIST" x="347" y="69" width="72" height="70"/><rect class="zone-hit" data-zone="RIGHT WAIST" x="419" y="70" width="209" height="70"/><rect class="zone-hit" data-zone="LEFT HIP" x="140" y="140" width="72" height="70"/><rect class="zone-hit" data-zone="LEFT BACK POCKET" x="211" y="140" width="69" height="70"/><rect class="zone-hit" data-zone="BACK SEAT" x="281" y="140" width="208" height="72"/><rect class="zone-hit" data-zone="RIGHT BACK POCKET" x="489" y="140" width="68" height="70"/><rect class="zone-hit" data-zone="RIGHT HIP" x="557" y="140" width="71" height="70"/><rect class="zone-hit" data-zone="BACK CROTCH" x="347" y="209" width="72" height="72"/><rect class="zone-hit" data-zone="LEFT HAMSTRING" x="140" y="210" width="209" height="210"/><rect class="zone-hit" data-zone="RIGHT HAMSTRING" x="419" y="209" width="209" height="210"/><rect class="zone-hit" data-zone="LEFT LEG OPENING" x="140" y="417" width="210" height="72"/><rect class="zone-hit" data-zone="RIGHT LEG OPENING" x="418" y="417" width="209" height="72"/></svg>`;

        document.addEventListener("DOMContentLoaded", () => {
            try {
                const savedPin = localStorage.getItem('vintage_lister_auth');
                const savedPhotographer = localStorage.getItem('vl_photographer');
                if (savedPin === APP_PIN) document.getElementById('login-screen').classList.add('hidden');
                if (savedPhotographer) {
                    data.photographer = savedPhotographer;
                    document.getElementById('photographer-select').value = savedPhotographer;
                    document.getElementById('photographer-badge').innerText = savedPhotographer;
                }
            } catch(e) { document.getElementById('login-screen').classList.add('hidden'); }
            lucide.createIcons();
            
            // BATCH PERSISTENCE: Check if we have a "Batch Mode" saved
            const batchMode = localStorage.getItem('vl_batch_mode');
            
            // Check for saved session data (Poka-yoke)
            restoreSession();
            
            // If no session data for category, use batch mode or default
            if(!data.superCategory) setSuperCategory(batchMode || 'tops');
            
            setTagState(data.tagStatus);
            setDefectState(data.hasDefects);
            
            // Initialize defaults
            initializeDefaults();
            
            // Initialize progress display
            setTimeout(updateProgress, 100);
        });
        
        function initializeDefaults() {
            // Pre-select USA Made
            setOrigin('usa', document.getElementById('btn-origin-usa'));
            // Pre-select Men gender
            const menBtn = document.querySelector('.g-btn');
            document.querySelectorAll('.g-btn').forEach(b => {
                if(b.innerText === 'Men') {
                    b.className = "g-btn w-full py-3 rounded-xl font-bold text-xs btn-selected";
                }
            });
            // Pre-select Pre-owned excellent condition
            document.getElementById('cond-select').value = 'Pre-owned excellent';
            // Pre-select Screen print type for tops/outer (not bottoms)
            if(data.superCategory !== 'bottoms') {
                setPrintType('Screen', document.getElementById('btn-print-Screen'));
            }
            // Update progress after defaults set
            updateProgress();
        }
        
        function checkPin() { 
            if(document.getElementById('pin-input').value === APP_PIN) { 
                try { 
                    localStorage.setItem('vintage_lister_auth', APP_PIN);
                    // Save photographer selection
                    const photographer = document.getElementById('photographer-select').value;
                    localStorage.setItem('vl_photographer', photographer);
                    data.photographer = photographer;
                    document.getElementById('photographer-badge').innerText = photographer;
                } catch(e) {}
                document.getElementById('login-screen').classList.add('hidden'); 
            } else alert("Bad PIN"); 
        }
        
        function showPhotographerChange() {
            // Show a simple prompt to change photographer (rare use case)
            const current = data.photographer;
            const options = ['P01', 'P02', 'P03'];
            const newPhotographer = prompt(`Current: ${current}\nEnter new photographer code (P01, P02, P03):`, current);
            if(newPhotographer && options.includes(newPhotographer.toUpperCase())) {
                data.photographer = newPhotographer.toUpperCase();
                document.getElementById('photographer-badge').innerText = data.photographer;
                try { localStorage.setItem('vl_photographer', data.photographer); } catch(e) {}
            }
        }

        let data = { mode: 'tops', superCategory: '', mainPhotos: [], tagPhotos: [], defectPhotos: [], featurePhotos: [], pendingPhoto: null, cameraMode: 'main', currentTagType: null, gender: 'Men', tagStatus: 'has', tagSize: '', sleeveType: 'Short', sleeveStyle: 'Standard', fitTypes: ['Regular'], bottomsStyle: '', origin: 'usa', madeInCountry: 'USA', copyrightYear: '', era: '', thickness: '', texture: '', construction: 'Single', colorPrimary: '', colorSecondary: '', printType: 'N/A', graphicCategory: '', printCondition: '', collarStyle: 'Crew', stitchType: '', fadeLevel: 'None', brand: '', brandCustom: '', rnNumber: '', styleName: '', wash: '', pattern: 'Solid', itemWeightLb: 0, itemWeightOz: 0, itemWeightTotalOz: 0, visualTagCheck: '', hasDefects: false, audioMeasure: null, scanTime: null, tempDefect: null, photographer: 'P02', timestamps: {},
            // Button Shirt Type fields
            buttonShirtType: '',
            // Western fields
            westernClosure: '', westernYoke: '', westernPocket: '', westernEmbroidery: 'None', westernChainStitch: '',
            // Dress fields
            dressNeckSize: '', dressSleeveSize: '', dressCollar: '', dressCuff: '', dressButtons: '', dressPleat: '',
            // Camp fields
            campCollar: '', campFabric: '', campButtons: '', campPrint: '', campHem: '',
            // Flannel fields
            flannelWeight: '', flannelPlaidType: '', flannelPlaidStyle: '', flannelPatternMatch: '', flannelButtons: '',
            // Work fields
            workFabric: '', workPockets: '', workConstruction: '', workFeatures: [], workColor: '',
            // Casual fields
            casualCollar: '', casualHem: '', casualPocket: '',
            // Polo Shirt Type fields
            poloShirtType: '',
            // Classic Polo fields
            poloPlacket: '', poloCollar: '', poloKnit: '', poloButton: '', poloLogo: '', poloSleeveBand: '', poloHem: '', poloSilhouette: '',
            // Rugby fields
            rugbyCollar: '', rugbyButton: '', rugbyPlacket: '', rugbyStripe: '', rugbyCuff: '', rugbyTeamElements: [], rugbyHem: '', rugbySilhouette: '',
            // Tank Top fields
            tankStyle: '', tankStrap: '', tankArmhole: '', tankBinding: '', tankConstruction: '',
            // T-Shirt Cut-off fields
            isCutOff: false, cutOffArmhole: '',
            // Jersey fields
            jerseyType: '', jerseyNameNum: '', jerseyEraIndicators: [],
            // Baseball jersey
            baseballStyle: '', baseballFabric: '', baseballLettering: '',
            // Basketball jersey
            basketballStyle: '', basketballMesh: '', basketballNumbers: '', basketballEra: '',
            // Football jersey
            footballStyle: '', footballMesh: '', footballNumbers: '',
            // Hockey jersey
            hockeyStyle: '', hockeyFightStrap: '', hockeyCrest: '', hockeyEra: '',
            // Soccer jersey
            soccerStyle: '', soccerSponsor: '',
            // Cycling jersey
            cyclingStyle: '', cyclingPockets: '', cyclingFabric: '',
            // Racing jersey
            racingType: '', racingPatches: '',
            // Athletic jersey
            athleticStyle: '', athleticReversible: '', athleticTeam: '',
            // Blouse fields
            blouseType: '', blouseFabric: '', blouseClosure: '', blouseSleeve: '',
            // Pussy Bow blouse
            pussyBowStyle: '', pussyBowCollar: '',
            // Victorian blouse
            victorianNeck: '', victorianDetails: [],
            // Peasant blouse
            peasantNeck: '', peasantEmbellish: '',
            // Button-front blouse
            buttonFrontCollar: '', buttonFrontCuff: '',
            // Wrap blouse
            wrapType: '', wrapNeckline: '',
            // Dressy blouse
            dressyEmbellish: '', dressySheer: '',
            // Western blouse
            westernBlouseClosure: '', westernBlouseDetails: [],
            // Casual blouse
            casualBlouseStyle: '', casualBlouseNeck: '',
            // Tunic fields
            tunicType: '', tunicOrigin: '', tunicFabric: '', tunicLength: '',
            // Dashiki tunic
            dashikiNeck: '', dashikiPrint: '',
            // Indian tunic
            indianEmbellish: '', indianNeck: '',
            // Moroccan tunic
            moroccanEmbellish: '', moroccanClosure: '',
            // Peasant tunic
            peasantTunicEmbellish: '', peasantTunicSleeve: '',
            // Asian tunic
            asianClosure: '', asianDetails: [],
            // Beach tunic
            beachFabric: '', beachCoverage: '',
            // Modern tunic
            modernStyle: '', modernNeck: '',
            // Jeans fields
            jeansType: '', jeansSelvedge: '', jeansFly: '', jeansOrigin: '', jeansWeight: '',
            // Levi's jeans
            levisModel: '', levisTab: '', levisEraIndicators: [],
            // Lee jeans
            leeStyle: '', leeEraIndicators: [],
            // Wrangler jeans
            wranglerStyle: '', wranglerEraIndicators: [],
            // Designer 80s jeans
            designer80sBrand: '', designer80sStyle: '',
            // Y2K Premium jeans
            y2kPremiumBrand: '', y2kPremiumRise: '', y2kPremiumDetail: '',
            // Y2K Mall jeans
            y2kMallBrand: '', y2kMallLeg: '', y2kMallEmbellish: '',
            // Japanese jeans
            japaneseBrand: '', japaneseWeight: '', japaneseSelvedgeColor: '',
            // Workwear jeans
            workwearBrand: '', workwearConstruction: '',
            // Other jeans
            otherJeansType: '', otherJeansFeature: '',
            // Pants fields
            pantsType: '', pantsRise: '', pantsLeg: '', pantsOrigin: '',
            militaryStyle: '', militaryEraIndicators: [], militaryFabric: '',
            workPantsBrand: '', workPantsEraIndicators: [],
            trackBrand: '', trackStyle: '', trackEra: '',
            p80sStyle: '', p80sFabric: '',
            y2kPantsStyle: '', y2kPantsBrand: '',
            cordWale: '', cordEraIndicators: [],
            dressPantsStyle: '', dressPantsDetails: [],
            cargoStyle: '', cargoPockets: '',
            chinoStyle: '', chinoEra: '',
            // Shorts fields
            shortsType: '', shortsLength: '', shortsOrigin: '',
            boardBrand: '',
            denimShortsType: '', denimShortsBrand: '',
            athleticShortsBrand: '', athleticShortsEra: '',
            y2kShortsStyle: '',
            // Sweatpants fields
            sweatpantsType: '', sweatsCuff: '', sweatsOrigin: '',
            vintageSweetsBrand: '',
            y2kVelourBrand: '', y2kVelourDetail: '',
            y2kLogoBrand: '',
            // Overalls fields
            overallsType: '', overallsBrand: '', overallsEraIndicators: [], overallsFabric: '',
            // Jumpsuit fields
            jumpsuitType: '', jumpsuitClosure: '', jumpsuitOrigin: '',
            flightType: '', flightPatches: '',
            boilerBrand: '', boilerEra: '',
            skiBrand: '', skiEra: '',
            discoStyle: '', discoFabric: '',
            // Jacket fields
            jacketType: '', jacketClosure: '', jacketOrigin: '',
            denimJacketBrand: '', denimJacketLevisType: '', denimJacketTab: '', denimJacketLining: '', denimJacketEra: '',
            varsityBody: '', varsitySleeve: '', varsityPatches: '', varsityEra: '',
            bomberType: '', bomberIssue: '', bomberPatches: '', bomberEra: '',
            leatherStyle: '', leatherBrand: '', leatherFeatures: [],
            trackJacketBrand: '', trackJacketStyle: '', trackJacketEra: '',
            skiJacketBrand: '', skiJacketFill: '', skiJacketEra: '',
            workJacketBrand: '', workJacketStyle: '', workJacketLining: '',
            racingJktType: '', racingJktPatches: '', racingJktEra: '',
            starterBrand: '', starterLeague: '', starterStyle: '',
            windbreakerStyle: '', windbreakerEra: '',
            harringtonBrand: '', harringtonOrigin: '',
            bandJacketStyle: '', bandJacketEra: '',
            // Coat fields
            coatType: '', coatLength: '', coatOrigin: '',
            trenchBrand: '', trenchFeatures: [],
            peacoatIssue: '', peacoatEra: '', peacoatButtons: '',
            parkaType: '', parkaIssue: '', parkaHood: '',
            // Hoodie fields
            hoodieType: '', hoodieClosure: '', hoodieOrigin: '',
            vintageHoodieBrand: '', vintageHoodieStyle: '',
            y2kHoodieBrand: '', y2kHoodieStyle: '',
            // Sweatshirt fields
            sweatshirtType: '', sweatshirtNeck: '', sweatshirtOrigin: '',
            vintageSweatshirtBrand: '', vintageSweatshirtStyle: '', vintageSweatshirtEra: '',
            // Cardigan fields
            // Sweater fields
            sweaterType: '', sweaterMaterial: '', sweaterOrigin: '', sweaterEra: '',
            fairIslePattern: '', fairIsleOriginStyle: '',
            cowichanStyle: '', cowichanHandknit: '',
            tennisSweaterBrand: '', tennisSweaterStyle: '',
            cardiganType: '', cardiganStyle: '', cardiganMaterial: '', cardiganOrigin: '', cardiganFeatures: [],
            // Vest fields
            vestType: '', vestClosure: '', vestOrigin: '',
            leatherVestStyle: '', leatherVestPatches: '',
            pufferVestBrand: '', pufferVestFill: ''
        };
        const recorders = {};

        const superCategories = {
            'tops': ["T-Shirt", "Button Shirt", "Polo Shirt", "Tank Top", "Jersey", "Blouse", "Tunic", "Other Top"],
            'bottoms': ["Jeans", "Pants", "Shorts", "Sweatpants", "Overalls", "Jumpsuit"],
            'outer': ["Jacket", "Coat", "Hoodie", "Sweatshirt", "Sweater", "Cardigan", "Vest"]
        };

        const categoryMeasures = {
            'tops': ["Shoulder to Shoulder", "Pit to Pit (Chest)", "Waist", "Bottom Hem", "Length", "Neck to Shoulder", "Sleeve Length", "Arm Opening"],
            'bottoms': ["Waist", "Inseam", "Front Rise", "Hips", "Leg Opening"],
            'outer': ["Shoulder to Shoulder", "Pit to Pit (Chest)", "Waist", "Bottom Hem", "Length", "Sleeve Length"]
        };
        
        // Detailed measurements by specific category (for audio hints)
        const detailedMeasures = {
            "Jeans": [
                "1. WAIST: UNSTRETCHED",
                "2. WAIST: STRETCHED", 
                "3. HIP",
                "4. THIGH",
                "5. KNEE",
                "6. LEG OPENING: UNSTRETCHED",
                "7. LEG OPENING: STRETCHED",
                "8. OUTSEAM",
                "9. INSEAM",
                "10. FRONT RISE"
            ],
            "Pants": [
                "1. WAIST: UNSTRETCHED",
                "2. WAIST: STRETCHED", 
                "3. HIP",
                "4. THIGH",
                "5. KNEE",
                "6. LEG OPENING: UNSTRETCHED",
                "7. LEG OPENING: STRETCHED",
                "8. OUTSEAM",
                "9. INSEAM",
                "10. FRONT RISE"
            ],
            "Overalls": [
                "1. WAIST: UNSTRETCHED",
                "2. WAIST: STRETCHED", 
                "3. HIP",
                "4. THIGH",
                "5. KNEE",
                "6. LEG OPENING: UNSTRETCHED",
                "7. LEG OPENING: STRETCHED",
                "8. OUTSEAM",
                "9. INSEAM",
                "10. BIB HEIGHT"
            ],
            "Jumpsuit": [
                "1. SHOULDER TO SHOULDER",
                "2. PIT TO PIT (CHEST)",
                "3. WAIST",
                "4. HIP",
                "5. INSEAM",
                "6. OUTSEAM",
                "7. SLEEVE LENGTH",
                "8. TOTAL LENGTH"
            ],
            "Shorts": [
                "1. WAIST: UNSTRETCHED",
                "2. WAIST: STRETCHED",
                "3. HIP",
                "4. THIGH",
                "5. LEG OPENING: UNSTRETCHED",
                "6. LEG OPENING: STRETCHED",
                "7. OUTSEAM",
                "8. INSEAM",
                "9. FRONT RISE"
            ],
            "Sweatpants": [
                "1. WAIST: UNSTRETCHED",
                "2. WAIST: STRETCHED", 
                "3. HIP",
                "4. THIGH",
                "5. KNEE",
                "6. LEG OPENING: UNSTRETCHED",
                "7. LEG OPENING: STRETCHED",
                "8. OUTSEAM",
                "9. INSEAM",
                "10. FRONT RISE"
            ]
        };
        
        const bottomsStyleMap = {
            "Jeans": ["Regular", "Straight", "Slim", "Skinny", "Bootcut", "Wide-Leg", "Mom Jeans", "Boyfriend", "Carpenter", "Baggy"],
            "Pants": ["Regular", "Chino", "Cargo", "Dress", "Work", "Carpenter", "Corduroy", "Pleated", "Track"],
            "Shorts": ["Regular", "Cargo", "Chino", "Denim", "Athletic", "Board", "Biker", "Carpenter", "Sweat"],
            "Sweatpants": ["Regular", "Jogger", "Wide-Leg", "Straight", "Open Hem", "Cargo"],
            "Overalls": ["Bib", "Shortalls", "Painter", "Utility"],
            "Jumpsuit": ["Coverall", "Flight Suit", "Ski Suit", "Fashion"]
        };

        const featuresMap = {
            "Jeans": ["Hem/Selvage", "Inside Tag/Stamp", "Back Pocket Stitch", "Red Tab/Tag", "Hidden Rivets", "Chain Stitch Hem", "Crotch Rivet", "Leather Patch"],
            "Pants": ["Hem/Inseam Allowance", "Waist Closure", "Pocket Detail", "Belt Loops", "Zipper Brand", "Suspender Buttons", "Side Tabs"],
            "Shorts": ["Pocket Detail", "Waist Closure", "Hem Stitch", "Side Stripe", "Logo Placement"],
            "Sweatpants": ["Waist/Elastic", "Cuff/Ankle", "Drawstring", "Pockets", "Side Stripe", "Logo Placement"],
            "Overalls": ["Bib Pocket", "Hardware/Buckles", "Back Logo", "Union Label", "Side Buttons", "Tool Loop"],
            "Jumpsuit": ["Zipper Type", "Patches/Insignia", "Name Tape", "Pockets", "Leg Zippers", "Waist Belt"],
            "Jacket": ["Zipper Pull", "Snap Style", "Lining Pattern", "Patches/Badges", "Collar Style", "Cuff Type", "Back Panel", "Tab Logo"],
            "Coat": ["Button Style", "Lining Material", "Belt/Buckle", "Epaulettes", "Storm Flap", "Hood Type", "Pockets", "Label"],
            "Hoodie": ["Drawstrings/Aglets", "Hood Construction", "Cuff Ribbing", "Zipper Pull", "Kangaroo Pocket", "V-Stitch", "Reversible"],
            "Sweatshirt": ["Cuff Ribbing", "V-Stitch Neck", "Side Panels", "Fleece Type", "Raglan Seam", "Print/Graphic", "Tag Style"],
            "Sweater": ["Knit Pattern", "Ribbed Trim", "Collar Style", "Shoulder Seam", "Label/Tag", "Hand/Machine Knit", "Moth Damage"],
            "Cardigan": ["Button Style", "Pocket Style", "Elbow Patches", "Ribbed Trim", "Label/Tag", "Collar Type"],
            "Vest": ["Zipper Pull", "Snap Style", "Lining", "Pockets", "Back Panel", "Label/Tag"],
            "T-Shirt": ["Copyright Year", "Hem Stitch", "Sleeve Stitch", "Reversible"],
            "Tank Top": ["Copyright Year", "Hem Stitch", "Reversible", "Contrast Piping", "Athletic Logo"],
            "Jersey": ["Team Patch", "Player Number", "Player Name", "League Logo", "Anniversary Patch", "Manufacturer Tag"],
            "Button Shirt": ["Cuff Buttons", "Collar Style", "Extra Buttons", "Fabric Texture", "Elbow Patch", "Side Gusset"],
            "Sweatshirt": ["Cuff Ribbing", "V-Stitch (Neck)", "Side Panels", "Fleece Lining", "Reversible"],
            "Hoodie": ["Drawstrings/Aglets", "Hood Construction", "Cuff Ribbing", "Zipper Pull", "Reversible"],
            "Blouse": ["Shoulder Pads", "Covered Buttons", "French Cuffs", "Lace Trim", "Pintucks", "Hand Embroidery"],
            "Tunic": ["Hand Embroidery", "Mirror Work", "Block Print", "Gold Thread", "Beading", "Side Slits"],
            "Polo Shirt": ["Chest Pocket", "Special Logos", "Extra Button", "Ribbed Cuff", "Side Slits Hem", "Collar Detail"],
            "Coat": ["Lining", "Buttons/Toggles", "Fabric Texture", "Label"],
            "Other Top": ["Copyright Year", "Hem Stitch", "Sleeve Stitch", "Collar Style", "Cuff Buttons", "Chest Pocket", "Special Logos", "Fabric Texture", "Side Gusset", "Unique Stitching"],
            "default": ["Logo/Patch", "Hardware Brand", "Fabric Texture", "Unique Stitching"]
        };

        // Weight reference by category, weight class, and size (in oz unless noted)
        // Sizes: XS/W28, S/W30, M/W32, L/W34, XL/W36, 2XL/W38, 3XL/W40
        const weightTable = {
            "T-Shirt": {
                "Light": [3.0, 3.5, 4.5, 5.0, 5.5, 6.5, 7.5],
                "Mid": [4.5, 5.0, 6.0, 7.0, 8.0, 9.0, 10.5],
                "Heavy": [5.5, 6.5, 7.5, 8.5, 10.0, 12.0, 14.0],
                "desc": "Light=50/50 ‚Ä¢ Mid=Gildan ‚Ä¢ Heavy=Beefy"
            },
            "Tank Top": {
                "Light": [2.5, 3.0, 4.0, 4.5, 5.0, 6.0, 7.0],
                "Mid": [2.5, 3.0, 4.0, 4.5, 5.0, 6.0, 7.0],
                "Heavy": [3.0, 3.5, 4.5, 5.0, 5.5, 6.5, 7.5],
                "desc": "Standard tank weights"
            },
            "Polo Shirt": {
                "Light": [5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 12.0],
                "Mid": [6.0, 7.0, 8.0, 9.0, 10.5, 12.0, 14.0],
                "Heavy": [7.0, 8.0, 9.0, 10.0, 12.0, 14.0, 16.0],
                "desc": "Light=Performance ‚Ä¢ Heavy=Pique Cotton"
            },
            "Button Shirt": {
                "Light": [5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0],
                "Mid": [7.0, 8.0, 9.5, 11.0, 12.5, 14.0, 15.5],
                "Heavy": [9.0, 10.0, 12.0, 14.0, 16.0, 18.0, 20.0],
                "desc": "Light=Dress ‚Ä¢ Heavy=Flannel/Twill"
            },
            "Sweatshirt": {
                "Light": [8.0, 9.0, 10.0, 12.0, 13.0, 15.0, 17.0],
                "Mid": [10.0, 12.0, 14.0, 16.0, 18.0, 20.0, 22.0],
                "Heavy": [14.0, 16.0, 18.0, 22.0, 24.0, 28.0, 32.0],
                "desc": "Light=80s Raglan ‚Ä¢ Mid=College ‚Ä¢ Heavy=Reverse Weave"
            },
            "Hoodie": {
                "Light": [10.0, 12.0, 14.0, 16.0, 18.0, 20.0, 22.0],
                "Mid": [14.0, 16.0, 18.0, 20.0, 22.0, 24.0, 26.0],
                "Heavy": [20.0, 24.0, 28.0, 32.0, 36.0, 40.0, 44.0],
                "desc": "Light=French Terry ‚Ä¢ Mid=Standard ‚Ä¢ Heavy=Workwear"
            },
            "Jacket": {
                "Light": [6.0, 8.0, 10.0, 12.0, 13.0, 14.0, 15.0],
                "Mid": [20.0, 24.0, 28.0, 32.0, 36.0, 40.0, 44.0],
                "Heavy": [32.0, 36.0, 40.0, 48.0, 52.0, 56.0, 60.0],
                "desc": "Light=Windbreaker ‚Ä¢ Mid=Denim ‚Ä¢ Heavy=Varsity"
            },
            "Coat": {
                "Light": [24.0, 32.0, 40.0, 48.0, 56.0, 64.0, 72.0],
                "Mid": [32.0, 40.0, 48.0, 56.0, 64.0, 72.0, 80.0],
                "Heavy": [32.0, 40.0, 48.0, 56.0, 64.0, 72.0, 80.0],
                "desc": "Wool/Trench: 2-5lb ‚Ä¢ Parka: 1.5-4.5lb"
            },
            "Jeans": {
                "Light": [14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0],
                "Mid": [18.0, 20.0, 22.0, 24.0, 26.0, 28.0, 30.0],
                "Heavy": [24.0, 26.0, 28.0, 30.0, 34.0, 36.0, 40.0],
                "desc": "Light=Stretch ‚Ä¢ Mid=Levi's 501 ‚Ä¢ Heavy=Selvedge"
            },
            "Pants": {
                "Light": [10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0],
                "Mid": [14.0, 15.5, 17.0, 18.5, 20.0, 21.5, 23.0],
                "Heavy": [18.0, 20.0, 22.0, 24.0, 26.0, 28.0, 30.0],
                "desc": "Light=Chino/Dress ‚Ä¢ Heavy=Duck Canvas"
            },
            "Shorts": {
                "Light": [6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0],
                "Mid": [8.0, 9.0, 10.0, 11.0, 12.0, 13.5, 15.0],
                "Heavy": [10.0, 11.0, 12.0, 13.0, 14.0, 16.0, 18.0],
                "desc": "Light=Standard ‚Ä¢ Heavy=Cargo/Denim"
            },
            "Sweatpants": {
                "Light": [10.0, 12.0, 14.0, 16.0, 18.0, 20.0, 22.0],
                "Mid": [13.0, 15.0, 17.0, 20.0, 22.0, 25.0, 27.0],
                "Heavy": [16.0, 18.0, 20.0, 24.0, 26.0, 30.0, 32.0],
                "desc": "Standard vs Reverse Weave"
            }
        };
        
        const sizeIndexMap = {
            "XS": 0, "S": 1, "M": 2, "L": 3, "XL": 4, "XXL": 5, "2XL": 5, "3XL": 6, "3XL+": 6,
            "28": 0, "30": 1, "32": 2, "34": 3, "36": 4, "38": 5, "40": 6
        };
        
        // Legacy simple hints (fallback)
        const weightHintsMap = {
            "T-Shirt": { hint: "Light: 3-5oz ‚Ä¢ Mid: 5-8oz ‚Ä¢ Heavy: 6-14oz" },
            "Tank Top": { hint: "Typical: 2.5-7oz" },
            "Polo Shirt": { hint: "Light: 5-10oz ‚Ä¢ Heavy: 7-16oz" },
            "Button Shirt": { hint: "Light: 5-11oz ‚Ä¢ Heavy: 9-20oz" },
            "Sweatshirt": { hint: "Light: 8-17oz ‚Ä¢ Mid: 10-22oz ‚Ä¢ Heavy: 14-32oz" },
            "Hoodie": { hint: "Light: 10-22oz ‚Ä¢ Mid: 14-26oz ‚Ä¢ Heavy: 20-44oz" },
            "Jersey": { hint: "Typical: 8-16oz" },
            "Blouse": { hint: "Typical: 4-8oz" },
            "Tunic": { hint: "Typical: 6-12oz (heavier if embroidered)" },
            "Jacket": { hint: "Windbreaker: 6-15oz ‚Ä¢ Denim: 20-44oz ‚Ä¢ Varsity: 32-60oz ‚Ä¢ Leather: 48-80oz" },
            "Coat": { hint: "Peacoat: 2-4lb ‚Ä¢ Trench: 1.5-3lb ‚Ä¢ Parka: 2-5lb" },
            "Hoodie": { hint: "Light: 10-16oz ‚Ä¢ Mid: 16-24oz ‚Ä¢ Heavy: 24-36oz" },
            "Sweatshirt": { hint: "Light: 8-14oz ‚Ä¢ Mid: 14-22oz ‚Ä¢ Heavy (Reverse Weave): 22-32oz" },
            "Sweater": { hint: "Light Cotton: 8-14oz ‚Ä¢ Wool: 14-24oz ‚Ä¢ Cowichan/Chunky: 24-48oz" },
            "Cardigan": { hint: "Light: 8-14oz ‚Ä¢ Heavy Wool: 16-28oz" },
            "Vest": { hint: "Puffer: 8-16oz ‚Ä¢ Leather: 24-40oz ‚Ä¢ Sweater: 8-14oz" },
            "Jeans": { hint: "Light: 14-20oz ‚Ä¢ Mid: 18-30oz ‚Ä¢ Heavy: 24-40oz" },
            "Pants": { hint: "Light: 10-16oz ‚Ä¢ Heavy: 18-30oz" },
            "Shorts": { hint: "Standard: 6-12oz ‚Ä¢ Cargo: 10-18oz" },
            "Sweatpants": { hint: "Standard: 10-22oz ‚Ä¢ Heavy: 16-32oz" },
            "Overalls": { hint: "Denim: 24-48oz ‚Ä¢ Workwear: 32-64oz" },
            "Jumpsuit": { hint: "Flight Suit: 16-32oz ‚Ä¢ Coverall: 24-48oz" },
            "default": { hint: "Typical: 6oz-1lb" }
        };

        function persistData() {
            try {
                const session = {
                    sku: document.getElementById('sku-input').value,
                    superCategory: data.superCategory,
                    category: document.getElementById('cat-select').value,
                    tagStatus: data.tagStatus,
                    tagSize: data.tagSize,
                    fabric: document.getElementById('fabric-select').value,
                    fabricCustom: document.getElementById('fabric-custom').value,
                    fabricWeight: data.fabricWeight,
                    visualTagCheck: data.visualTagCheck,
                    gender: data.gender,
                    condition: document.getElementById('cond-select').value,
                    sleeveType: data.sleeveType,
                    sleeveStyle: data.sleeveStyle,
                    fitTypes: data.fitTypes,
                    hasDefects: data.hasDefects
                };
                localStorage.setItem('vl_session_v71', JSON.stringify(session));
            } catch(e) {}
            updateProgress();
        }
        
        // ========== PROGRESS TRACKING SYSTEM ==========
        function updateProgress() {
            const checks = {
                category: !!document.getElementById('cat-select').value,
                sku: !!document.getElementById('sku-input').value,
                photos: data.mainPhotos.length > 0,
                features: !!document.getElementById('fabric-select').value && !!data.colorPrimary,
                tag: !!data.tagStatus,
                gender: !!data.gender,
                weight: data.itemWeightTotalOz > 0
            };
            
            // Update individual checkmarks
            const checkElements = {
                'check-category': checks.category,
                'check-sku': checks.sku,
                'check-photos': checks.photos,
                'check-features': checks.features,
                'check-tag': checks.tag,
                'check-gender': checks.gender,
                'check-condition': true, // Always has default
                'check-defects': data.hasDefects !== null,
                'check-weight': checks.weight
            };
            
            for (const [id, complete] of Object.entries(checkElements)) {
                const el = document.getElementById(id);
                if (el) {
                    if (complete) {
                        el.innerHTML = '‚úì';
                        el.className = 'w-5 h-5 rounded-full bg-green-500 border-2 border-green-500 flex items-center justify-center text-white text-[10px] font-bold transition-all';
                    } else {
                        el.innerHTML = '‚óã';
                        el.className = 'w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-gray-300 text-[10px] transition-all';
                    }
                }
            }
            
            // Measurements is optional - show blue if recorded
            const measureEl = document.getElementById('check-measure');
            if (measureEl) {
                if (data.audioMeasure) {
                    measureEl.innerHTML = '‚úì';
                    measureEl.className = 'w-5 h-5 rounded-full bg-blue-500 border-2 border-blue-500 flex items-center justify-center text-white text-[10px] font-bold transition-all';
                } else {
                    measureEl.innerHTML = '‚óã';
                    measureEl.className = 'w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center text-gray-300 text-[10px] transition-all';
                }
            }
            
            // Calculate required completions (7 required fields)
            const requiredChecks = [checks.category, checks.sku, checks.photos, checks.features, checks.tag, checks.gender, checks.weight];
            const completed = requiredChecks.filter(Boolean).length;
            const total = requiredChecks.length;
            const percent = Math.round((completed / total) * 100);
            
            // Update progress bar
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            if (progressBar) progressBar.style.width = percent + '%';
            if (progressText) progressText.textContent = completed + ' / ' + total;
            
            // Update submit button
            const btnSubmit = document.getElementById('btn-submit');
            const submitIcon = document.getElementById('submit-icon');
            const submitText = document.getElementById('submit-text');
            const submitCount = document.getElementById('submit-count');
            
            const missing = total - completed;
            
            if (missing === 0) {
                // Ready to submit!
                btnSubmit.className = 'w-full bg-green-600 active:bg-green-700 text-white font-bold text-xl py-4 rounded-xl shadow-lg flex justify-center items-center gap-2 transition-all animate-pulse';
                submitIcon.textContent = '‚úì';
                submitText.textContent = 'PROCESS LISTING';
                submitCount.textContent = '';
                submitCount.className = 'hidden';
            } else {
                // Still missing items
                btnSubmit.className = 'w-full bg-gray-400 text-white font-bold text-xl py-4 rounded-xl shadow-lg flex justify-center items-center gap-2 transition-all';
                submitIcon.textContent = '‚ö†Ô∏è';
                submitText.textContent = missing === 1 ? '1 FIELD MISSING' : missing + ' FIELDS MISSING';
                submitCount.textContent = '';
                submitCount.className = 'hidden';
            }
        }

        function restoreSession() {
            try {
                const saved = localStorage.getItem('vl_session_v71');
                if(saved) {
                    const session = JSON.parse(saved);
                    if(session.sku) document.getElementById('sku-input').value = session.sku;
                    if(session.superCategory) setSuperCategory(session.superCategory);
                    if(session.category) { document.getElementById('cat-select').value = session.category; handleCategoryChange(); }
                    if(session.tagStatus) setTagState(session.tagStatus);
                    if(session.tagSize) { setTagSize(session.tagSize); document.getElementById('tag-size-input').value = session.tagSize; }
                    if(session.fabric) {
                        document.getElementById('fabric-select').value = session.fabric;
                        if(session.fabric === 'Custom Blend') {
                            document.getElementById('custom-blend-input').classList.remove('hidden');
                        }
                    }
                    if(session.fabricCustom) document.getElementById('fabric-custom').value = session.fabricCustom;
                    if(session.fabricWeight) setFabricWeight(session.fabricWeight);
                    if(session.visualTagCheck) data.visualTagCheck = session.visualTagCheck;
                    if(session.gender) {
                        data.gender = session.gender;
                        document.querySelectorAll('.g-btn').forEach(b => { if(b.innerText === session.gender) b.className = "g-btn w-full py-3 rounded-xl font-bold text-xs btn-selected"; });
                    }
                    if(session.condition) document.getElementById('cond-select').value = session.condition;
                    if(session.sleeveType) {
                        data.sleeveType = session.sleeveType;
                        document.querySelectorAll('.sleeve-btn').forEach(b => { if(b.innerText.includes(session.sleeveType)) b.className = "sleeve-btn w-full py-3 rounded-md font-bold text-xs btn-selected"; });
                        // Show sleeve style selector if has sleeves
                        if(session.sleeveType !== 'None') {
                            document.getElementById('sleeve-style-selector').classList.remove('hidden');
                        }
                        renderDefectMaps();
                    }
                    if(session.sleeveStyle) {
                        data.sleeveStyle = session.sleeveStyle;
                        setSleeveStyle(session.sleeveStyle, document.getElementById(`btn-style-${session.sleeveStyle.toLowerCase()}`));
                    }
                    if(session.hasDefects !== undefined) setDefectState(session.hasDefects);
                }
            } catch(e) {}
        }

        function scrollToNext(id) {
            const el = document.getElementById(id);
            if(el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function setSuperCategory(sc) {
            data.superCategory = sc;
            data.mode = sc; 

            ['tops', 'bottoms', 'outer'].forEach(k => {
                const btn = document.getElementById(`mode-${k}`);
                btn.className = k === sc ? "flex-1 py-2 rounded shadow bg-blue-600 text-white font-bold text-[10px] transition-all" : "flex-1 py-2 rounded text-gray-500 font-bold text-[10px] transition-all bg-gray-100";
            });

            const select = document.getElementById('cat-select');
            select.innerHTML = '<option disabled selected>Select Category...</option>';
            const cats = superCategories[sc] || [];
            cats.forEach(c => select.add(new Option(c, c)));

            const sleeveSelector = document.getElementById('sleeve-selector');
            const fitSelectorTops = document.getElementById('fit-selector-tops');
            const fitSelectorBottoms = document.getElementById('fit-selector-bottoms');
            const washSection = document.getElementById('wash-section');

            if (sc === 'bottoms') {
                sleeveSelector.classList.add('hidden');
                fitSelectorTops.classList.add('hidden');
                fitSelectorBottoms.classList.remove('hidden');
                // Show wash for bottoms (print type always visible now)
                washSection.classList.remove('hidden');
            } else {
                sleeveSelector.classList.remove('hidden');
                fitSelectorTops.classList.remove('hidden');
                fitSelectorBottoms.classList.add('hidden');
                // Hide wash for tops/outer
                washSection.classList.add('hidden');
                data.wash = '';
            }
            updateCatLogic();
            persistData();
        }

        function handleCategoryChange() {
            data.timestamps.category = new Date();
            const cat = document.getElementById('cat-select').value;
            if (data.superCategory === 'bottoms') updateBottomsStyles();
            else autoSelectSleeve();
            updateMeasureHint();
            renderDefectMaps();
            updateFeatureButtons(cat);
            autoSelectGender(cat);
            updateWeightHint(cat);
            updateTagLabels(cat);
            applyCategoryDefaults(cat);
            toggleButtonShirtSection(cat);
            persistData();
        }
        
        function toggleButtonShirtSection(category) {
            const btnShirtSection = document.getElementById('button-shirt-type-section');
            const poloShirtSection = document.getElementById('polo-shirt-type-section');
            const tankTopSection = document.getElementById('tank-top-section');
            const jerseyTypeSection = document.getElementById('jersey-type-section');
            const blouseTypeSection = document.getElementById('blouse-type-section');
            const tunicTypeSection = document.getElementById('tunic-type-section');
            const jeansTypeSection = document.getElementById('jeans-type-section');
            const pantsTypeSection = document.getElementById('pants-type-section');
            const shortsTypeSection = document.getElementById('shorts-type-section');
            const sweatpantsTypeSection = document.getElementById('sweatpants-type-section');
            const overallsTypeSection = document.getElementById('overalls-type-section');
            const jumpsuitTypeSection = document.getElementById('jumpsuit-type-section');
            const jacketTypeSection = document.getElementById('jacket-type-section');
            const coatTypeSection = document.getElementById('coat-type-section');
            const hoodieTypeSection = document.getElementById('hoodie-type-section');
            const sweatshirtTypeSection = document.getElementById('sweatshirt-type-section');
            const sweaterTypeSection = document.getElementById('sweater-type-section');
            const cardiganTypeSection = document.getElementById('cardigan-type-section');
            const vestTypeSection = document.getElementById('vest-type-section');
            const collarSection = document.getElementById('collar-style-section');
            const stitchSection = document.getElementById('stitch-type-section');
            const stitchLabel = stitchSection ? stitchSection.querySelector('label') : null;
            if (!btnShirtSection) return;
            hideAllButtonShirtDetails();
            hideAllPoloDetails();
            hideAllJerseyDetails();
            hideAllBlouseDetails();
            hideAllTunicDetails();
            hideAllJeansDetails();
            hideAllPantsDetails();
            hideAllShortsDetails();
            hideAllSweatpantsDetails();
            hideAllOverallsDetails();
            hideAllJumpsuitDetails();
            hideAllJacketDetails();
            hideAllCoatDetails();
            hideAllHoodieDetails();
            hideAllSweatshirtDetails();
            hideAllSweaterDetails();
            hideAllCardiganDetails();
            hideAllVestDetails();
            // Hide all type sections by default
            if (tankTopSection) tankTopSection.classList.add('hidden');
            if (jerseyTypeSection) jerseyTypeSection.classList.add('hidden');
            if (blouseTypeSection) blouseTypeSection.classList.add('hidden');
            if (tunicTypeSection) tunicTypeSection.classList.add('hidden');
            if (jeansTypeSection) jeansTypeSection.classList.add('hidden');
            if (pantsTypeSection) pantsTypeSection.classList.add('hidden');
            if (shortsTypeSection) shortsTypeSection.classList.add('hidden');
            if (sweatpantsTypeSection) sweatpantsTypeSection.classList.add('hidden');
            if (overallsTypeSection) overallsTypeSection.classList.add('hidden');
            if (jumpsuitTypeSection) jumpsuitTypeSection.classList.add('hidden');
            if (jacketTypeSection) jacketTypeSection.classList.add('hidden');
            if (coatTypeSection) coatTypeSection.classList.add('hidden');
            if (hoodieTypeSection) hoodieTypeSection.classList.add('hidden');
            if (sweatshirtTypeSection) sweatshirtTypeSection.classList.add('hidden');
            if (sweaterTypeSection) sweaterTypeSection.classList.add('hidden');
            if (cardiganTypeSection) cardiganTypeSection.classList.add('hidden');
            if (vestTypeSection) vestTypeSection.classList.add('hidden');
            // Reset tank data
            if (category !== 'Tank Top') {
                data.tankStyle = ''; data.tankStrap = ''; data.tankArmhole = ''; data.tankBinding = ''; data.tankConstruction = '';
            }
            // Reset jersey data
            if (category !== 'Jersey') {
                data.jerseyType = ''; data.jerseyNameNum = ''; data.jerseyEraIndicators = [];
                data.baseballStyle = ''; data.baseballFabric = ''; data.baseballLettering = '';
                data.basketballStyle = ''; data.basketballMesh = ''; data.basketballNumbers = ''; data.basketballEra = '';
                data.footballStyle = ''; data.footballMesh = ''; data.footballNumbers = '';
                data.hockeyStyle = ''; data.hockeyFightStrap = ''; data.hockeyCrest = ''; data.hockeyEra = '';
                data.soccerStyle = ''; data.soccerSponsor = '';
                data.cyclingStyle = ''; data.cyclingPockets = ''; data.cyclingFabric = '';
                data.athleticStyle = ''; data.athleticReversible = ''; data.athleticTeam = '';
            }
            // Reset blouse data
            if (category !== 'Blouse') {
                data.blouseType = ''; data.blouseFabric = ''; data.blouseClosure = ''; data.blouseSleeve = '';
                data.pussyBowStyle = ''; data.pussyBowCollar = '';
                data.victorianNeck = ''; data.victorianDetails = [];
                data.peasantNeck = ''; data.peasantEmbellish = '';
                data.buttonFrontCollar = ''; data.buttonFrontCuff = '';
                data.wrapType = ''; data.wrapNeckline = '';
                data.dressyEmbellish = ''; data.dressySheer = '';
                data.westernBlouseClosure = ''; data.westernBlouseDetails = [];
                data.casualBlouseStyle = ''; data.casualBlouseNeck = '';
            }
            // Reset tunic data
            if (category !== 'Tunic') {
                data.tunicType = ''; data.tunicOrigin = ''; data.tunicFabric = ''; data.tunicLength = '';
                data.dashikiNeck = ''; data.dashikiPrint = '';
                data.indianEmbellish = ''; data.indianNeck = '';
                data.moroccanEmbellish = ''; data.moroccanClosure = '';
                data.peasantTunicEmbellish = ''; data.peasantTunicSleeve = '';
                data.asianClosure = ''; data.asianDetails = [];
                data.beachFabric = ''; data.beachCoverage = '';
                data.modernStyle = ''; data.modernNeck = '';
            }
            // Reset jeans data
            if (category !== 'Jeans') {
                data.jeansType = ''; data.jeansSelvedge = ''; data.jeansFly = ''; data.jeansOrigin = ''; data.jeansWeight = '';
                data.levisModel = ''; data.levisTab = ''; data.levisEraIndicators = [];
                data.leeStyle = ''; data.leeEraIndicators = [];
                data.wranglerStyle = ''; data.wranglerEraIndicators = [];
                data.designer80sBrand = ''; data.designer80sStyle = '';
                data.y2kPremiumBrand = ''; data.y2kPremiumRise = ''; data.y2kPremiumDetail = '';
                data.y2kMallBrand = ''; data.y2kMallLeg = ''; data.y2kMallEmbellish = '';
                data.japaneseBrand = ''; data.japaneseWeight = ''; data.japaneseSelvedgeColor = '';
                data.workwearBrand = ''; data.workwearConstruction = '';
                data.otherJeansType = ''; data.otherJeansFeature = '';
            }
            // Reset pants data
            if (category !== 'Pants') {
                data.pantsType = ''; data.pantsRise = ''; data.pantsLeg = ''; data.pantsOrigin = '';
                data.militaryStyle = ''; data.militaryEraIndicators = []; data.militaryFabric = '';
                data.workPantsBrand = ''; data.workPantsEraIndicators = [];
                data.trackBrand = ''; data.trackStyle = ''; data.trackEra = '';
                data.p80sStyle = ''; data.p80sFabric = '';
                data.y2kPantsStyle = ''; data.y2kPantsBrand = '';
                data.cordWale = ''; data.cordEraIndicators = [];
                data.dressPantsStyle = ''; data.dressPantsDetails = [];
                data.cargoStyle = ''; data.cargoPockets = '';
                data.chinoStyle = ''; data.chinoEra = '';
            }
            // Reset shorts data
            if (category !== 'Shorts') {
                data.shortsType = ''; data.shortsLength = ''; data.shortsOrigin = '';
                data.boardBrand = ''; data.denimShortsType = ''; data.denimShortsBrand = '';
                data.athleticShortsBrand = ''; data.athleticShortsEra = ''; data.y2kShortsStyle = '';
            }
            // Reset sweatpants data
            if (category !== 'Sweatpants') {
                data.sweatpantsType = ''; data.sweatsCuff = ''; data.sweatsOrigin = '';
                data.vintageSweetsBrand = ''; data.y2kVelourBrand = ''; data.y2kVelourDetail = ''; data.y2kLogoBrand = '';
            }
            // Reset overalls data
            if (category !== 'Overalls') {
                data.overallsType = ''; data.overallsBrand = ''; data.overallsEraIndicators = []; data.overallsFabric = '';
            }
            // Reset jumpsuit data
            if (category !== 'Jumpsuit') {
                data.jumpsuitType = ''; data.jumpsuitClosure = ''; data.jumpsuitOrigin = '';
                data.flightType = ''; data.flightPatches = '';
                data.boilerBrand = ''; data.boilerEra = '';
                data.skiBrand = ''; data.skiEra = '';
                data.discoStyle = ''; data.discoFabric = '';
            }
            // Reset jacket data
            if (category !== 'Jacket') {
                data.jacketType = ''; data.jacketClosure = ''; data.jacketOrigin = '';
                data.denimJacketBrand = ''; data.denimJacketLevisType = ''; data.denimJacketTab = ''; data.denimJacketLining = ''; data.denimJacketEra = '';
                data.varsityBody = ''; data.varsitySleeve = ''; data.varsityPatches = ''; data.varsityEra = '';
                data.bomberType = ''; data.bomberIssue = ''; data.bomberPatches = ''; data.bomberEra = '';
                data.leatherStyle = ''; data.leatherBrand = ''; data.leatherFeatures = [];
                data.trackJacketBrand = ''; data.trackJacketStyle = ''; data.trackJacketEra = '';
                data.skiJacketBrand = ''; data.skiJacketFill = ''; data.skiJacketEra = '';
                data.workJacketBrand = ''; data.workJacketStyle = ''; data.workJacketLining = '';
                data.racingJktType = ''; data.racingJktPatches = ''; data.racingJktEra = '';
                data.starterBrand = ''; data.starterLeague = ''; data.starterStyle = '';
                data.windbreakerStyle = ''; data.windbreakerEra = '';
                data.harringtonBrand = ''; data.harringtonOrigin = '';
                data.bandJacketStyle = ''; data.bandJacketEra = '';
            }
            // Reset coat data
            if (category !== 'Coat') {
                data.coatType = ''; data.coatLength = ''; data.coatOrigin = '';
                data.trenchBrand = ''; data.trenchFeatures = [];
                data.peacoatIssue = ''; data.peacoatEra = ''; data.peacoatButtons = '';
                data.parkaType = ''; data.parkaIssue = ''; data.parkaHood = '';
            }
            // Reset hoodie data
            if (category !== 'Hoodie') {
                data.hoodieType = ''; data.hoodieClosure = ''; data.hoodieOrigin = '';
                data.vintageHoodieBrand = ''; data.vintageHoodieStyle = '';
                data.y2kHoodieBrand = ''; data.y2kHoodieStyle = '';
            }
            // Reset sweatshirt data
            if (category !== 'Sweatshirt') {
                data.sweatshirtType = ''; data.sweatshirtNeck = ''; data.sweatshirtOrigin = '';
                data.vintageSweatshirtBrand = ''; data.vintageSweatshirtStyle = ''; data.vintageSweatshirtEra = '';
            }
            // Reset sweater data
            if (category !== 'Sweater') {
                data.sweaterType = ''; data.sweaterMaterial = ''; data.sweaterOrigin = ''; data.sweaterEra = '';
                data.fairIslePattern = ''; data.fairIsleOriginStyle = '';
                data.cowichanStyle = ''; data.cowichanHandknit = '';
                data.tennisSweaterBrand = ''; data.tennisSweaterStyle = '';
            }
            // Reset cardigan data
            if (category !== 'Cardigan') {
                data.cardiganType = ''; data.cardiganStyle = ''; data.cardiganMaterial = ''; data.cardiganOrigin = ''; data.cardiganFeatures = [];
            }
            // Reset vest data
            if (category !== 'Vest') {
                data.vestType = ''; data.vestClosure = ''; data.vestOrigin = '';
                data.leatherVestStyle = ''; data.leatherVestPatches = '';
                data.pufferVestBrand = ''; data.pufferVestFill = '';
            }
            
            if (category === 'Button Shirt') {
                btnShirtSection.classList.remove('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.poloShirtType = '';
            } else if (category === 'Polo Shirt') {
                if (poloShirtSection) poloShirtSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = '';
            } else if (category === 'Tank Top') {
                if (tankTopSection) tankTopSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.remove('hidden');
                if (stitchLabel) stitchLabel.innerHTML = '‚≠ê Stitch Type (Hem & Armhole)';
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Jersey') {
                if (jerseyTypeSection) jerseyTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Blouse') {
                if (blouseTypeSection) blouseTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Tunic') {
                if (tunicTypeSection) tunicTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Jeans') {
                if (jeansTypeSection) jeansTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Pants') {
                if (pantsTypeSection) pantsTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Shorts') {
                if (shortsTypeSection) shortsTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Sweatpants') {
                if (sweatpantsTypeSection) sweatpantsTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Overalls') {
                if (overallsTypeSection) overallsTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Jumpsuit') {
                if (jumpsuitTypeSection) jumpsuitTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Jacket') {
                if (jacketTypeSection) jacketTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Coat') {
                if (coatTypeSection) coatTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Hoodie') {
                if (hoodieTypeSection) hoodieTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Sweatshirt') {
                if (sweatshirtTypeSection) sweatshirtTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Sweater') {
                if (sweaterTypeSection) sweaterTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Cardigan') {
                if (cardiganTypeSection) cardiganTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else if (category === 'Vest') {
                if (vestTypeSection) vestTypeSection.classList.remove('hidden');
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                collarSection.classList.add('hidden');
                stitchSection.classList.add('hidden');
                data.buttonShirtType = ''; data.poloShirtType = '';
            } else {
                btnShirtSection.classList.add('hidden');
                if (poloShirtSection) poloShirtSection.classList.add('hidden');
                data.buttonShirtType = '';
                data.poloShirtType = '';
                const topsWithCollar = ['T-Shirt'];
                if (topsWithCollar.includes(category)) collarSection.classList.remove('hidden');
                else collarSection.classList.add('hidden');
                const topsWithStitch = ['T-Shirt'];
                if (topsWithStitch.includes(category)) {
                    stitchSection.classList.remove('hidden');
                    if (stitchLabel) stitchLabel.innerHTML = '‚≠ê Stitch Type (Hem & Sleeves)';
                }
                else stitchSection.classList.add('hidden');
            }
        }
        
        function hideAllButtonShirtDetails() {
            ['western-details', 'dress-details', 'camp-details', 'flannel-details', 'work-details', 'casual-btn-details'].forEach(id => {
                const el = document.getElementById(id); if (el) el.classList.add('hidden');
            });
        }
        
        function setButtonShirtType(type, btn) {
            data.buttonShirtType = type;
            document.querySelectorAll('.btn-shirt-type').forEach(b => b.className = "btn-shirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-shirt-type py-3 border-2 border-indigo-500 rounded-xl font-bold text-indigo-700 text-xs bg-indigo-50 transition-all flex flex-col items-center shadow-md";
            hideAllButtonShirtDetails();
            const sectionMap = { 'Western': 'western-details', 'Dress': 'dress-details', 'Camp': 'camp-details', 'Flannel': 'flannel-details', 'Work': 'work-details', 'Casual': 'casual-btn-details' };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            updateBrandDropdownForButtonShirt(type);
            persistData();
        }
        
        // Western handlers
        function setWesternClosure(v, b) { data.westernClosure = v; document.querySelectorAll('.western-closure-btn').forEach(x => x.className = "western-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "western-closure-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[10px] bg-amber-50"; persistData(); }
        function setWesternYoke(v, b) { data.westernYoke = v; document.querySelectorAll('.western-yoke-btn').forEach(x => x.className = "western-yoke-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "western-yoke-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        function setWesternPocket(v, b) { data.westernPocket = v; document.querySelectorAll('.western-pocket-btn').forEach(x => x.className = "western-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "western-pocket-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        function setWesternEmbroidery(v, b) { data.westernEmbroidery = v; document.querySelectorAll('.western-emb-btn').forEach(x => x.className = "western-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "western-emb-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        function setWesternChainStitch(v, b) { data.westernChainStitch = v; document.querySelectorAll('.western-chain-btn').forEach(x => x.className = "western-chain-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "western-chain-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[10px] bg-amber-50"; persistData(); }
        
        // Dress handlers
        function setDressNeck(v, b) { data.dressNeckSize = v; document.querySelectorAll('.dress-neck-btn').forEach(x => x.className = "dress-neck-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "dress-neck-btn py-2 border-2 border-blue-500 rounded font-bold text-blue-700 text-[10px] bg-blue-50"; updateDressSizePreview(); persistData(); }
        function setDressSleeve(v, b) { data.dressSleeveSize = v; document.querySelectorAll('.dress-sleeve-btn').forEach(x => x.className = "dress-sleeve-btn py-2 border border-gray-200 rounded font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "dress-sleeve-btn py-2 border-2 border-blue-500 rounded font-bold text-blue-700 text-[10px] bg-blue-50"; updateDressSizePreview(); persistData(); }
        function updateDressSizePreview() { const p = document.getElementById('dress-size-preview'), t = document.getElementById('dress-size-text'); if(data.dressNeckSize && data.dressSleeveSize) { t.innerText = `${data.dressNeckSize} ${data.dressSleeveSize}`; p.classList.remove('hidden'); data.tagSize = `${data.dressNeckSize} ${data.dressSleeveSize}`; } else if(data.dressNeckSize) { t.innerText = data.dressNeckSize; p.classList.remove('hidden'); } else { p.classList.add('hidden'); } }
        function setDressCollar(v, b) { data.dressCollar = v; document.querySelectorAll('.dress-collar-btn').forEach(x => x.className = "dress-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "dress-collar-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setDressCuff(v, b) { data.dressCuff = v; document.querySelectorAll('.dress-cuff-btn').forEach(x => x.className = "dress-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "dress-cuff-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setDressButtons(v, b) { data.dressButtons = v; document.querySelectorAll('.dress-button-btn').forEach(x => x.className = "dress-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "dress-button-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[10px] bg-blue-50"; persistData(); }
        function setDressPleat(v, b) { data.dressPleat = v; document.querySelectorAll('.dress-pleat-btn').forEach(x => x.className = "dress-pleat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "dress-pleat-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        
        // Camp handlers
        function setCampCollar(v, b) { data.campCollar = v; document.querySelectorAll('.camp-collar-btn').forEach(x => x.className = "camp-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "camp-collar-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        function setCampFabric(v, b) { data.campFabric = v; document.querySelectorAll('.camp-fabric-btn').forEach(x => x.className = "camp-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "camp-fabric-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        function setCampButtons(v, b) { data.campButtons = v; document.querySelectorAll('.camp-button-btn').forEach(x => x.className = "camp-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "camp-button-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        function setCampPrint(v, b) { data.campPrint = v; document.querySelectorAll('.camp-print-btn').forEach(x => x.className = "camp-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "camp-print-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        function setCampHem(v, b) { data.campHem = v; document.querySelectorAll('.camp-hem-btn').forEach(x => x.className = "camp-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "camp-hem-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        
        // Flannel handlers
        function setFlannelWeight(v, b) { data.flannelWeight = v; document.querySelectorAll('.flannel-weight-btn').forEach(x => x.className = "flannel-weight-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "flannel-weight-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[10px] bg-orange-50"; persistData(); }
        function setFlannelPlaid(v, b) { data.flannelPlaidType = v; document.querySelectorAll('.flannel-plaid-btn').forEach(x => x.className = "flannel-plaid-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "flannel-plaid-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[10px] bg-orange-50"; persistData(); }
        function setFlannelStyle(v, b) { data.flannelPlaidStyle = v; document.querySelectorAll('.flannel-style-btn').forEach(x => x.className = "flannel-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "flannel-style-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function setFlannelMatch(v, b) { data.flannelPatternMatch = v; document.querySelectorAll('.flannel-match-btn').forEach(x => x.className = "flannel-match-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "flannel-match-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function setFlannelButtons(v, b) { data.flannelButtons = v; document.querySelectorAll('.flannel-btn-btn').forEach(x => x.className = "flannel-btn-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "flannel-btn-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        
        // Work handlers
        function setWorkFabric(v, b) { data.workFabric = v; document.querySelectorAll('.work-fabric-btn').forEach(x => x.className = "work-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "work-fabric-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-200"; persistData(); }
        function setWorkPockets(v, b) { data.workPockets = v; document.querySelectorAll('.work-pocket-btn').forEach(x => x.className = "work-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "work-pocket-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-200"; persistData(); }
        function setWorkConstruction(v, b) { data.workConstruction = v; document.querySelectorAll('.work-const-btn').forEach(x => x.className = "work-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "work-const-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-200"; persistData(); }
        function toggleWorkFeature(v, b) { if(!data.workFeatures) data.workFeatures = []; const i = data.workFeatures.indexOf(v); if(i > -1) { data.workFeatures.splice(i, 1); b.className = "work-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } else { data.workFeatures.push(v); b.className = "work-feat-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-200"; } persistData(); }
        function setWorkColor(v, b) { data.workColor = v; document.querySelectorAll('.work-color-btn').forEach(x => x.className = "work-color-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "work-color-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-200"; persistData(); }
        
        // Casual handlers
        function setCasualCollar(v, b) { data.casualCollar = v; document.querySelectorAll('.casual-collar-btn').forEach(x => x.className = "casual-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "casual-collar-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        function setCasualHem(v, b) { data.casualHem = v; document.querySelectorAll('.casual-hem-btn').forEach(x => x.className = "casual-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "casual-hem-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        function setCasualPocket(v, b) { data.casualPocket = v; document.querySelectorAll('.casual-pocket-btn').forEach(x => x.className = "casual-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "casual-pocket-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        
        // Polo Shirt Type handlers
        function hideAllPoloDetails() {
            ['classic-polo-details', 'rugby-details'].forEach(id => {
                const el = document.getElementById(id); if (el) el.classList.add('hidden');
            });
        }
        
        function setPoloShirtType(type, btn) {
            data.poloShirtType = type;
            document.querySelectorAll('.btn-polo-type').forEach(b => b.className = "btn-polo-type py-4 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-polo-type py-4 border-2 border-emerald-500 rounded-xl font-bold text-emerald-700 text-xs bg-emerald-50 transition-all flex flex-col items-center shadow-md";
            hideAllPoloDetails();
            const sectionMap = { 'Classic': 'classic-polo-details', 'Rugby': 'rugby-details' };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            updateBrandDropdownForPolo(type);
            persistData();
        }
        
        // Classic Polo handlers
        function setPoloPlacket(v, b) { data.poloPlacket = v; document.querySelectorAll('.polo-placket-btn').forEach(x => x.className = "polo-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "polo-placket-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[10px] bg-emerald-50"; persistData(); }
        function setPoloCollar(v, b) { data.poloCollar = v; document.querySelectorAll('.polo-collar-btn').forEach(x => x.className = "polo-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "polo-collar-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setPoloKnit(v, b) { data.poloKnit = v; document.querySelectorAll('.polo-knit-btn').forEach(x => x.className = "polo-knit-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "polo-knit-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setPoloButton(v, b) { data.poloButton = v; document.querySelectorAll('.polo-button-btn').forEach(x => x.className = "polo-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "polo-button-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setPoloLogo(v, b) { data.poloLogo = v; document.querySelectorAll('.polo-logo-btn').forEach(x => x.className = "polo-logo-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "polo-logo-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setPoloSleeve(v, b) { data.poloSleeveBand = v; document.querySelectorAll('.polo-sleeve-btn').forEach(x => x.className = "polo-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "polo-sleeve-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setPoloHem(v, b) { data.poloHem = v; document.querySelectorAll('.polo-hem-btn').forEach(x => x.className = "polo-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "polo-hem-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setPoloSilhouette(v, b) { data.poloSilhouette = v; document.querySelectorAll('.polo-sil-btn').forEach(x => x.className = "polo-sil-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "polo-sil-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        
        // Rugby handlers
        function setRugbyCollar(v, b) { data.rugbyCollar = v; document.querySelectorAll('.rugby-collar-btn').forEach(x => x.className = "rugby-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "rugby-collar-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        function setRugbyButton(v, b) { 
            data.rugbyButton = v; 
            document.querySelectorAll('.rugby-button-btn').forEach(x => {
                if(x.id === 'btn-rugby-rubber') x.className = "rugby-button-btn py-3 border-2 border-amber-400 bg-amber-50 rounded-lg font-bold text-amber-700 text-[10px] shadow-inner";
                else x.className = "rugby-button-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white";
            }); 
            if(b) {
                if(v === 'Rubber') b.className = "rugby-button-btn py-3 border-2 border-rose-600 bg-rose-100 rounded-lg font-bold text-rose-800 text-[10px] shadow-lg ring-2 ring-rose-300";
                else b.className = "rugby-button-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50";
            }
            persistData(); 
        }
        function setRugbyPlacket(v, b) { data.rugbyPlacket = v; document.querySelectorAll('.rugby-placket-btn').forEach(x => x.className = "rugby-placket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "rugby-placket-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[10px] bg-rose-50"; persistData(); }
        function setRugbyStripe(v, b) { data.rugbyStripe = v; document.querySelectorAll('.rugby-stripe-btn').forEach(x => x.className = "rugby-stripe-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "rugby-stripe-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        function setRugbyCuff(v, b) { data.rugbyCuff = v; document.querySelectorAll('.rugby-cuff-btn').forEach(x => x.className = "rugby-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "rugby-cuff-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[10px] bg-rose-50"; persistData(); }
        function toggleRugbyTeam(v, b) { 
            if(!data.rugbyTeamElements) data.rugbyTeamElements = []; 
            if(v === 'None') { data.rugbyTeamElements = []; document.querySelectorAll('.rugby-team-btn').forEach(x => x.className = "rugby-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "rugby-team-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; }
            else {
                const i = data.rugbyTeamElements.indexOf(v); 
                if(i > -1) { data.rugbyTeamElements.splice(i, 1); b.className = "rugby-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } 
                else { data.rugbyTeamElements.push(v); b.className = "rugby-team-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; }
            }
            persistData(); 
        }
        function setRugbyHem(v, b) { data.rugbyHem = v; document.querySelectorAll('.rugby-hem-btn').forEach(x => x.className = "rugby-hem-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "rugby-hem-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        function setRugbySilhouette(v, b) { data.rugbySilhouette = v; document.querySelectorAll('.rugby-sil-btn').forEach(x => x.className = "rugby-sil-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "rugby-sil-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        
        // Tank Top handlers
        function setTankStyle(v, b) { data.tankStyle = v; document.querySelectorAll('.tank-style-btn').forEach(x => x.className = "tank-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "tank-style-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[9px] bg-violet-50"; persistData(); }
        function setTankStrap(v, b) { data.tankStrap = v; document.querySelectorAll('.tank-strap-btn').forEach(x => x.className = "tank-strap-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "tank-strap-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[10px] bg-violet-50"; persistData(); }
        function setTankArmhole(v, b) { data.tankArmhole = v; document.querySelectorAll('.tank-arm-btn').forEach(x => x.className = "tank-arm-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "tank-arm-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[9px] bg-violet-50"; persistData(); }
        function setTankBinding(v, b) { data.tankBinding = v; document.querySelectorAll('.tank-bind-btn').forEach(x => x.className = "tank-bind-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "tank-bind-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[9px] bg-violet-50"; persistData(); }
        function setTankConstruction(v, b) { data.tankConstruction = v; document.querySelectorAll('.tank-const-btn').forEach(x => x.className = "tank-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "tank-const-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[10px] bg-violet-50"; persistData(); }
        
        // T-Shirt Cut-off handlers
        function setCutOff(isCutOff, b) { 
            data.isCutOff = isCutOff; 
            document.querySelectorAll('.cutoff-btn').forEach(x => x.className = "cutoff-btn py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center"); 
            if(b) b.className = "cutoff-btn py-3 border-2 border-orange-500 rounded-xl font-bold text-orange-700 text-xs bg-orange-50 transition-all flex flex-col items-center shadow-md";
            const armholeSection = document.getElementById('cutoff-armhole-section');
            if(isCutOff) {
                armholeSection.classList.remove('hidden');
            } else {
                armholeSection.classList.add('hidden');
                data.cutOffArmhole = '';
            }
            persistData(); 
        }
        function setCutOffArmhole(v, b) { data.cutOffArmhole = v; document.querySelectorAll('.cutoff-arm-btn').forEach(x => x.className = "cutoff-arm-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cutoff-arm-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        
        // Jersey handlers
        function setJerseyType(type, btn) {
            data.jerseyType = type;
            document.querySelectorAll('.btn-jersey-type').forEach(b => b.className = "btn-jersey-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-jersey-type py-3 border-2 border-sky-500 rounded-xl font-bold text-sky-700 text-xs bg-sky-50 transition-all flex flex-col items-center shadow-md";
            hideAllJerseyDetails();
            const sectionMap = { 
                'Baseball': 'baseball-jersey-details', 
                'Basketball': 'basketball-jersey-details', 
                'Football': 'football-jersey-details', 
                'Hockey': 'hockey-jersey-details',
                'Soccer': 'soccer-jersey-details',
                'Cycling': 'cycling-jersey-details',
                'Racing': 'racing-jersey-details',
                'Athletic': 'athletic-jersey-details'
            };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            updateBrandDropdownForJersey(type);
            updateWeightHintForJersey(type);
            persistData();
        }
        
        function hideAllJerseyDetails() {
            ['baseball-jersey-details', 'basketball-jersey-details', 'football-jersey-details', 'hockey-jersey-details', 'soccer-jersey-details', 'cycling-jersey-details', 'racing-jersey-details', 'athletic-jersey-details'].forEach(id => {
                const el = document.getElementById(id); if (el) el.classList.add('hidden');
            });
        }
        
        // Universal jersey fields
        function setJerseyNameNum(v, b) { data.jerseyNameNum = v; document.querySelectorAll('.jersey-namenum-btn').forEach(x => x.className = "jersey-namenum-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jersey-namenum-btn py-2 border-2 border-sky-500 rounded-lg font-bold text-sky-700 text-[9px] bg-sky-50"; persistData(); }
        function toggleJerseyEra(v, b) { 
            if(!data.jerseyEraIndicators) data.jerseyEraIndicators = []; 
            const i = data.jerseyEraIndicators.indexOf(v); 
            if(i > -1) { data.jerseyEraIndicators.splice(i, 1); b.className = "jersey-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } 
            else { data.jerseyEraIndicators.push(v); b.className = "jersey-era-btn py-2 border-2 border-sky-500 rounded-lg font-bold text-sky-700 text-[9px] bg-sky-50"; }
            persistData(); 
        }
        
        // Baseball jersey handlers
        function setBaseballStyle(v, b) { data.baseballStyle = v; document.querySelectorAll('.bb-style-btn').forEach(x => x.className = "bb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bb-style-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function setBaseballFabric(v, b) { data.baseballFabric = v; document.querySelectorAll('.bb-fabric-btn').forEach(x => x.className = "bb-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bb-fabric-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function setBaseballLettering(v, b) { data.baseballLettering = v; document.querySelectorAll('.bb-letter-btn').forEach(x => x.className = "bb-letter-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bb-letter-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        
        // Basketball jersey handlers
        function setBasketballStyle(v, b) { data.basketballStyle = v; document.querySelectorAll('.bball-style-btn').forEach(x => x.className = "bball-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bball-style-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function setBasketballMesh(v, b) { data.basketballMesh = v; document.querySelectorAll('.bball-mesh-btn').forEach(x => x.className = "bball-mesh-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bball-mesh-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function setBasketballNumbers(v, b) { data.basketballNumbers = v; document.querySelectorAll('.bball-num-btn').forEach(x => x.className = "bball-num-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bball-num-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function setBasketballEra(v, b) { data.basketballEra = v; document.querySelectorAll('.bball-era-btn').forEach(x => x.className = "bball-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bball-era-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        
        // Football jersey handlers
        function setFootballStyle(v, b) { data.footballStyle = v; document.querySelectorAll('.fb-style-btn').forEach(x => x.className = "fb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "fb-style-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        function setFootballMesh(v, b) { data.footballMesh = v; document.querySelectorAll('.fb-mesh-btn').forEach(x => x.className = "fb-mesh-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "fb-mesh-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        function setFootballNumbers(v, b) { data.footballNumbers = v; document.querySelectorAll('.fb-num-btn').forEach(x => x.className = "fb-num-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "fb-num-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        
        // Hockey jersey handlers
        function setHockeyStyle(v, b) { data.hockeyStyle = v; document.querySelectorAll('.hk-style-btn').forEach(x => x.className = "hk-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "hk-style-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setHockeyFightStrap(v, b) { data.hockeyFightStrap = v; document.querySelectorAll('.hk-strap-btn').forEach(x => x.className = "hk-strap-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[10px] bg-white"); if(b) b.className = "hk-strap-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[10px] bg-blue-50"; persistData(); }
        function setHockeyCrest(v, b) { data.hockeyCrest = v; document.querySelectorAll('.hk-crest-btn').forEach(x => x.className = "hk-crest-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "hk-crest-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setHockeyEra(v, b) { data.hockeyEra = v; document.querySelectorAll('.hk-era-btn').forEach(x => x.className = "hk-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "hk-era-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        
        // Soccer jersey handlers
        function setSoccerStyle(v, b) { data.soccerStyle = v; document.querySelectorAll('.soccer-style-btn').forEach(x => x.className = "soccer-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "soccer-style-btn py-2 border-2 border-lime-500 rounded-lg font-bold text-lime-700 text-[9px] bg-lime-50"; persistData(); }
        function setSoccerSponsor(v, b) { data.soccerSponsor = v; document.querySelectorAll('.soccer-sponsor-btn').forEach(x => x.className = "soccer-sponsor-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "soccer-sponsor-btn py-2 border-2 border-lime-500 rounded-lg font-bold text-lime-700 text-[9px] bg-lime-50"; persistData(); }
        
        // Cycling jersey handlers
        function setCyclingStyle(v, b) { data.cyclingStyle = v; document.querySelectorAll('.cycling-style-btn').forEach(x => x.className = "cycling-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cycling-style-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; persistData(); }
        function setCyclingPockets(v, b) { data.cyclingPockets = v; document.querySelectorAll('.cycling-pocket-btn').forEach(x => x.className = "cycling-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cycling-pocket-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; persistData(); }
        function setCyclingFabric(v, b) { data.cyclingFabric = v; document.querySelectorAll('.cycling-fabric-btn').forEach(x => x.className = "cycling-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cycling-fabric-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; persistData(); }
        
        // Racing jersey handlers
        function setRacingType(v, b) { data.racingType = v; document.querySelectorAll('.racing-type-btn').forEach(x => x.className = "racing-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "racing-type-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        function setRacingPatches(v, b) { data.racingPatches = v; document.querySelectorAll('.racing-patch-btn').forEach(x => x.className = "racing-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "racing-patch-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        
        // Athletic jersey handlers
        function setAthleticStyle(v, b) { data.athleticStyle = v; document.querySelectorAll('.ath-style-btn').forEach(x => x.className = "ath-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "ath-style-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        function setAthleticReversible(v, b) { data.athleticReversible = v; document.querySelectorAll('.ath-rev-btn').forEach(x => x.className = "ath-rev-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "ath-rev-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        function setAthleticTeam(v, b) { data.athleticTeam = v; document.querySelectorAll('.ath-team-btn').forEach(x => x.className = "ath-team-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "ath-team-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        
        // Blouse handlers
        function setBlouseType(type, btn) {
            data.blouseType = type;
            document.querySelectorAll('.btn-blouse-type').forEach(b => b.className = "btn-blouse-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-blouse-type py-3 border-2 border-pink-500 rounded-xl font-bold text-pink-700 text-xs bg-pink-50 transition-all flex flex-col items-center shadow-md";
            hideAllBlouseDetails();
            // Show universal fields for all blouse types
            document.getElementById('blouse-universal-fields').classList.remove('hidden');
            const sectionMap = { 
                'Pussy Bow': 'pussybow-blouse-details', 
                'Victorian': 'victorian-blouse-details', 
                'Peasant': 'peasant-blouse-details', 
                'Button-Front': 'buttonfront-blouse-details',
                'Wrap': 'wrap-blouse-details',
                'Dressy': 'dressy-blouse-details',
                'Western': 'western-blouse-details',
                'Casual': 'casual-blouse-details'
            };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            updateBrandDropdownForBlouse(type);
            persistData();
        }
        
        function hideAllBlouseDetails() {
            document.getElementById('blouse-universal-fields').classList.add('hidden');
            ['pussybow-blouse-details', 'victorian-blouse-details', 'peasant-blouse-details', 'buttonfront-blouse-details', 'wrap-blouse-details', 'dressy-blouse-details', 'western-blouse-details', 'casual-blouse-details'].forEach(id => {
                const el = document.getElementById(id); if (el) el.classList.add('hidden');
            });
        }
        
        // Universal blouse fields
        function setBlouseFabric(v, b) { data.blouseFabric = v; document.querySelectorAll('.blouse-fabric-btn').forEach(x => x.className = "blouse-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "blouse-fabric-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[9px] bg-pink-50"; persistData(); }
        function setBlouseClosure(v, b) { data.blouseClosure = v; document.querySelectorAll('.blouse-closure-btn').forEach(x => x.className = "blouse-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "blouse-closure-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[9px] bg-pink-50"; persistData(); }
        function setBlouseSleeve(v, b) { data.blouseSleeve = v; document.querySelectorAll('.blouse-sleeve-btn').forEach(x => x.className = "blouse-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "blouse-sleeve-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[9px] bg-pink-50"; persistData(); }
        
        // Pussy Bow blouse handlers
        function setPussyBowStyle(v, b) { data.pussyBowStyle = v; document.querySelectorAll('.pb-style-btn').forEach(x => x.className = "pb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "pb-style-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        function setPussyBowCollar(v, b) { data.pussyBowCollar = v; document.querySelectorAll('.pb-collar-btn').forEach(x => x.className = "pb-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "pb-collar-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        
        // Victorian blouse handlers
        function setVictorianNeck(v, b) { data.victorianNeck = v; document.querySelectorAll('.vict-neck-btn').forEach(x => x.className = "vict-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "vict-neck-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        function toggleVictorianDetail(v, b) { 
            if(!data.victorianDetails) data.victorianDetails = []; 
            const i = data.victorianDetails.indexOf(v); 
            if(i > -1) { data.victorianDetails.splice(i, 1); b.className = "vict-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } 
            else { data.victorianDetails.push(v); b.className = "vict-detail-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; }
            persistData(); 
        }
        
        // Peasant blouse handlers
        function setPeasantNeck(v, b) { data.peasantNeck = v; document.querySelectorAll('.peas-neck-btn').forEach(x => x.className = "peas-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "peas-neck-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function setPeasantEmbellish(v, b) { data.peasantEmbellish = v; document.querySelectorAll('.peas-emb-btn').forEach(x => x.className = "peas-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "peas-emb-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        
        // Button-front blouse handlers
        function setButtonFrontCollar(v, b) { data.buttonFrontCollar = v; document.querySelectorAll('.bf-collar-btn').forEach(x => x.className = "bf-collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bf-collar-btn py-2 border-2 border-slate-500 rounded-lg font-bold text-slate-700 text-[9px] bg-slate-100"; persistData(); }
        function setButtonFrontCuff(v, b) { data.buttonFrontCuff = v; document.querySelectorAll('.bf-cuff-btn').forEach(x => x.className = "bf-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bf-cuff-btn py-2 border-2 border-slate-500 rounded-lg font-bold text-slate-700 text-[9px] bg-slate-100"; persistData(); }
        
        // Wrap blouse handlers
        function setWrapType(v, b) { data.wrapType = v; document.querySelectorAll('.wrap-type-btn').forEach(x => x.className = "wrap-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "wrap-type-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        function setWrapNeckline(v, b) { data.wrapNeckline = v; document.querySelectorAll('.wrap-neck-btn').forEach(x => x.className = "wrap-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "wrap-neck-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        
        // Dressy blouse handlers
        function setDressyEmbellish(v, b) { data.dressyEmbellish = v; document.querySelectorAll('.dressy-emb-btn').forEach(x => x.className = "dressy-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "dressy-emb-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[9px] bg-violet-50"; persistData(); }
        function setDressySheer(v, b) { data.dressySheer = v; document.querySelectorAll('.dressy-sheer-btn').forEach(x => x.className = "dressy-sheer-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "dressy-sheer-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[9px] bg-violet-50"; persistData(); }
        
        // Western blouse handlers
        function setWesternBlouseClosure(v, b) { data.westernBlouseClosure = v; document.querySelectorAll('.wb-closure-btn').forEach(x => x.className = "wb-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "wb-closure-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        function toggleWesternBlouseDetail(v, b) { 
            if(!data.westernBlouseDetails) data.westernBlouseDetails = []; 
            const i = data.westernBlouseDetails.indexOf(v); 
            if(i > -1) { data.westernBlouseDetails.splice(i, 1); b.className = "wb-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } 
            else { data.westernBlouseDetails.push(v); b.className = "wb-detail-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; }
            persistData(); 
        }
        
        // Casual blouse handlers
        function setCasualBlouseStyle(v, b) { data.casualBlouseStyle = v; document.querySelectorAll('.cb-style-btn').forEach(x => x.className = "cb-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cb-style-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        function setCasualBlouseNeck(v, b) { data.casualBlouseNeck = v; document.querySelectorAll('.cb-neck-btn').forEach(x => x.className = "cb-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cb-neck-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        
        // Brand dropdown update for blouse types
        function updateBrandDropdownForBlouse(type) {
            const brandSelect = document.getElementById('brand-select');
            if (!brandSelect) return;
            const brandLists = {
                'Pussy Bow': ['Yves Saint Laurent', 'Gucci', 'Chanel', 'Diane von Furstenberg', 'Anne Klein', 'Albert Nipon', 'Kasper', 'Jones New York', 'Evan Picone', 'Pendleton'],
                'Victorian': ['Gunne Sax', 'Jessica McClintock', 'Laura Ashley', 'Edwardian', 'Cache', 'Scott McClintock'],
                'Peasant': ['Gunne Sax', 'Young Edwardian', 'Hippie', 'India Imports', 'Phool', 'Anokhi'],
                'Button-Front': ['Brooks Brothers', 'Ann Taylor', 'Talbots', 'J.Crew', 'Liz Claiborne', 'Jones New York', 'Kasper'],
                'Wrap': ['Diane von Furstenberg', 'BCBG', 'Express', 'Ann Taylor', 'Banana Republic'],
                'Dressy': ['Cache', 'St. John', 'Escada', 'Carmen Marc Valvo', 'Adrianna Papell', 'Frank Usher'],
                'Western': ['Rockmount', 'Scully', 'Panhandle Slim', 'Wrangler', 'H Bar C', 'Karman', 'Kenny Rogers'],
                'Casual': ['Gap', 'J.Crew', 'Madewell', 'Anthropologie', 'Free People', 'Lucky Brand']
            };
            const brands = brandLists[type] || brandLists['Casual'];
            const defaultOpts = '<option value="">Select Brand...</option><option value="custom">Other (type below)</option>';
            const brandOpts = brands.map(b => `<option value="${b}">${b}</option>`).join('');
            brandSelect.innerHTML = defaultOpts + brandOpts;
            brandSelect.value = '';
            data.brand = '';
        }
        
        // Tunic handlers
        function setTunicType(type, btn) {
            data.tunicType = type;
            document.querySelectorAll('.btn-tunic-type').forEach(b => b.className = "btn-tunic-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-tunic-type py-3 border-2 border-emerald-500 rounded-xl font-bold text-emerald-700 text-xs bg-emerald-50 transition-all flex flex-col items-center shadow-md";
            hideAllTunicDetails();
            // Show universal fields for all tunic types
            document.getElementById('tunic-universal-fields').classList.remove('hidden');
            const sectionMap = { 
                'Dashiki': 'dashiki-tunic-details', 
                'Indian': 'indian-tunic-details', 
                'Moroccan': 'moroccan-tunic-details', 
                'Peasant': 'peasant-tunic-details',
                'Asian': 'asian-tunic-details',
                'Beach': 'beach-tunic-details',
                'Modern': 'modern-tunic-details'
            };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            updateBrandDropdownForTunic(type);
            persistData();
        }
        
        function hideAllTunicDetails() {
            document.getElementById('tunic-universal-fields').classList.add('hidden');
            ['dashiki-tunic-details', 'indian-tunic-details', 'moroccan-tunic-details', 'peasant-tunic-details', 'asian-tunic-details', 'beach-tunic-details', 'modern-tunic-details'].forEach(id => {
                const el = document.getElementById(id); if (el) el.classList.add('hidden');
            });
        }
        
        // Universal tunic fields
        function setTunicOrigin(v, b) { data.tunicOrigin = v; document.querySelectorAll('.tunic-origin-btn').forEach(x => x.className = "tunic-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "tunic-origin-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setTunicFabric(v, b) { data.tunicFabric = v; document.querySelectorAll('.tunic-fabric-btn').forEach(x => x.className = "tunic-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "tunic-fabric-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setTunicLength(v, b) { data.tunicLength = v; document.querySelectorAll('.tunic-length-btn').forEach(x => x.className = "tunic-length-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "tunic-length-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        
        // Dashiki tunic handlers
        function setDashikiNeck(v, b) { data.dashikiNeck = v; document.querySelectorAll('.dashiki-neck-btn').forEach(x => x.className = "dashiki-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "dashiki-neck-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; persistData(); }
        function setDashikiPrint(v, b) { data.dashikiPrint = v; document.querySelectorAll('.dashiki-print-btn').forEach(x => x.className = "dashiki-print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "dashiki-print-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; persistData(); }
        
        // Indian tunic handlers
        function setIndianEmbellish(v, b) { data.indianEmbellish = v; document.querySelectorAll('.indian-emb-btn').forEach(x => x.className = "indian-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "indian-emb-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[8px] bg-orange-50"; persistData(); }
        function setIndianNeck(v, b) { data.indianNeck = v; document.querySelectorAll('.indian-neck-btn').forEach(x => x.className = "indian-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "indian-neck-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        
        // Moroccan tunic handlers
        function setMoroccanEmbellish(v, b) { data.moroccanEmbellish = v; document.querySelectorAll('.moroccan-emb-btn').forEach(x => x.className = "moroccan-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "moroccan-emb-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[8px] bg-amber-50"; persistData(); }
        function setMoroccanClosure(v, b) { data.moroccanClosure = v; document.querySelectorAll('.moroccan-closure-btn').forEach(x => x.className = "moroccan-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "moroccan-closure-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        
        // Peasant tunic handlers
        function setPeasantTunicEmbellish(v, b) { data.peasantTunicEmbellish = v; document.querySelectorAll('.peas-tunic-emb-btn').forEach(x => x.className = "peas-tunic-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "peas-tunic-emb-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[8px] bg-rose-50"; persistData(); }
        function setPeasantTunicSleeve(v, b) { data.peasantTunicSleeve = v; document.querySelectorAll('.peas-tunic-sleeve-btn').forEach(x => x.className = "peas-tunic-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "peas-tunic-sleeve-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        
        // Asian tunic handlers
        function setAsianClosure(v, b) { data.asianClosure = v; document.querySelectorAll('.asian-closure-btn').forEach(x => x.className = "asian-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "asian-closure-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function toggleAsianDetail(v, b) { 
            if(!data.asianDetails) data.asianDetails = []; 
            const i = data.asianDetails.indexOf(v); 
            if(i > -1) { data.asianDetails.splice(i, 1); b.className = "asian-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } 
            else { data.asianDetails.push(v); b.className = "asian-detail-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; }
            persistData(); 
        }
        
        // Beach tunic handlers
        function setBeachFabric(v, b) { data.beachFabric = v; document.querySelectorAll('.beach-fabric-btn').forEach(x => x.className = "beach-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "beach-fabric-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[9px] bg-cyan-50"; persistData(); }
        function setBeachCoverage(v, b) { data.beachCoverage = v; document.querySelectorAll('.beach-coverage-btn').forEach(x => x.className = "beach-coverage-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "beach-coverage-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[9px] bg-cyan-50"; persistData(); }
        
        // Modern tunic handlers
        function setModernStyle(v, b) { data.modernStyle = v; document.querySelectorAll('.modern-style-btn').forEach(x => x.className = "modern-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "modern-style-btn py-2 border-2 border-slate-500 rounded-lg font-bold text-slate-700 text-[9px] bg-slate-100"; persistData(); }
        function setModernNeck(v, b) { data.modernNeck = v; document.querySelectorAll('.modern-neck-btn').forEach(x => x.className = "modern-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "modern-neck-btn py-2 border-2 border-slate-500 rounded-lg font-bold text-slate-700 text-[9px] bg-slate-100"; persistData(); }
        
        // Brand dropdown update for tunic types
        function updateBrandDropdownForTunic(type) {
            const brandSelect = document.getElementById('brand-select');
            if (!brandSelect) return;
            const brandLists = {
                'Dashiki': ['Africa Imports', 'Angelina', 'Vlisco', 'Woodin', 'Mitex', 'Handmade'],
                'Indian': ['Anokhi', 'Phool', 'India Imports', 'Fabindia', 'Cottons', 'Good Earth', 'Handmade'],
                'Moroccan': ['Soft Surroundings', 'Moroccan Imports', 'Artisan Made', 'Chabi Chic', 'Handmade'],
                'Peasant': ['Gunne Sax', 'India Imports', 'Phool', 'Young Edwardian', 'Hippie', 'Handmade'],
                'Asian': ['Shanghai Tang', 'Dynasty', 'Peony', 'China Imports', 'Handmade'],
                'Beach': ['Lilly Pulitzer', 'Trina Turk', 'Tommy Bahama', 'J.Crew', 'Calypso', 'Mara Hoffman'],
                'Modern': ['Eileen Fisher', 'Free People', 'Anthropologie', 'Soft Surroundings', 'J.Jill', 'Chicos']
            };
            const brands = brandLists[type] || brandLists['Modern'];
            const defaultOpts = '<option value="">Select Brand...</option><option value="custom">Other (type below)</option>';
            const brandOpts = brands.map(b => `<option value="${b}">${b}</option>`).join('');
            brandSelect.innerHTML = defaultOpts + brandOpts;
            brandSelect.value = '';
            data.brand = '';
        }
        
        // Jeans handlers
        function setJeansType(type, btn) {
            data.jeansType = type;
            document.querySelectorAll('.btn-jeans-type').forEach(b => b.className = "btn-jeans-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-jeans-type py-3 border-2 border-indigo-500 rounded-xl font-bold text-indigo-700 text-xs bg-indigo-50 transition-all flex flex-col items-center shadow-md";
            hideAllJeansDetails();
            // Show universal fields for all jeans types
            document.getElementById('jeans-universal-fields').classList.remove('hidden');
            const sectionMap = { 
                'Levis': 'levis-jeans-details', 
                'Lee': 'lee-jeans-details', 
                'Wrangler': 'wrangler-jeans-details', 
                'Designer80s': 'designer80s-jeans-details',
                'Y2KPremium': 'y2kpremium-jeans-details',
                'Y2KMall': 'y2kmall-jeans-details',
                'Japanese': 'japanese-jeans-details',
                'Workwear': 'workwear-jeans-details',
                'Other': 'other-jeans-details'
            };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            updateBrandDropdownForJeans(type);
            persistData();
        }
        
        function hideAllJeansDetails() {
            const el = document.getElementById('jeans-universal-fields');
            if (el) el.classList.add('hidden');
            ['levis-jeans-details', 'lee-jeans-details', 'wrangler-jeans-details', 'designer80s-jeans-details', 'y2kpremium-jeans-details', 'y2kmall-jeans-details', 'japanese-jeans-details', 'workwear-jeans-details', 'other-jeans-details'].forEach(id => {
                const el = document.getElementById(id); if (el) el.classList.add('hidden');
            });
        }
        
        // Universal jeans fields
        function setJeansSelvedge(v, b) { data.jeansSelvedge = v; document.querySelectorAll('.jeans-selv-btn').forEach(x => x.className = "jeans-selv-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jeans-selv-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[9px] bg-indigo-50"; persistData(); }
        function setJeansFly(v, b) { data.jeansFly = v; document.querySelectorAll('.jeans-fly-btn').forEach(x => x.className = "jeans-fly-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jeans-fly-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[9px] bg-indigo-50"; persistData(); }
        function setJeansOrigin(v, b) { data.jeansOrigin = v; document.querySelectorAll('.jeans-origin-btn').forEach(x => x.className = "jeans-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jeans-origin-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[9px] bg-indigo-50"; persistData(); }
        function setJeansWeight(v, b) { data.jeansWeight = v; document.querySelectorAll('.jeans-weight-btn').forEach(x => x.className = "jeans-weight-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jeans-weight-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[9px] bg-indigo-50"; persistData(); }
        
        // Levi's handlers
        function setLevisModel(v, b) { data.levisModel = v; document.querySelectorAll('.levis-model-btn').forEach(x => x.className = "levis-model-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "levis-model-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function setLevisTab(v, b) { data.levisTab = v; document.querySelectorAll('.levis-tab-btn').forEach(x => x.className = "levis-tab-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "levis-tab-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function toggleLevisEra(v, b) { 
            if(!data.levisEraIndicators) data.levisEraIndicators = []; 
            const i = data.levisEraIndicators.indexOf(v); 
            if(i > -1) { data.levisEraIndicators.splice(i, 1); b.className = "levis-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"; } 
            else { data.levisEraIndicators.push(v); b.className = "levis-era-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[8px] bg-red-50"; }
            persistData(); 
        }
        
        // Lee handlers
        function setLeeStyle(v, b) { data.leeStyle = v; document.querySelectorAll('.lee-style-btn').forEach(x => x.className = "lee-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "lee-style-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; persistData(); }
        function toggleLeeEra(v, b) { 
            if(!data.leeEraIndicators) data.leeEraIndicators = []; 
            const i = data.leeEraIndicators.indexOf(v); 
            if(i > -1) { data.leeEraIndicators.splice(i, 1); b.className = "lee-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } 
            else { data.leeEraIndicators.push(v); b.className = "lee-era-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; }
            persistData(); 
        }
        
        // Wrangler handlers
        function setWranglerStyle(v, b) { data.wranglerStyle = v; document.querySelectorAll('.wrangler-style-btn').forEach(x => x.className = "wrangler-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "wrangler-style-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function toggleWranglerEra(v, b) { 
            if(!data.wranglerEraIndicators) data.wranglerEraIndicators = []; 
            const i = data.wranglerEraIndicators.indexOf(v); 
            if(i > -1) { data.wranglerEraIndicators.splice(i, 1); b.className = "wrangler-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } 
            else { data.wranglerEraIndicators.push(v); b.className = "wrangler-era-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; }
            persistData(); 
        }
        
        // Designer 80s handlers
        function setDesigner80sBrand(v, b) { data.designer80sBrand = v; document.querySelectorAll('.des80-brand-btn').forEach(x => x.className = "des80-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "des80-brand-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[8px] bg-purple-50"; persistData(); }
        function setDesigner80sStyle(v, b) { data.designer80sStyle = v; document.querySelectorAll('.des80-style-btn').forEach(x => x.className = "des80-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "des80-style-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[8px] bg-purple-50"; persistData(); }
        
        // Y2K Premium handlers
        function setY2KPremiumBrand(v, b) { data.y2kPremiumBrand = v; document.querySelectorAll('.y2kp-brand-btn').forEach(x => x.className = "y2kp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2kp-brand-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[8px] bg-pink-50"; persistData(); }
        function setY2KPremiumRise(v, b) { data.y2kPremiumRise = v; document.querySelectorAll('.y2kp-rise-btn').forEach(x => x.className = "y2kp-rise-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "y2kp-rise-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[9px] bg-pink-50"; persistData(); }
        function setY2KPremiumDetail(v, b) { data.y2kPremiumDetail = v; document.querySelectorAll('.y2kp-detail-btn').forEach(x => x.className = "y2kp-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2kp-detail-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[8px] bg-pink-50"; persistData(); }
        
        // Y2K Mall handlers
        function setY2KMallBrand(v, b) { data.y2kMallBrand = v; document.querySelectorAll('.y2km-brand-btn').forEach(x => x.className = "y2km-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2km-brand-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[8px] bg-orange-50"; persistData(); }
        function setY2KMallLeg(v, b) { data.y2kMallLeg = v; document.querySelectorAll('.y2km-leg-btn').forEach(x => x.className = "y2km-leg-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "y2km-leg-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function setY2KMallEmbellish(v, b) { data.y2kMallEmbellish = v; document.querySelectorAll('.y2km-emb-btn').forEach(x => x.className = "y2km-emb-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2km-emb-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[8px] bg-orange-50"; persistData(); }
        
        // Japanese jeans handlers
        function setJapaneseBrand(v, b) { data.japaneseBrand = v; document.querySelectorAll('.jp-brand-btn').forEach(x => x.className = "jp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "jp-brand-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[8px] bg-rose-50"; persistData(); }
        function setJapaneseWeight(v, b) { data.japaneseWeight = v; document.querySelectorAll('.jp-weight-btn').forEach(x => x.className = "jp-weight-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jp-weight-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        function setJapaneseSelvedgeColor(v, b) { data.japaneseSelvedgeColor = v; document.querySelectorAll('.jp-selv-btn').forEach(x => x.className = "jp-selv-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jp-selv-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        
        // Workwear jeans handlers
        function setWorkwearBrand(v, b) { data.workwearBrand = v; document.querySelectorAll('.work-brand-btn').forEach(x => x.className = "work-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "work-brand-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[8px] bg-stone-100"; persistData(); }
        function setWorkwearConstruction(v, b) { data.workwearConstruction = v; document.querySelectorAll('.work-const-btn').forEach(x => x.className = "work-const-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "work-const-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[9px] bg-stone-100"; persistData(); }
        
        // Other jeans handlers
        function setOtherJeansType(v, b) { data.otherJeansType = v; document.querySelectorAll('.other-jeans-type-btn').forEach(x => x.className = "other-jeans-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "other-jeans-type-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        function setOtherJeansFeature(v, b) { data.otherJeansFeature = v; document.querySelectorAll('.other-jeans-feat-btn').forEach(x => x.className = "other-jeans-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "other-jeans-feat-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        
        // Brand dropdown update for jeans types
        function updateBrandDropdownForJeans(type) {
            const brandSelect = document.getElementById('brand-select');
            if (!brandSelect) return;
            const brandLists = {
                'Levis': ["Levi's", "Levi's Vintage Clothing", "Levi's Made & Crafted"],
                'Lee': ['Lee', 'Lee Riders', 'Lee Union-Made'],
                'Wrangler': ['Wrangler', 'Blue Bell', 'Wrangler Pro Rodeo'],
                'Designer80s': ['Calvin Klein', 'Guess', 'Jordache', 'Gloria Vanderbilt', 'Sasson', 'Chic', 'Z Cavaricci'],
                'Y2KPremium': ['True Religion', '7 For All Mankind', 'Rock & Republic', 'Citizens of Humanity', 'Miss Sixty', 'Hudson', 'AG', "Joe's Jeans", 'Frankie B'],
                'Y2KMall': ['Baby Phat', 'Apple Bottoms', 'Rocawear', 'Sean John', 'JNCO', 'Southpole', 'Ecko', 'Bebe', 'Dereon'],
                'Japanese': ['Momotaro', 'Pure Blue Japan', 'Samurai', 'Sugar Cane', 'Warehouse', 'Oni', 'Iron Heart', 'Full Count', 'Studio D\'Artisan'],
                'Workwear': ['Carhartt', 'Dickies', 'Ben Davis', 'Key', 'Pointer Brand', 'Round House'],
                'Other': ['Gap', 'Old Navy', 'Express', 'American Eagle', 'Abercrombie', 'Hollister', 'Lucky Brand', 'Silver Jeans']
            };
            const brands = brandLists[type] || brandLists['Other'];
            const defaultOpts = '<option value="">Select Brand...</option><option value="custom">Other (type below)</option>';
            const brandOpts = brands.map(b => `<option value="${b}">${b}</option>`).join('');
            brandSelect.innerHTML = defaultOpts + brandOpts;
            brandSelect.value = '';
            data.brand = '';
        }
        
        // ========== PANTS HANDLERS ==========
        function setPantsType(type, btn) {
            data.pantsType = type;
            document.querySelectorAll('.btn-pants-type').forEach(b => b.className = "btn-pants-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-pants-type py-3 border-2 border-stone-500 rounded-xl font-bold text-stone-700 text-xs bg-stone-100 transition-all flex flex-col items-center shadow-md";
            hideAllPantsDetails();
            document.getElementById('pants-universal-fields').classList.remove('hidden');
            const sectionMap = { 
                'Military': 'military-pants-details', 'Work': 'work-pants-details', 'Track': 'track-pants-details',
                '80sFashion': '80sfashion-pants-details', 'Y2K': 'y2k-pants-details', 'Corduroy': 'corduroy-pants-details',
                'Dress': 'dress-pants-details', 'Cargo': 'cargo-pants-details', 'Chino': 'chino-pants-details'
            };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            updateBrandDropdownForPants(type);
            persistData();
        }
        function hideAllPantsDetails() {
            const el = document.getElementById('pants-universal-fields'); if (el) el.classList.add('hidden');
            ['military-pants-details', 'work-pants-details', 'track-pants-details', '80sfashion-pants-details', 'y2k-pants-details', 'corduroy-pants-details', 'dress-pants-details', 'cargo-pants-details', 'chino-pants-details'].forEach(id => {
                const el = document.getElementById(id); if (el) el.classList.add('hidden');
            });
        }
        function setPantsRise(v, b) { data.pantsRise = v; document.querySelectorAll('.pants-rise-btn').forEach(x => x.className = "pants-rise-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "pants-rise-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[9px] bg-stone-100"; persistData(); }
        function setPantsLeg(v, b) { data.pantsLeg = v; document.querySelectorAll('.pants-leg-btn').forEach(x => x.className = "pants-leg-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "pants-leg-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[9px] bg-stone-100"; persistData(); }
        function setPantsOrigin(v, b) { data.pantsOrigin = v; document.querySelectorAll('.pants-origin-btn').forEach(x => x.className = "pants-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "pants-origin-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[9px] bg-stone-100"; persistData(); }
        // Military pants
        function setMilitaryStyle(v, b) { data.militaryStyle = v; document.querySelectorAll('.mil-style-btn').forEach(x => x.className = "mil-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "mil-style-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[8px] bg-green-50"; persistData(); }
        function toggleMilitaryEra(v, b) { if(!data.militaryEraIndicators) data.militaryEraIndicators = []; const i = data.militaryEraIndicators.indexOf(v); if(i > -1) { data.militaryEraIndicators.splice(i, 1); b.className = "mil-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"; } else { data.militaryEraIndicators.push(v); b.className = "mil-era-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[8px] bg-green-50"; } persistData(); }
        function setMilitaryFabric(v, b) { data.militaryFabric = v; document.querySelectorAll('.mil-fabric-btn').forEach(x => x.className = "mil-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "mil-fabric-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        // Work pants
        function setWorkPantsBrand(v, b) { data.workPantsBrand = v; document.querySelectorAll('.workp-brand-btn').forEach(x => x.className = "workp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "workp-brand-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        function toggleWorkPantsEra(v, b) { if(!data.workPantsEraIndicators) data.workPantsEraIndicators = []; const i = data.workPantsEraIndicators.indexOf(v); if(i > -1) { data.workPantsEraIndicators.splice(i, 1); b.className = "workp-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"; } else { data.workPantsEraIndicators.push(v); b.className = "workp-era-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[8px] bg-amber-50"; } persistData(); }
        // Track pants
        function setTrackBrand(v, b) { data.trackBrand = v; document.querySelectorAll('.track-brand-btn').forEach(x => x.className = "track-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "track-brand-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setTrackStyle(v, b) { data.trackStyle = v; document.querySelectorAll('.track-style-btn').forEach(x => x.className = "track-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "track-style-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setTrackEra(v, b) { data.trackEra = v; document.querySelectorAll('.track-era-btn').forEach(x => x.className = "track-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "track-era-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        // 80s Fashion pants
        function set80sStyle(v, b) { data.p80sStyle = v; document.querySelectorAll('.p80s-style-btn').forEach(x => x.className = "p80s-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "p80s-style-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[8px] bg-purple-50"; persistData(); }
        function set80sFabric(v, b) { data.p80sFabric = v; document.querySelectorAll('.p80s-fabric-btn').forEach(x => x.className = "p80s-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "p80s-fabric-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        // Y2K Pants
        function setY2KPantsStyle(v, b) { data.y2kPantsStyle = v; document.querySelectorAll('.y2kp-style-btn').forEach(x => x.className = "y2kp-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2kp-style-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[8px] bg-pink-50"; persistData(); }
        function setY2KPantsBrand(v, b) { data.y2kPantsBrand = v; document.querySelectorAll('.y2kp-brand-btn').forEach(x => x.className = "y2kp-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2kp-brand-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[8px] bg-pink-50"; persistData(); }
        // Corduroy
        function setCordWale(v, b) { data.cordWale = v; document.querySelectorAll('.cord-wale-btn').forEach(x => x.className = "cord-wale-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cord-wale-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function toggleCordEra(v, b) { if(!data.cordEraIndicators) data.cordEraIndicators = []; const i = data.cordEraIndicators.indexOf(v); if(i > -1) { data.cordEraIndicators.splice(i, 1); b.className = "cord-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } else { data.cordEraIndicators.push(v); b.className = "cord-era-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; } persistData(); }
        // Dress pants
        function setDressPantsStyle(v, b) { data.dressPantsStyle = v; document.querySelectorAll('.dressp-style-btn').forEach(x => x.className = "dressp-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "dressp-style-btn py-2 border-2 border-slate-500 rounded-lg font-bold text-slate-700 text-[9px] bg-slate-100"; persistData(); }
        function toggleDressPantsDetail(v, b) { if(!data.dressPantsDetails) data.dressPantsDetails = []; const i = data.dressPantsDetails.indexOf(v); if(i > -1) { data.dressPantsDetails.splice(i, 1); b.className = "dressp-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"; } else { data.dressPantsDetails.push(v); b.className = "dressp-detail-btn py-2 border-2 border-slate-500 rounded-lg font-bold text-slate-700 text-[8px] bg-slate-100"; } persistData(); }
        // Cargo
        function setCargoStyle(v, b) { data.cargoStyle = v; document.querySelectorAll('.cargo-style-btn').forEach(x => x.className = "cargo-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cargo-style-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setCargoPockets(v, b) { data.cargoPockets = v; document.querySelectorAll('.cargo-pocket-btn').forEach(x => x.className = "cargo-pocket-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cargo-pocket-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        // Chino
        function setChinoStyle(v, b) { data.chinoStyle = v; document.querySelectorAll('.chino-style-btn').forEach(x => x.className = "chino-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "chino-style-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; persistData(); }
        function setChinoEra(v, b) { data.chinoEra = v; document.querySelectorAll('.chino-era-btn').forEach(x => x.className = "chino-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "chino-era-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; persistData(); }
        // Pants brand dropdown
        function updateBrandDropdownForPants(type) {
            const brandSelect = document.getElementById('brand-select');
            if (!brandSelect) return;
            const brandLists = {
                'Military': ['Military Issue', 'Rothco', 'Propper', 'TRU-SPEC'],
                'Work': ['Dickies', 'Carhartt', 'Ben Davis', 'Red Kap', 'Key', 'Wrangler'],
                'Track': ['Adidas', 'Nike', 'Puma', 'Fila', 'Champion', 'Starter', 'Kappa'],
                '80sFashion': ['Z Cavaricci', 'Bugle Boy', 'MC Hammer', 'Palmetto'],
                'Y2K': ['Juicy Couture', 'UFO', 'Kikwear', 'Hot Topic'],
                'Corduroy': ["Levi's", 'Lee', 'Wrangler', 'Gap'],
                'Dress': ['Haggar', 'Dockers', 'Perry Ellis', 'Hart Schaffner Marx'],
                'Cargo': ['5.11', 'Rothco', 'Carhartt', 'Wrangler'],
                'Chino': ['Dockers', 'Gap', 'J.Crew', 'Polo Ralph Lauren']
            };
            const brands = brandLists[type] || [];
            const defaultOpts = '<option value="">Select Brand...</option><option value="custom">Other (type below)</option>';
            const brandOpts = brands.map(b => `<option value="${b}">${b}</option>`).join('');
            brandSelect.innerHTML = defaultOpts + brandOpts;
        }
        
        // ========== SHORTS HANDLERS ==========
        function setShortsType(type, btn) {
            data.shortsType = type;
            document.querySelectorAll('.btn-shorts-type').forEach(b => b.className = "btn-shorts-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-shorts-type py-3 border-2 border-cyan-500 rounded-xl font-bold text-cyan-700 text-xs bg-cyan-50 transition-all flex flex-col items-center shadow-md";
            hideAllShortsDetails();
            document.getElementById('shorts-universal-fields').classList.remove('hidden');
            const sectionMap = { 'Board': 'board-shorts-details', 'Denim': 'denim-shorts-details', 'Athletic': 'athletic-shorts-details', 'Y2K': 'y2k-shorts-details' };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            persistData();
        }
        function hideAllShortsDetails() {
            const el = document.getElementById('shorts-universal-fields'); if (el) el.classList.add('hidden');
            ['board-shorts-details', 'denim-shorts-details', 'athletic-shorts-details', 'y2k-shorts-details'].forEach(id => { const el = document.getElementById(id); if (el) el.classList.add('hidden'); });
        }
        function setShortsLength(v, b) { data.shortsLength = v; document.querySelectorAll('.shorts-len-btn').forEach(x => x.className = "shorts-len-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "shorts-len-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[9px] bg-cyan-50"; persistData(); }
        function setShortsOrigin(v, b) { data.shortsOrigin = v; document.querySelectorAll('.shorts-origin-btn').forEach(x => x.className = "shorts-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "shorts-origin-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[9px] bg-cyan-50"; persistData(); }
        function setBoardBrand(v, b) { data.boardBrand = v; document.querySelectorAll('.board-brand-btn').forEach(x => x.className = "board-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "board-brand-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[8px] bg-teal-50"; persistData(); }
        function setDenimShortsType(v, b) { data.denimShortsType = v; document.querySelectorAll('.denim-shorts-type-btn').forEach(x => x.className = "denim-shorts-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "denim-shorts-type-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[9px] bg-indigo-50"; persistData(); }
        function setDenimShortsBrand(v, b) { data.denimShortsBrand = v; document.querySelectorAll('.denim-shorts-brand-btn').forEach(x => x.className = "denim-shorts-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "denim-shorts-brand-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[8px] bg-indigo-50"; persistData(); }
        function setAthleticShortsBrand(v, b) { data.athleticShortsBrand = v; document.querySelectorAll('.ath-shorts-brand-btn').forEach(x => x.className = "ath-shorts-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "ath-shorts-brand-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[8px] bg-blue-50"; persistData(); }
        function setAthleticShortsEra(v, b) { data.athleticShortsEra = v; document.querySelectorAll('.ath-shorts-era-btn').forEach(x => x.className = "ath-shorts-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "ath-shorts-era-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setY2KShortsStyle(v, b) { data.y2kShortsStyle = v; document.querySelectorAll('.y2ks-style-btn').forEach(x => x.className = "y2ks-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2ks-style-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[8px] bg-pink-50"; persistData(); }
        
        // ========== SWEATPANTS HANDLERS ==========
        function setSweatpantsType(type, btn) {
            data.sweatpantsType = type;
            document.querySelectorAll('.btn-sweats-type').forEach(b => b.className = "btn-sweats-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-sweats-type py-3 border-2 border-violet-500 rounded-xl font-bold text-violet-700 text-xs bg-violet-50 transition-all flex flex-col items-center shadow-md";
            hideAllSweatpantsDetails();
            document.getElementById('sweatpants-universal-fields').classList.remove('hidden');
            const sectionMap = { 'Vintage': 'vintage-sweats-details', 'Y2KVelour': 'y2k-velour-sweats-details', 'Y2KLogo': 'y2k-logo-sweats-details' };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            persistData();
        }
        function hideAllSweatpantsDetails() {
            const el = document.getElementById('sweatpants-universal-fields'); if (el) el.classList.add('hidden');
            ['vintage-sweats-details', 'y2k-velour-sweats-details', 'y2k-logo-sweats-details'].forEach(id => { const el = document.getElementById(id); if (el) el.classList.add('hidden'); });
        }
        function setSweatsCuff(v, b) { data.sweatsCuff = v; document.querySelectorAll('.sweats-cuff-btn').forEach(x => x.className = "sweats-cuff-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "sweats-cuff-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[9px] bg-violet-50"; persistData(); }
        function setSweatsOrigin(v, b) { data.sweatsOrigin = v; document.querySelectorAll('.sweats-origin-btn').forEach(x => x.className = "sweats-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "sweats-origin-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[9px] bg-violet-50"; persistData(); }
        function setVintageSweetsBrand(v, b) { data.vintageSweetsBrand = v; document.querySelectorAll('.vtg-sweats-brand-btn').forEach(x => x.className = "vtg-sweats-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "vtg-sweats-brand-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[8px] bg-gray-100"; persistData(); }
        function setY2KVelourBrand(v, b) { data.y2kVelourBrand = v; document.querySelectorAll('.y2kv-brand-btn').forEach(x => x.className = "y2kv-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2kv-brand-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[8px] bg-pink-50"; persistData(); }
        function setY2KVelourDetail(v, b) { data.y2kVelourDetail = v; document.querySelectorAll('.y2kv-detail-btn').forEach(x => x.className = "y2kv-detail-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2kv-detail-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[8px] bg-pink-50"; persistData(); }
        function setY2KLogoBrand(v, b) { data.y2kLogoBrand = v; document.querySelectorAll('.y2kl-brand-btn').forEach(x => x.className = "y2kl-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "y2kl-brand-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[8px] bg-orange-50"; persistData(); }
        
        // ========== OVERALLS HANDLERS ==========
        function setOverallsType(type, btn) {
            data.overallsType = type;
            document.querySelectorAll('.btn-overalls-type').forEach(b => b.className = "btn-overalls-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-overalls-type py-3 border-2 border-amber-500 rounded-xl font-bold text-amber-700 text-xs bg-amber-50 transition-all flex flex-col items-center shadow-md";
            document.getElementById('overalls-universal-fields').classList.remove('hidden');
            persistData();
        }
        function hideAllOverallsDetails() {
            const el = document.getElementById('overalls-universal-fields'); if (el) el.classList.add('hidden');
        }
        function setOverallsBrand(v, b) { data.overallsBrand = v; document.querySelectorAll('.overalls-brand-btn').forEach(x => x.className = "overalls-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "overalls-brand-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[8px] bg-amber-50"; persistData(); }
        function toggleOverallsEra(v, b) { if(!data.overallsEraIndicators) data.overallsEraIndicators = []; const i = data.overallsEraIndicators.indexOf(v); if(i > -1) { data.overallsEraIndicators.splice(i, 1); b.className = "overalls-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"; } else { data.overallsEraIndicators.push(v); b.className = "overalls-era-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[8px] bg-amber-50"; } persistData(); }
        function setOverallsFabric(v, b) { data.overallsFabric = v; document.querySelectorAll('.overalls-fabric-btn').forEach(x => x.className = "overalls-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "overalls-fabric-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        
        // ========== JUMPSUIT HANDLERS ==========
        function setJumpsuitType(type, btn) {
            data.jumpsuitType = type;
            document.querySelectorAll('.btn-jumpsuit-type').forEach(b => b.className = "btn-jumpsuit-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-jumpsuit-type py-3 border-2 border-sky-500 rounded-xl font-bold text-sky-700 text-xs bg-sky-50 transition-all flex flex-col items-center shadow-md";
            hideAllJumpsuitDetails();
            document.getElementById('jumpsuit-universal-fields').classList.remove('hidden');
            const sectionMap = { 'Flight': 'flight-jumpsuit-details', 'Boiler': 'boiler-jumpsuit-details', 'Ski': 'ski-jumpsuit-details', 'Disco': 'disco-jumpsuit-details' };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            persistData();
        }
        function hideAllJumpsuitDetails() {
            const el = document.getElementById('jumpsuit-universal-fields'); if (el) el.classList.add('hidden');
            ['flight-jumpsuit-details', 'boiler-jumpsuit-details', 'ski-jumpsuit-details', 'disco-jumpsuit-details'].forEach(id => { const el = document.getElementById(id); if (el) el.classList.add('hidden'); });
        }
        function setJumpsuitClosure(v, b) { data.jumpsuitClosure = v; document.querySelectorAll('.jumpsuit-closure-btn').forEach(x => x.className = "jumpsuit-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jumpsuit-closure-btn py-2 border-2 border-sky-500 rounded-lg font-bold text-sky-700 text-[9px] bg-sky-50"; persistData(); }
        function setJumpsuitOrigin(v, b) { data.jumpsuitOrigin = v; document.querySelectorAll('.jumpsuit-origin-btn').forEach(x => x.className = "jumpsuit-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jumpsuit-origin-btn py-2 border-2 border-sky-500 rounded-lg font-bold text-sky-700 text-[9px] bg-sky-50"; persistData(); }
        function setFlightType(v, b) { data.flightType = v; document.querySelectorAll('.flight-type-btn').forEach(x => x.className = "flight-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "flight-type-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        function setFlightPatches(v, b) { data.flightPatches = v; document.querySelectorAll('.flight-patch-btn').forEach(x => x.className = "flight-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "flight-patch-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        function setBoilerBrand(v, b) { data.boilerBrand = v; document.querySelectorAll('.boiler-brand-btn').forEach(x => x.className = "boiler-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "boiler-brand-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[8px] bg-stone-100"; persistData(); }
        function setBoilerEra(v, b) { data.boilerEra = v; document.querySelectorAll('.boiler-era-btn').forEach(x => x.className = "boiler-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "boiler-era-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[9px] bg-stone-100"; persistData(); }
        function setSkiBrand(v, b) { data.skiBrand = v; document.querySelectorAll('.ski-brand-btn').forEach(x => x.className = "ski-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "ski-brand-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[8px] bg-cyan-50"; persistData(); }
        function setSkiEra(v, b) { data.skiEra = v; document.querySelectorAll('.ski-era-btn').forEach(x => x.className = "ski-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "ski-era-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[9px] bg-cyan-50"; persistData(); }
        function setDiscoStyle(v, b) { data.discoStyle = v; document.querySelectorAll('.disco-style-btn').forEach(x => x.className = "disco-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "disco-style-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        function setDiscoFabric(v, b) { data.discoFabric = v; document.querySelectorAll('.disco-fabric-btn').forEach(x => x.className = "disco-fabric-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "disco-fabric-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        
        // ========== JACKET HANDLERS ==========
        function setJacketType(type, btn) {
            data.jacketType = type;
            document.querySelectorAll('.btn-jacket-type').forEach(b => b.className = "btn-jacket-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-jacket-type py-3 border-2 border-slate-500 rounded-xl font-bold text-slate-700 text-xs bg-slate-100 transition-all flex flex-col items-center shadow-md";
            hideAllJacketDetails();
            document.getElementById('jacket-universal-fields').classList.remove('hidden');
            const sectionMap = { 
                'Denim': 'denim-jacket-details', 'Varsity': 'varsity-jacket-details', 'Bomber': 'bomber-jacket-details',
                'Leather': 'leather-jacket-details', 'Track': 'track-jacket-details', 'Ski': 'ski-jacket-details',
                'Work': 'work-jacket-details', 'Racing': 'racing-jacket-details', 'Windbreaker': 'windbreaker-jacket-details',
                'Harrington': 'harrington-jacket-details', 'Band': 'band-jacket-details', 'Starter': 'starter-jacket-details'
            };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            persistData();
        }
        function hideAllJacketDetails() {
            const el = document.getElementById('jacket-universal-fields'); if (el) el.classList.add('hidden');
            ['denim-jacket-details', 'varsity-jacket-details', 'bomber-jacket-details', 'leather-jacket-details', 'track-jacket-details', 'ski-jacket-details', 'work-jacket-details', 'racing-jacket-details', 'windbreaker-jacket-details', 'harrington-jacket-details', 'band-jacket-details', 'starter-jacket-details'].forEach(id => {
                const el = document.getElementById(id); if (el) el.classList.add('hidden');
            });
        }
        function setJacketClosure(v, b) { data.jacketClosure = v; document.querySelectorAll('.jacket-closure-btn').forEach(x => x.className = "jacket-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jacket-closure-btn py-2 border-2 border-slate-500 rounded-lg font-bold text-slate-700 text-[9px] bg-slate-100"; persistData(); }
        function setJacketOrigin(v, b) { data.jacketOrigin = v; document.querySelectorAll('.jacket-origin-btn').forEach(x => x.className = "jacket-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "jacket-origin-btn py-2 border-2 border-slate-500 rounded-lg font-bold text-slate-700 text-[9px] bg-slate-100"; persistData(); }
        // Denim jacket
        function setDenimJacketBrand(v, b) { data.denimJacketBrand = v; document.querySelectorAll('.denim-jkt-brand-btn').forEach(x => x.className = "denim-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "denim-jkt-brand-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[8px] bg-indigo-50"; persistData(); }
        function setDenimJacketLevisType(v, b) { data.denimJacketLevisType = v; document.querySelectorAll('.denim-jkt-type-btn').forEach(x => x.className = "denim-jkt-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "denim-jkt-type-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[8px] bg-indigo-50"; persistData(); }
        function setDenimJacketTab(v, b) { data.denimJacketTab = v; document.querySelectorAll('.denim-jkt-tab-btn').forEach(x => x.className = "denim-jkt-tab-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "denim-jkt-tab-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[8px] bg-indigo-50"; persistData(); }
        function setDenimJacketLining(v, b) { data.denimJacketLining = v; document.querySelectorAll('.denim-jkt-lining-btn').forEach(x => x.className = "denim-jkt-lining-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "denim-jkt-lining-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[9px] bg-indigo-50"; persistData(); }
        function setDenimJacketEra(v, b) { data.denimJacketEra = v; document.querySelectorAll('.denim-jkt-era-btn').forEach(x => x.className = "denim-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "denim-jkt-era-btn py-2 border-2 border-indigo-500 rounded-lg font-bold text-indigo-700 text-[8px] bg-indigo-50"; persistData(); }
        // Varsity jacket
        function setVarsityBody(v, b) { data.varsityBody = v; document.querySelectorAll('.varsity-body-btn').forEach(x => x.className = "varsity-body-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "varsity-body-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function setVarsitySleeve(v, b) { data.varsitySleeve = v; document.querySelectorAll('.varsity-sleeve-btn').forEach(x => x.className = "varsity-sleeve-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "varsity-sleeve-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function setVarsityPatches(v, b) { data.varsityPatches = v; document.querySelectorAll('.varsity-patch-btn').forEach(x => x.className = "varsity-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "varsity-patch-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function setVarsityEra(v, b) { data.varsityEra = v; document.querySelectorAll('.varsity-era-btn').forEach(x => x.className = "varsity-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "varsity-era-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        // Bomber jacket
        function setBomberType(v, b) { data.bomberType = v; document.querySelectorAll('.bomber-type-btn').forEach(x => x.className = "bomber-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "bomber-type-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[8px] bg-green-50"; persistData(); }
        function setBomberIssue(v, b) { data.bomberIssue = v; document.querySelectorAll('.bomber-issue-btn').forEach(x => x.className = "bomber-issue-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bomber-issue-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        function setBomberPatches(v, b) { data.bomberPatches = v; document.querySelectorAll('.bomber-patch-btn').forEach(x => x.className = "bomber-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bomber-patch-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        function setBomberEra(v, b) { data.bomberEra = v; document.querySelectorAll('.bomber-era-btn').forEach(x => x.className = "bomber-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "bomber-era-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        // Leather jacket
        function setLeatherStyle(v, b) { data.leatherStyle = v; document.querySelectorAll('.leather-style-btn').forEach(x => x.className = "leather-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "leather-style-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[8px] bg-stone-100"; persistData(); }
        function setLeatherBrand(v, b) { data.leatherBrand = v; document.querySelectorAll('.leather-brand-btn').forEach(x => x.className = "leather-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "leather-brand-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[8px] bg-stone-100"; persistData(); }
        function toggleLeatherFeature(v, b) { if(!data.leatherFeatures) data.leatherFeatures = []; const i = data.leatherFeatures.indexOf(v); if(i > -1) { data.leatherFeatures.splice(i, 1); b.className = "leather-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"; } else { data.leatherFeatures.push(v); b.className = "leather-feat-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[8px] bg-stone-100"; } persistData(); }
        // Track jacket
        function setTrackJacketBrand(v, b) { data.trackJacketBrand = v; document.querySelectorAll('.track-jkt-brand-btn').forEach(x => x.className = "track-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "track-jkt-brand-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[8px] bg-blue-50"; persistData(); }
        function setTrackJacketStyle(v, b) { data.trackJacketStyle = v; document.querySelectorAll('.track-jkt-style-btn').forEach(x => x.className = "track-jkt-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "track-jkt-style-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setTrackJacketEra(v, b) { data.trackJacketEra = v; document.querySelectorAll('.track-jkt-era-btn').forEach(x => x.className = "track-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "track-jkt-era-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        // Ski jacket
        function setSkiJacketBrand(v, b) { data.skiJacketBrand = v; document.querySelectorAll('.ski-jkt-brand-btn').forEach(x => x.className = "ski-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "ski-jkt-brand-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[8px] bg-cyan-50"; persistData(); }
        function setSkiJacketFill(v, b) { data.skiJacketFill = v; document.querySelectorAll('.ski-jkt-fill-btn').forEach(x => x.className = "ski-jkt-fill-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "ski-jkt-fill-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[9px] bg-cyan-50"; persistData(); }
        function setSkiJacketEra(v, b) { data.skiJacketEra = v; document.querySelectorAll('.ski-jkt-era-btn').forEach(x => x.className = "ski-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "ski-jkt-era-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[9px] bg-cyan-50"; persistData(); }
        // Work jacket
        function setWorkJacketBrand(v, b) { data.workJacketBrand = v; document.querySelectorAll('.work-jkt-brand-btn').forEach(x => x.className = "work-jkt-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "work-jkt-brand-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[8px] bg-amber-50"; persistData(); }
        function setWorkJacketStyle(v, b) { data.workJacketStyle = v; document.querySelectorAll('.work-jkt-style-btn').forEach(x => x.className = "work-jkt-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "work-jkt-style-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        function setWorkJacketLining(v, b) { data.workJacketLining = v; document.querySelectorAll('.work-jkt-lining-btn').forEach(x => x.className = "work-jkt-lining-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "work-jkt-lining-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        // Racing jacket
        function setRacingJktType(v, b) { data.racingJktType = v; document.querySelectorAll('.racing-jkt-type-btn').forEach(x => x.className = "racing-jkt-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "racing-jkt-type-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function setRacingJktPatches(v, b) { data.racingJktPatches = v; document.querySelectorAll('.racing-jkt-patch-btn').forEach(x => x.className = "racing-jkt-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "racing-jkt-patch-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        function setRacingJktEra(v, b) { data.racingJktEra = v; document.querySelectorAll('.racing-jkt-era-btn').forEach(x => x.className = "racing-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "racing-jkt-era-btn py-2 border-2 border-red-500 rounded-lg font-bold text-red-700 text-[9px] bg-red-50"; persistData(); }
        // Starter jacket
        function setStarterBrand(v, b) { data.starterBrand = v; document.querySelectorAll('.starter-brand-btn').forEach(x => x.className = "starter-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "starter-brand-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[8px] bg-violet-50"; persistData(); }
        function setStarterLeague(v, b) { data.starterLeague = v; document.querySelectorAll('.starter-league-btn').forEach(x => x.className = "starter-league-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "starter-league-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[8px] bg-violet-50"; persistData(); }
        function setStarterStyle(v, b) { data.starterStyle = v; document.querySelectorAll('.starter-style-btn').forEach(x => x.className = "starter-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "starter-style-btn py-2 border-2 border-violet-500 rounded-lg font-bold text-violet-700 text-[9px] bg-violet-50"; persistData(); }
        // Windbreaker
        function setWindbreakerStyle(v, b) { data.windbreakerStyle = v; document.querySelectorAll('.wind-style-btn').forEach(x => x.className = "wind-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "wind-style-btn py-2 border-2 border-sky-500 rounded-lg font-bold text-sky-700 text-[9px] bg-sky-50"; persistData(); }
        function setWindbreakerEra(v, b) { data.windbreakerEra = v; document.querySelectorAll('.wind-era-btn').forEach(x => x.className = "wind-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "wind-era-btn py-2 border-2 border-sky-500 rounded-lg font-bold text-sky-700 text-[9px] bg-sky-50"; persistData(); }
        // Harrington
        function setHarringtonBrand(v, b) { data.harringtonBrand = v; document.querySelectorAll('.harrington-brand-btn').forEach(x => x.className = "harrington-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "harrington-brand-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        function setHarringtonOrigin(v, b) { data.harringtonOrigin = v; document.querySelectorAll('.harrington-origin-btn').forEach(x => x.className = "harrington-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "harrington-origin-btn py-2 border-2 border-emerald-500 rounded-lg font-bold text-emerald-700 text-[9px] bg-emerald-50"; persistData(); }
        // Band jacket
        function setBandJacketStyle(v, b) { data.bandJacketStyle = v; document.querySelectorAll('.band-jkt-style-btn').forEach(x => x.className = "band-jkt-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "band-jkt-style-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        function setBandJacketEra(v, b) { data.bandJacketEra = v; document.querySelectorAll('.band-jkt-era-btn').forEach(x => x.className = "band-jkt-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "band-jkt-era-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        
        // ========== COAT HANDLERS ==========
        function setCoatType(type, btn) {
            data.coatType = type;
            document.querySelectorAll('.btn-coat-type').forEach(b => b.className = "btn-coat-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-coat-type py-3 border-2 border-gray-500 rounded-xl font-bold text-gray-700 text-xs bg-gray-100 transition-all flex flex-col items-center shadow-md";
            hideAllCoatDetails();
            document.getElementById('coat-universal-fields').classList.remove('hidden');
            const sectionMap = { 'Trench': 'trench-coat-details', 'Peacoat': 'peacoat-details', 'Parka': 'parka-details' };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            persistData();
        }
        function hideAllCoatDetails() {
            const el = document.getElementById('coat-universal-fields'); if (el) el.classList.add('hidden');
            ['trench-coat-details', 'peacoat-details', 'parka-details'].forEach(id => { const el = document.getElementById(id); if (el) el.classList.add('hidden'); });
        }
        function setCoatLength(v, b) { data.coatLength = v; document.querySelectorAll('.coat-len-btn').forEach(x => x.className = "coat-len-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "coat-len-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        function setCoatOrigin(v, b) { data.coatOrigin = v; document.querySelectorAll('.coat-origin-btn').forEach(x => x.className = "coat-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "coat-origin-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        // Trench
        function setTrenchBrand(v, b) { data.trenchBrand = v; document.querySelectorAll('.trench-brand-btn').forEach(x => x.className = "trench-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "trench-brand-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; persistData(); }
        function toggleTrenchFeature(v, b) { if(!data.trenchFeatures) data.trenchFeatures = []; const i = data.trenchFeatures.indexOf(v); if(i > -1) { data.trenchFeatures.splice(i, 1); b.className = "trench-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } else { data.trenchFeatures.push(v); b.className = "trench-feat-btn py-2 border-2 border-yellow-500 rounded-lg font-bold text-yellow-700 text-[9px] bg-yellow-50"; } persistData(); }
        // Peacoat
        function setPeacoatIssue(v, b) { data.peacoatIssue = v; document.querySelectorAll('.peacoat-issue-btn').forEach(x => x.className = "peacoat-issue-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "peacoat-issue-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setPeacoatEra(v, b) { data.peacoatEra = v; document.querySelectorAll('.peacoat-era-btn').forEach(x => x.className = "peacoat-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "peacoat-era-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setPeacoatButtons(v, b) { data.peacoatButtons = v; document.querySelectorAll('.peacoat-btn-btn').forEach(x => x.className = "peacoat-btn-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "peacoat-btn-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        // Parka
        function setParkaType(v, b) { data.parkaType = v; document.querySelectorAll('.parka-type-btn').forEach(x => x.className = "parka-type-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "parka-type-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[8px] bg-green-50"; persistData(); }
        function setParkaIssue(v, b) { data.parkaIssue = v; document.querySelectorAll('.parka-issue-btn').forEach(x => x.className = "parka-issue-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "parka-issue-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        function setParkaHood(v, b) { data.parkaHood = v; document.querySelectorAll('.parka-hood-btn').forEach(x => x.className = "parka-hood-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "parka-hood-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        
        // ========== HOODIE HANDLERS ==========
        function setHoodieType(type, btn) {
            data.hoodieType = type;
            document.querySelectorAll('.btn-hoodie-type').forEach(b => b.className = "btn-hoodie-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-hoodie-type py-3 border-2 border-orange-500 rounded-xl font-bold text-orange-700 text-xs bg-orange-50 transition-all flex flex-col items-center shadow-md";
            hideAllHoodieDetails();
            document.getElementById('hoodie-universal-fields').classList.remove('hidden');
            const sectionMap = { 'Vintage': 'vintage-hoodie-details', 'Y2K': 'y2k-hoodie-details' };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            persistData();
        }
        function hideAllHoodieDetails() {
            const el = document.getElementById('hoodie-universal-fields'); if (el) el.classList.add('hidden');
            ['vintage-hoodie-details', 'y2k-hoodie-details'].forEach(id => { const el = document.getElementById(id); if (el) el.classList.add('hidden'); });
        }
        function setHoodieClosure(v, b) { data.hoodieClosure = v; document.querySelectorAll('.hoodie-closure-btn').forEach(x => x.className = "hoodie-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "hoodie-closure-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function setHoodieOrigin(v, b) { data.hoodieOrigin = v; document.querySelectorAll('.hoodie-origin-btn').forEach(x => x.className = "hoodie-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "hoodie-origin-btn py-2 border-2 border-orange-500 rounded-lg font-bold text-orange-700 text-[9px] bg-orange-50"; persistData(); }
        function setVintageHoodieBrand(v, b) { data.vintageHoodieBrand = v; document.querySelectorAll('.vtg-hoodie-brand-btn').forEach(x => x.className = "vtg-hoodie-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "vtg-hoodie-brand-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        function setVintageHoodieStyle(v, b) { data.vintageHoodieStyle = v; document.querySelectorAll('.vtg-hoodie-style-btn').forEach(x => x.className = "vtg-hoodie-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "vtg-hoodie-style-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        function setY2KHoodieBrand(v, b) { data.y2kHoodieBrand = v; document.querySelectorAll('.y2k-hoodie-brand-btn').forEach(x => x.className = "y2k-hoodie-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "y2k-hoodie-brand-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[9px] bg-pink-50"; persistData(); }
        function setY2KHoodieStyle(v, b) { data.y2kHoodieStyle = v; document.querySelectorAll('.y2k-hoodie-style-btn').forEach(x => x.className = "y2k-hoodie-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "y2k-hoodie-style-btn py-2 border-2 border-pink-500 rounded-lg font-bold text-pink-700 text-[9px] bg-pink-50"; persistData(); }
        
        // ========== SWEATSHIRT HANDLERS ==========
        function setSweatshirtType(type, btn) {
            data.sweatshirtType = type;
            document.querySelectorAll('.btn-sweatshirt-type').forEach(b => b.className = "btn-sweatshirt-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-sweatshirt-type py-3 border-2 border-rose-500 rounded-xl font-bold text-rose-700 text-xs bg-rose-50 transition-all flex flex-col items-center shadow-md";
            hideAllSweatshirtDetails();
            document.getElementById('sweatshirt-universal-fields').classList.remove('hidden');
            if (type === 'Vintage') document.getElementById('vintage-sweatshirt-details').classList.remove('hidden');
            persistData();
        }
        function hideAllSweatshirtDetails() {
            const el = document.getElementById('sweatshirt-universal-fields'); if (el) el.classList.add('hidden');
            ['vintage-sweatshirt-details'].forEach(id => { const el = document.getElementById(id); if (el) el.classList.add('hidden'); });
        }
        function setSweatshirtNeck(v, b) { data.sweatshirtNeck = v; document.querySelectorAll('.sweatshirt-neck-btn').forEach(x => x.className = "sweatshirt-neck-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "sweatshirt-neck-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        function setSweatshirtOrigin(v, b) { data.sweatshirtOrigin = v; document.querySelectorAll('.sweatshirt-origin-btn').forEach(x => x.className = "sweatshirt-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "sweatshirt-origin-btn py-2 border-2 border-rose-500 rounded-lg font-bold text-rose-700 text-[9px] bg-rose-50"; persistData(); }
        function setVintageSweatshirtBrand(v, b) { data.vintageSweatshirtBrand = v; document.querySelectorAll('.vtg-sweat-brand-btn').forEach(x => x.className = "vtg-sweat-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "vtg-sweat-brand-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[8px] bg-gray-100"; persistData(); }
        function setVintageSweatshirtStyle(v, b) { data.vintageSweatshirtStyle = v; document.querySelectorAll('.vtg-sweat-style-btn').forEach(x => x.className = "vtg-sweat-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "vtg-sweat-style-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        function setVintageSweatshirtEra(v, b) { data.vintageSweatshirtEra = v; document.querySelectorAll('.vtg-sweat-era-btn').forEach(x => x.className = "vtg-sweat-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "vtg-sweat-era-btn py-2 border-2 border-gray-500 rounded-lg font-bold text-gray-700 text-[9px] bg-gray-100"; persistData(); }
        
        // ========== SWEATER HANDLERS ==========
        function setSweaterType(type, btn) {
            data.sweaterType = type;
            document.querySelectorAll('.btn-sweater-type').forEach(b => b.className = "btn-sweater-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-sweater-type py-3 border-2 border-purple-500 rounded-xl font-bold text-purple-700 text-xs bg-purple-50 transition-all flex flex-col items-center shadow-md";
            hideAllSweaterDetails();
            document.getElementById('sweater-universal-fields').classList.remove('hidden');
            const sectionMap = { 'FairIsle': 'fairisle-sweater-details', 'Cowichan': 'cowichan-sweater-details', 'Tennis': 'tennis-sweater-details' };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            persistData();
        }
        function hideAllSweaterDetails() {
            const el = document.getElementById('sweater-universal-fields'); if (el) el.classList.add('hidden');
            ['fairisle-sweater-details', 'cowichan-sweater-details', 'tennis-sweater-details'].forEach(id => {
                const el = document.getElementById(id); if (el) el.classList.add('hidden');
            });
        }
        function setSweaterMaterial(v, b) { data.sweaterMaterial = v; document.querySelectorAll('.sweater-mat-btn').forEach(x => x.className = "sweater-mat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "sweater-mat-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        function setSweaterOrigin(v, b) { data.sweaterOrigin = v; document.querySelectorAll('.sweater-origin-btn').forEach(x => x.className = "sweater-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "sweater-origin-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        function setSweaterEra(v, b) { data.sweaterEra = v; document.querySelectorAll('.sweater-era-btn').forEach(x => x.className = "sweater-era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "sweater-era-btn py-2 border-2 border-purple-500 rounded-lg font-bold text-purple-700 text-[9px] bg-purple-50"; persistData(); }
        function setFairIslePattern(v, b) { data.fairIslePattern = v; document.querySelectorAll('.fairisle-pattern-btn').forEach(x => x.className = "fairisle-pattern-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "fairisle-pattern-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setFairIsleOriginStyle(v, b) { data.fairIsleOriginStyle = v; document.querySelectorAll('.fairisle-style-btn').forEach(x => x.className = "fairisle-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "fairisle-style-btn py-2 border-2 border-blue-500 rounded-lg font-bold text-blue-700 text-[9px] bg-blue-50"; persistData(); }
        function setCowichanStyle(v, b) { data.cowichanStyle = v; document.querySelectorAll('.cowichan-style-btn').forEach(x => x.className = "cowichan-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cowichan-style-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        function setCowichanHandknit(v, b) { data.cowichanHandknit = v; document.querySelectorAll('.cowichan-knit-btn').forEach(x => x.className = "cowichan-knit-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cowichan-knit-btn py-2 border-2 border-amber-500 rounded-lg font-bold text-amber-700 text-[9px] bg-amber-50"; persistData(); }
        function setTennisSweaterBrand(v, b) { data.tennisSweaterBrand = v; document.querySelectorAll('.tennis-brand-btn').forEach(x => x.className = "tennis-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "tennis-brand-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[8px] bg-green-50"; persistData(); }
        function setTennisSweaterStyle(v, b) { data.tennisSweaterStyle = v; document.querySelectorAll('.tennis-style-btn').forEach(x => x.className = "tennis-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "tennis-style-btn py-2 border-2 border-green-500 rounded-lg font-bold text-green-700 text-[9px] bg-green-50"; persistData(); }
        
        // ========== CARDIGAN HANDLERS ==========
        function setCardiganType(type, btn) {
            data.cardiganType = type;
            document.querySelectorAll('.btn-cardigan-type').forEach(b => b.className = "btn-cardigan-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-cardigan-type py-3 border-2 border-teal-500 rounded-xl font-bold text-teal-700 text-xs bg-teal-50 transition-all flex flex-col items-center shadow-md";
            document.getElementById('cardigan-universal-fields').classList.remove('hidden');
            persistData();
        }
        function hideAllCardiganDetails() {
            const el = document.getElementById('cardigan-universal-fields'); if (el) el.classList.add('hidden');
        }
        function setCardiganStyle(v, b) { data.cardiganStyle = v; document.querySelectorAll('.cardigan-style-btn').forEach(x => x.className = "cardigan-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cardigan-style-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        function setCardiganMaterial(v, b) { data.cardiganMaterial = v; document.querySelectorAll('.cardigan-mat-btn').forEach(x => x.className = "cardigan-mat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cardigan-mat-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        function setCardiganOrigin(v, b) { data.cardiganOrigin = v; document.querySelectorAll('.cardigan-origin-btn').forEach(x => x.className = "cardigan-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "cardigan-origin-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; persistData(); }
        function toggleCardiganFeature(v, b) { if(!data.cardiganFeatures) data.cardiganFeatures = []; const i = data.cardiganFeatures.indexOf(v); if(i > -1) { data.cardiganFeatures.splice(i, 1); b.className = "cardigan-feat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"; } else { data.cardiganFeatures.push(v); b.className = "cardigan-feat-btn py-2 border-2 border-teal-500 rounded-lg font-bold text-teal-700 text-[9px] bg-teal-50"; } persistData(); }
        
        // ========== VEST HANDLERS ==========
        function setVestType(type, btn) {
            data.vestType = type;
            document.querySelectorAll('.btn-vest-type').forEach(b => b.className = "btn-vest-type py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 text-xs bg-white transition-all flex flex-col items-center");
            if (btn) btn.className = "btn-vest-type py-3 border-2 border-lime-500 rounded-xl font-bold text-lime-700 text-xs bg-lime-50 transition-all flex flex-col items-center shadow-md";
            hideAllVestDetails();
            document.getElementById('vest-universal-fields').classList.remove('hidden');
            const sectionMap = { 'Leather': 'leather-vest-details', 'Puffer': 'puffer-vest-details' };
            if (sectionMap[type]) document.getElementById(sectionMap[type]).classList.remove('hidden');
            persistData();
        }
        function hideAllVestDetails() {
            const el = document.getElementById('vest-universal-fields'); if (el) el.classList.add('hidden');
            ['leather-vest-details', 'puffer-vest-details'].forEach(id => { const el = document.getElementById(id); if (el) el.classList.add('hidden'); });
        }
        function setVestClosure(v, b) { data.vestClosure = v; document.querySelectorAll('.vest-closure-btn').forEach(x => x.className = "vest-closure-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "vest-closure-btn py-2 border-2 border-lime-500 rounded-lg font-bold text-lime-700 text-[9px] bg-lime-50"; persistData(); }
        function setVestOrigin(v, b) { data.vestOrigin = v; document.querySelectorAll('.vest-origin-btn').forEach(x => x.className = "vest-origin-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "vest-origin-btn py-2 border-2 border-lime-500 rounded-lg font-bold text-lime-700 text-[9px] bg-lime-50"; persistData(); }
        function setLeatherVestStyle(v, b) { data.leatherVestStyle = v; document.querySelectorAll('.leather-vest-style-btn').forEach(x => x.className = "leather-vest-style-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "leather-vest-style-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[9px] bg-stone-100"; persistData(); }
        function setLeatherVestPatches(v, b) { data.leatherVestPatches = v; document.querySelectorAll('.leather-vest-patch-btn').forEach(x => x.className = "leather-vest-patch-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "leather-vest-patch-btn py-2 border-2 border-stone-500 rounded-lg font-bold text-stone-700 text-[9px] bg-stone-100"; persistData(); }
        function setPufferVestBrand(v, b) { data.pufferVestBrand = v; document.querySelectorAll('.puffer-vest-brand-btn').forEach(x => x.className = "puffer-vest-brand-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[8px] bg-white"); if(b) b.className = "puffer-vest-brand-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[8px] bg-cyan-50"; persistData(); }
        function setPufferVestFill(v, b) { data.pufferVestFill = v; document.querySelectorAll('.puffer-vest-fill-btn').forEach(x => x.className = "puffer-vest-fill-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-600 text-[9px] bg-white"); if(b) b.className = "puffer-vest-fill-btn py-2 border-2 border-cyan-500 rounded-lg font-bold text-cyan-700 text-[9px] bg-cyan-50"; persistData(); }
        
        function updateBrandDropdownForJersey(type) {
            const brandSelect = document.getElementById('brand-select');
            if (!brandSelect) return;
            const brandLists = {
                'Baseball': ['Russell Athletic', 'Wilson', 'Rawlings', 'Majestic', 'Mitchell & Ness', 'Starter', 'Nike', 'New Era', 'Ebbets Field', 'Sand-Knit', 'Powers', 'MacGregor'],
                'Basketball': ['Champion', 'Sand-Knit', 'MacGregor', 'Russell Athletic', 'Mitchell & Ness', 'Starter', 'Nike', 'Adidas', 'Reebok', 'Spalding'],
                'Football': ['Russell Athletic', 'Champion', 'Rawlings', 'Wilson', 'Starter', 'Mitchell & Ness', 'Nike', 'Reebok', 'Riddell', 'Logo Athletic'],
                'Hockey': ['CCM', 'Starter', 'Koho', 'Pro Player', 'Mitchell & Ness', 'Reebok', 'Adidas', 'Nike', 'Bauer'],
                'Soccer': ['Adidas', 'Nike', 'Puma', 'Umbro', 'Kappa', 'Le Coq Sportif', 'Hummel', 'Lotto', 'Diadora'],
                'Cycling': ['Castelli', 'Santini', 'Giordana', 'Pearl Izumi', 'Campagnolo', 'Peugeot', 'Molteni', 'La Vie Claire'],
                'Racing': ['Fox Racing', 'Alpinestars', 'Answer', 'JT Racing', 'Axo', 'Thor', 'Simpson'],
                'Athletic': ['Russell Athletic', 'Champion', 'Augusta', 'A4', 'Badger', 'Alleson']
            };
            const brands = brandLists[type] || brandLists['Baseball'];
            const defaultOpts = '<option value="">Select Brand...</option><option value="custom">Other (type below)</option>';
            const brandOpts = brands.map(b => `<option value="${b}">${b}</option>`).join('');
            brandSelect.innerHTML = defaultOpts + brandOpts;
            brandSelect.value = '';
            data.brand = '';
        }
        
        // Weight hint update for jersey types
        function updateWeightHintForJersey(type) {
            const hintEl = document.getElementById('weight-hint');
            if (!hintEl) return;
            const hints = {
                'Baseball': 'Flannel: 14-20oz ‚Ä¢ Poly: 8-14oz ‚Ä¢ Mesh: 6-10oz',
                'Basketball': 'Heavy Mesh: 8-12oz ‚Ä¢ Light: 5-8oz',
                'Football': 'Authentic: 12-18oz ‚Ä¢ Replica: 8-12oz ‚Ä¢ Practice: 6-10oz',
                'Hockey': 'Authentic: 28-40oz ‚Ä¢ Replica: 18-26oz',
                'Soccer': 'Authentic: 5-7oz ‚Ä¢ Replica: 6-9oz',
                'Cycling': 'Wool: 6-10oz ‚Ä¢ Poly: 4-7oz',
                'Racing': 'Typical: 8-14oz',
                'Athletic': 'Typical: 4-8oz'
            };
            hintEl.textContent = hints[type] || 'Typical: 8-16oz';
        }
        
        // Brand dropdown update for polo shirt types
        function updateBrandDropdownForPolo(type) {
            const brandSelect = document.getElementById('brand-select');
            if (!brandSelect) return;
            const brandLists = {
                'Classic': ['Izod Lacoste', 'Polo Ralph Lauren', 'Tommy Hilfiger', 'Nautica', 'Gap', 'Jantzen', 'Adidas', 'Nike', 'Le Tigre', 'Brooks Brothers', 'Gitman', 'Arrow', 'Sears', 'JC Penney'],
                'Rugby': ['Ralph Lauren Rugby', 'Polo Ralph Lauren', "Lands' End", 'L.L. Bean', 'Brooks Brothers', 'Umbro', 'Canterbury', 'Barbarian', 'Jams World']
            };
            let optgroup = brandSelect.querySelector('optgroup[label="Polo Brands"]');
            if (optgroup) optgroup.remove();
            const brands = brandLists[type] || [];
            if (brands.length > 0) {
                optgroup = document.createElement('optgroup');
                optgroup.label = 'Polo Brands';
                brands.forEach(b => { const opt = document.createElement('option'); opt.value = b; opt.textContent = b; optgroup.appendChild(opt); });
                brandSelect.insertBefore(optgroup, brandSelect.firstChild.nextSibling);
            }
        }
        
        // Brand dropdown update for button shirt types
        function updateBrandDropdownForButtonShirt(type) {
            const brandSelect = document.getElementById('brand-select');
            if (!brandSelect) return;
            const brandLists = {
                'Western': ['Wrangler', 'H Bar C', 'Rockmount Ranch Wear', 'Panhandle Slim', "Levi's Western", 'Ely Cattleman', 'Karman', 'Tem-Tex', 'Roper'],
                'Dress': ['Brooks Brothers', 'Arrow', 'Gitman Bros', 'Van Heusen', 'Gant', 'Christian Dior', 'Polo Ralph Lauren', 'J. Press', 'Hathaway'],
                'Camp': ['Reyn Spooner', 'Duke Kahanamoku', 'Kahala', 'Hilo Hattie', 'Jams World', 'McGregor', 'Catalina', 'Royal Hawaiian', 'Tori Richard'],
                'Flannel': ['Pendleton', 'Woolrich', 'Five Brother', 'Field & Stream', 'L.L. Bean', "Cabela's", 'Sears', 'Big Mac', 'Carhartt'],
                'Work': ['Dickies', 'Big Mac', 'Red Kap', 'Carhartt', 'Big Ben', 'Wrangler Workwear', 'Ben Davis', 'Walls', 'Cintas'],
                'Casual': ['Chaps', 'OP', 'Quiksilver', 'Gap', 'Banana Republic', 'Tommy Bahama', 'Eddie Bauer', 'Dockers']
            };
            let optgroup = brandSelect.querySelector('optgroup[label="Button Shirt Brands"]');
            if (optgroup) optgroup.remove();
            const brands = brandLists[type] || [];
            if (brands.length > 0) {
                optgroup = document.createElement('optgroup');
                optgroup.label = 'Button Shirt Brands';
                brands.forEach(b => { const opt = document.createElement('option'); opt.value = b; opt.textContent = b; optgroup.appendChild(opt); });
                brandSelect.insertBefore(optgroup, brandSelect.firstChild.nextSibling);
            }
        }
        
        function updateTagLabels(category) {
            const btnNeck = document.getElementById('btn-snap-neck');
            const btnCare = document.getElementById('btn-snap-care');
            if (!btnNeck || !btnCare) return;
            
            // Check if bottoms category
            const isBottoms = ['Jeans', 'Pants', 'Shorts', 'Sweatpants', 'Overalls', 'Jumpsuit'].some(b => category && category.includes(b));
            
            // Only update if not already showing checkmark (photo taken)
            if (!btnNeck.innerHTML.includes('‚úì')) {
                if (isBottoms) {
                    btnNeck.innerHTML = '<i data-lucide="camera" class="w-6 h-6"></i><span class="text-xs">INSIDE TAG</span>';
                } else {
                    btnNeck.innerHTML = '<i data-lucide="camera" class="w-6 h-6"></i><span class="text-xs">NECK TAG</span>';
                }
            }
            if (!btnCare.innerHTML.includes('‚úì')) {
                btnCare.innerHTML = '<i data-lucide="camera" class="w-6 h-6"></i><span class="text-xs">CARE TAG</span>';
            }
            if(typeof lucide !== 'undefined') lucide.createIcons();
        }
        
        function applyCategoryDefaults(category) {
            // Jeans defaults
            if (category === 'Jeans') {
                // Set fabric to Denim
                document.getElementById('fabric-select').value = 'Denim';
                // Set primary color to Blue
                data.colorPrimary = 'Blue';
                document.getElementById('color-primary').value = 'Blue';
            }
        }
        
        function autoSelectGender(category) {
            // Women-specific categories
            const womenCategories = ['Tunic', 'Blouse', 'Camisole', 'Bodysuit'];
            const isWomenCategory = womenCategories.some(w => category && category.includes(w));
            
            if(isWomenCategory) {
                setGenderSilent('Women');
            } else {
                setGenderSilent('Men');
            }
        }
        
        function setGenderSilent(g) {
            // Set gender without scrolling (for auto-selection)
            data.gender = g;
            document.querySelectorAll('.g-btn').forEach(b => {
                if(b.innerText === g) {
                    b.className = "g-btn w-full py-3 rounded-xl font-bold text-xs btn-selected";
                } else {
                    b.className = "g-btn w-full py-3 rounded-xl font-bold text-xs btn-default";
                }
            });
            persistData();
        }
        
        function updateFeatureButtons(category) {
            const container = document.getElementById('features-container');
            const hint = document.getElementById('feature-hint');
            container.innerHTML = '';
            if(!category) { hint.innerText = "Select Category First"; return; }
            hint.innerText = category; 
            let key = "default";
            for (const k in featuresMap) { if (category.includes(k) || k.includes(category)) { key = k; break; } }
            if (category === 'Pants' && !featuresMap[category]) key = 'Pants';
            const features = featuresMap[key] || featuresMap["default"];
            features.forEach(feat => {
                const btn = document.createElement('button');
                const hasPhoto = data.featurePhotos.some(p => p.featureName === feat);
                btn.id = `feature-btn-${feat.replace(/[^a-zA-Z0-9]/g, '_')}`;
                if (hasPhoto) {
                    btn.className = "py-3 px-2 border-2 border-green-500 bg-green-50 text-green-700 rounded-lg text-[11px] font-bold transition-all flex flex-col items-center justify-center text-center leading-tight shadow-sm";
                    btn.innerHTML = `<span class="mb-1">${feat}</span><span class="text-green-500 text-sm">‚úì</span>`;
                } else {
                    btn.className = "py-3 px-2 border border-indigo-100 bg-indigo-50 text-indigo-700 rounded-lg text-[11px] font-bold active:bg-indigo-100 active:scale-95 transition-all flex flex-col items-center justify-center text-center leading-tight shadow-sm";
                    btn.innerHTML = `<span class="mb-1">${feat}</span><i data-lucide="camera" class="w-3 h-3 opacity-50"></i>`;
                }
                btn.onclick = () => openCamera('feature', feat);
                container.appendChild(btn);
            });
            lucide.createIcons();
        }
        
        function updateBottomsStyles() {
            const cat = document.getElementById('cat-select').value;
            const container = document.getElementById('bottoms-style-grid');
            container.innerHTML = '';
            const styles = bottomsStyleMap[cat] || ["Regular", "Other"];
            data.bottomsStyle = styles[0];
            styles.forEach(style => {
                const btn = document.createElement('button');
                const isActive = style === styles[0];
                btn.className = `py-2 px-1 rounded-lg font-medium text-[11px] border ${isActive ? 'btn-selected' : 'btn-default'}`;
                btn.innerText = style;
                btn.onclick = function() {
                    Array.from(container.children).forEach(c => c.className = "py-2 px-1 rounded-lg font-medium text-[11px] border btn-default");
                    this.className = "py-2 px-1 rounded-lg font-medium text-[11px] border btn-selected";
                    data.bottomsStyle = style;
                    persistData();
                    // scrollToNext('section-gender'); 
                };
                container.appendChild(btn);
            });
        }
        
        function autoSelectSleeve() {
            const cat = document.getElementById('cat-select').value;
            if(cat.includes("Hoodie") || cat.includes("Sweat") || cat.includes("Jacket") || cat.includes("Cardigan") || cat.includes("Button") || cat.includes("Coat") || cat.includes("Windbreaker")) {
                setSleeve('Long', document.getElementById('btn-sleeve-long'));
            } else if (cat.includes("Tank") || cat.includes("Vest")) {
                setSleeve('None', document.getElementById('btn-sleeve-none'));
            } else {
                setSleeve('Short', document.getElementById('btn-sleeve-short'));
            }
        }

        function setSleeve(type, el) {
            data.sleeveType = type;
            document.querySelectorAll('.sleeve-btn').forEach(b => b.className = "sleeve-btn w-full py-3 rounded-md font-bold text-xs btn-default");
            if(el) el.className = "sleeve-btn w-full py-3 rounded-md font-bold text-xs btn-selected";
            
            // Show/hide sleeve style selector based on whether item has sleeves
            const styleSelector = document.getElementById('sleeve-style-selector');
            const cutoffSection = document.getElementById('cutoff-section');
            const cat = document.getElementById('cat-select').value;
            
            if (type === 'None') {
                styleSelector.classList.add('hidden');
                data.sleeveStyle = 'N/A';
                
                // Show cut-off section only for T-Shirts
                if (cat === 'T-Shirt' && cutoffSection) {
                    cutoffSection.classList.remove('hidden');
                } else if (cutoffSection) {
                    cutoffSection.classList.add('hidden');
                    data.isCutOff = false;
                    data.cutOffArmhole = '';
                }
            } else {
                styleSelector.classList.remove('hidden');
                // Hide cut-off section when sleeves exist
                if (cutoffSection) {
                    cutoffSection.classList.add('hidden');
                    data.isCutOff = false;
                    data.cutOffArmhole = '';
                }
                // Reset to Standard if was N/A
                if (data.sleeveStyle === 'N/A') {
                    data.sleeveStyle = 'Standard';
                    setSleeveStyle('Standard', document.getElementById('btn-style-standard'));
                }
            }
            
            renderDefectMaps();
            persistData();
        }
        
        function setSleeveStyle(style, el) {
            data.sleeveStyle = style;
            document.querySelectorAll('.style-btn').forEach(b => b.className = "style-btn py-2 rounded-lg font-bold text-[10px] btn-default");
            if(el) el.className = "style-btn py-2 rounded-lg font-bold text-[10px] btn-selected";
            
            // Show/hide raglan notice
            const notice = document.getElementById('raglan-notice');
            if (style === 'Raglan' || style === 'Dolman') {
                notice.classList.remove('hidden');
            } else {
                notice.classList.add('hidden');
            }
            
            persistData();
        }

        function toggleFit(fit, el) {
            // Single select - only one fit at a time
            data.fitTypes = [fit];
            document.querySelectorAll('.fit-btn').forEach(b => b.className = "fit-btn py-2 rounded-lg font-medium text-[11px] btn-default");
            el.className = "fit-btn py-2 rounded-lg font-medium text-[11px] btn-selected";
            persistData();
        }

        function setGender(g, el) { 
            data.gender = g; 
            document.querySelectorAll('.g-btn').forEach(b => b.className = "g-btn w-full py-3 rounded-xl font-bold text-xs btn-default"); 
            el.className = "g-btn w-full py-3 rounded-xl font-bold text-xs btn-selected"; 
            persistData();
        }

        function handleFabricChange() {
            const select = document.getElementById('fabric-select');
            const customInput = document.getElementById('custom-blend-input');
            
            if (select.value === 'Custom Blend') {
                customInput.classList.remove('hidden');
                // Reset blend builder
                document.getElementById('blend-mat-1').value = '';
                document.getElementById('blend-pct-1').value = '';
                document.getElementById('blend-mat-2').value = '';
                document.getElementById('blend-pct-2').value = '';
                document.getElementById('blend-mat-3').value = '';
                document.getElementById('blend-pct-3').value = '';
                document.getElementById('blend-row-3').classList.add('hidden');
                document.getElementById('btn-add-mat-3').classList.remove('hidden');
                document.getElementById('fabric-custom').value = '';
                updateBlendPreview();
            } else {
                customInput.classList.add('hidden');
                document.getElementById('fabric-custom').value = '';
            }
            persistData();
        }
        
        function showThirdMaterial() {
            document.getElementById('blend-row-3').classList.remove('hidden');
            document.getElementById('btn-add-mat-3').classList.add('hidden');
        }
        
        function updateBlendPreview() {
            const mat1 = document.getElementById('blend-mat-1').value;
            const pct1 = document.getElementById('blend-pct-1').value;
            const mat2 = document.getElementById('blend-mat-2').value;
            const pct2 = document.getElementById('blend-pct-2').value;
            const mat3 = document.getElementById('blend-mat-3').value;
            const pct3 = document.getElementById('blend-pct-3').value;
            
            const preview = document.getElementById('blend-preview');
            let parts = [];
            
            if (mat1 && pct1) parts.push(`${pct1}% ${mat1}`);
            if (mat2 && pct2) parts.push(`${pct2}% ${mat2}`);
            if (mat3 && pct3) parts.push(`${pct3}% ${mat3}`);
            
            if (parts.length > 0) {
                const blendStr = parts.join(' / ');
                preview.innerHTML = `<span class="text-sm font-bold text-blue-700">${blendStr}</span>`;
                document.getElementById('fabric-custom').value = blendStr;
                
                // Check if percentages add up to 100
                const total = (parseInt(pct1) || 0) + (parseInt(pct2) || 0) + (parseInt(pct3) || 0);
                if (total !== 100 && parts.length > 1) {
                    preview.innerHTML += `<br><span class="text-[9px] text-amber-600">‚ö†Ô∏è Total: ${total}% (should be 100%)</span>`;
                } else if (total === 100) {
                    preview.innerHTML += `<br><span class="text-[9px] text-green-600">‚úì 100%</span>`;
                }
            } else {
                preview.innerHTML = `<span class="text-[10px] text-gray-400">Select materials above</span>`;
                document.getElementById('fabric-custom').value = '';
            }
            
            persistData();
        }
        
        function setThickness(t, el) {
            data.thickness = t;
            document.querySelectorAll('.thickness-btn').forEach(b => {
                b.className = "thickness-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white transition-all flex flex-col items-center";
            });
            if(el) el.className = "thickness-btn py-3 border border-teal-600 bg-teal-50 text-teal-700 rounded-lg font-bold text-[9px] shadow-inner transition-all flex flex-col items-center";
            // Update weight hint based on thickness
            const cat = document.getElementById('cat-select').value;
            if(cat) updateWeightHint(cat);
            persistData();
        }
        
        function setTexture(t, el) {
            data.texture = t;
            document.querySelectorAll('.texture-btn').forEach(b => {
                b.className = "texture-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-xs bg-white transition-all";
            });
            if(el) el.className = "texture-btn py-3 border border-teal-600 bg-teal-50 text-teal-700 rounded-lg font-bold text-xs shadow-inner transition-all";
            persistData();
        }
        
        function setConstruction(c, el) {
            data.construction = c;
            document.querySelectorAll('.construction-btn').forEach(b => {
                b.className = "construction-btn py-3 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white transition-all";
            });
            if(el) el.className = "construction-btn py-3 border border-teal-600 bg-teal-50 text-teal-700 rounded-lg font-bold text-[10px] shadow-inner transition-all";
            
            // Show/hide reversible note
            const note = document.getElementById('reversible-note');
            if (c === 'Reversible' || c === 'Lined') {
                note.classList.remove('hidden');
            } else {
                note.classList.add('hidden');
            }
            
            // Update weight hint
            const cat = document.getElementById('cat-select').value;
            if(cat) updateWeightHint(cat);
            persistData();
        }
        
        function updateWeight() {
            const lb = parseInt(document.getElementById('weight-lb').value) || 0;
            const oz = parseInt(document.getElementById('weight-oz').value) || 0;
            data.itemWeightLb = lb;
            data.itemWeightOz = oz;
            data.itemWeightTotalOz = (lb * 16) + oz;
            persistData();
        }
        
        function updateWeightHint(category) {
            const hintEl = document.getElementById('weight-hint');
            if (!hintEl) return;
            
            // Get current size and thickness
            const tagSize = data.tagSize || '';
            const thickness = data.thickness || 'Standard';
            const construction = data.construction || 'Single';
            
            // Map thickness to weight class
            const thicknessToWeight = {
                'Paper Thin': 'Light',
                'Light': 'Light',
                'Standard': 'Mid',
                'Heavy': 'Heavy'
            };
            const weightClass = thicknessToWeight[thickness] || 'Mid';
            
            // Find matching category in weightTable
            let tableData = null;
            if (category && weightTable[category]) {
                tableData = weightTable[category];
            } else if (category) {
                // Check for partial matches
                for (const key in weightTable) {
                    if (category.includes(key) || key.includes(category)) {
                        tableData = weightTable[key];
                        break;
                    }
                }
            }
            
            // If we have table data and can determine size index
            if (tableData) {
                // Try to get size index from tag size
                let sizeIdx = -1;
                for (const [sizeKey, idx] of Object.entries(sizeIndexMap)) {
                    if (tagSize.toUpperCase().includes(sizeKey)) {
                        sizeIdx = idx;
                        break;
                    }
                }
                
                // Get weight data
                const weights = tableData[weightClass] || tableData['Mid'] || tableData['Light'];
                
                if (weights && sizeIdx >= 0 && sizeIdx < weights.length) {
                    // Show specific weight for this size
                    let expectedOz = weights[sizeIdx];
                    
                    // Double weight for reversible/lined
                    const multiplier = (construction === 'Reversible' || construction === 'Lined') ? 2 : 1;
                    expectedOz = expectedOz * multiplier;
                    
                    const displayWeight = expectedOz >= 32 ? `${(expectedOz/16).toFixed(1)}lb` : `${expectedOz}oz`;
                    const constructionNote = multiplier > 1 ? ' (2x for double layer)' : '';
                    
                    hintEl.innerHTML = `
                        <p class="text-[11px] text-purple-700 font-bold text-center">üí° ${category} (${tagSize}, ${thickness})</p>
                        <p class="text-[13px] text-purple-900 font-black text-center">Expected: ~${displayWeight}${constructionNote}</p>
                        <p class="text-[9px] text-purple-500 text-center mt-1">${tableData.desc || ''}</p>
                    `;
                    return;
                }
                
                // No size selected - show range
                const minW = Math.min(...(tableData['Light'] || tableData['Mid']));
                const maxW = Math.max(...(tableData['Heavy'] || tableData['Mid']));
                const minDisplay = minW >= 32 ? `${(minW/16).toFixed(1)}lb` : `${minW}oz`;
                const maxDisplay = maxW >= 32 ? `${(maxW/16).toFixed(1)}lb` : `${maxW}oz`;
                hintEl.innerHTML = `
                    <p class="text-[11px] text-purple-700 font-bold text-center">üí° ${category}</p>
                    <p class="text-[12px] text-purple-800 font-bold text-center">Range: ${minDisplay} - ${maxDisplay}</p>
                    <p class="text-[9px] text-purple-500 text-center mt-1">${tableData.desc || ''}</p>
                `;
                return;
            }
            
            // Fallback to simple hints
            let hints = weightHintsMap[category] || weightHintsMap["default"];
            if (!hints && category) {
                for (const key in weightHintsMap) {
                    if (key !== 'default' && (category.includes(key) || key.includes(category))) {
                        hints = weightHintsMap[key];
                        break;
                    }
                }
            }
            if (!hints) hints = weightHintsMap["default"];
            
            const hintText = hints && hints.hint ? hints.hint : "Typical range: 6oz-1lb";
            hintEl.innerHTML = `<p class="text-[10px] text-purple-700 font-bold text-center">üí° ${category || 'Item'}: ${hintText}</p>`;
        }
        
        function setEra(era, el) {
            data.era = era;
            document.querySelectorAll('.era-btn').forEach(b => b.className = "era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white");
            if(el) el.className = "era-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[10px] shadow-inner";
            document.getElementById('era-dropdown').classList.add('hidden');
            persistData();
        }
        
        function toggleEraDropdown() {
            const dropdown = document.getElementById('era-dropdown');
            dropdown.classList.toggle('hidden');
        }
        
        function setEraFromDropdown(era) {
            data.era = era;
            document.querySelectorAll('.era-btn').forEach(b => b.className = "era-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[10px] bg-white");
            document.getElementById('btn-era-other').className = "era-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[10px] shadow-inner";
            persistData();
        }
        
        function setPrintType(type, el) {
            data.printType = type;
            document.querySelectorAll('.print-btn').forEach(b => b.className = "print-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white");
            if(el) el.className = "print-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[9px] shadow-inner";
            
            // Show/hide print condition and graphic category based on print type
            const hasPrint = type !== 'N/A';
            document.getElementById('print-condition-section').classList.toggle('hidden', !hasPrint);
            
            persistData();
        }
        
        function handlePatternChange() {
            const pattern = document.getElementById('pattern-select').value;
            data.pattern = pattern;
            
            // Smart defaults based on pattern
            const noPrintPatterns = ['Solid', 'Striped', 'Plaid', 'Check', 'Tie Dye', 'Colorblock', 'Argyle/Diamond', 'Fair Isle', 'Herringbone', 'Houndstooth'];
            const graphicPatterns = ['Graphic Print', 'Abstract', 'Animal Print', 'Camouflage'];
            
            // Show/hide graphic category section
            const showGraphicCategory = graphicPatterns.includes(pattern) || pattern === 'Other';
            document.getElementById('graphic-category-section').classList.toggle('hidden', !showGraphicCategory);
            
            if (noPrintPatterns.includes(pattern)) {
                // Auto-select N/A for patterns that don't have prints
                setPrintType('N/A', document.getElementById('btn-print-NA'));
                document.getElementById('print-condition-section').classList.add('hidden');
            } else if (pattern === 'Embroidered') {
                // Auto-select Embroidered
                setPrintType('Embroidered', document.getElementById('btn-print-Embroidered'));
            } else if (graphicPatterns.includes(pattern)) {
                // Auto-select Screen Print for graphic patterns
                setPrintType('Screen', document.getElementById('btn-print-Screen'));
                document.getElementById('print-condition-section').classList.remove('hidden');
            }
            
            persistData();
        }
        
        function setGraphicCategory(cat, el) {
            data.graphicCategory = cat;
            document.querySelectorAll('.graphic-cat-btn').forEach(b => b.className = "graphic-cat-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white");
            if(el) el.className = "graphic-cat-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[9px] shadow-inner";
            persistData();
        }
        
        function setPrintCondition(cond, el) {
            data.printCondition = cond;
            document.querySelectorAll('.print-cond-btn').forEach(b => b.className = "print-cond-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white");
            if(el) el.className = "print-cond-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[9px] shadow-inner";
            persistData();
        }
        
        function setCollarStyle(style, el) {
            data.collarStyle = style;
            document.querySelectorAll('.collar-btn').forEach(b => b.className = "collar-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white");
            if(el) el.className = "collar-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[9px] shadow-inner";
            persistData();
        }
        
        function setStitchType(type, el) {
            data.stitchType = type;
            document.querySelectorAll('.stitch-btn').forEach(b => b.className = "stitch-btn py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-500 text-sm bg-white transition-all");
            if(el) {
                if(type === 'Single') {
                    el.className = "stitch-btn py-3 border-2 border-amber-500 bg-amber-50 text-amber-700 rounded-xl font-bold text-sm shadow-inner transition-all";
                } else {
                    el.className = "stitch-btn py-3 border-2 border-blue-600 bg-blue-50 text-blue-600 rounded-xl font-bold text-sm shadow-inner transition-all";
                }
            }
            persistData();
        }
        
        function setFadeLevel(level, el) {
            data.fadeLevel = level;
            document.querySelectorAll('.fade-btn').forEach(b => b.className = "fade-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white");
            if(el) el.className = "fade-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[9px] shadow-inner";
            persistData();
        }
        
        function handleBrandChange() {
            const select = document.getElementById('brand-select');
            const customInput = document.getElementById('brand-custom');
            data.brand = select.value;
            
            if (select.value === 'Custom') {
                customInput.classList.remove('hidden');
                customInput.focus();
            } else {
                customInput.classList.add('hidden');
                customInput.value = '';
                data.brandCustom = '';
            }
            persistData();
        }
        
        function setWash(wash, el) {
            data.wash = wash;
            document.querySelectorAll('.wash-btn').forEach(b => b.className = "wash-btn py-2 border border-gray-200 rounded-lg font-bold text-gray-500 text-[9px] bg-white");
            if(el) el.className = "wash-btn py-2 border border-blue-600 bg-blue-50 text-blue-600 rounded-lg font-bold text-[9px] shadow-inner";
            persistData();
        }

        function updateCatLogic() {
            updateMeasureHint();
            renderDefectMaps();
            const cat = document.getElementById('cat-select').value;
            if(cat && cat !== 'Select Category...') updateFeatureButtons(cat);
        }

        function renderDefectMaps() {
            let svgFront, svgBack;
            if (data.superCategory === 'bottoms') {
                const cat = document.getElementById('cat-select').value;
                if (cat === 'Shorts') { svgFront = SVG_SHORTS_FRONT; svgBack = SVG_SHORTS_BACK; } 
                else { svgFront = SVG_PANTS_FRONT; svgBack = SVG_PANTS_BACK; }
            } else {
                svgFront = SVG_SHORT_FRONT; svgBack = SVG_SHORT_BACK;
                if (data.sleeveType === 'Long') { svgFront = SVG_LONG_FRONT; svgBack = SVG_LONG_BACK; } 
                else if (data.sleeveType === '3/4') { svgFront = SVG_34_FRONT; svgBack = SVG_34_BACK; } 
                else if (data.sleeveType === 'None') { svgFront = SVG_SLEEVELESS_FRONT; svgBack = SVG_SLEEVELESS_BACK; }
            }
            const mapFront = document.getElementById('map-front');
            mapFront.innerHTML = svgFront;
            attachZoneListeners(mapFront, 'Front');
            const mapBack = document.getElementById('map-back');
            mapBack.innerHTML = svgBack;
            attachZoneListeners(mapBack, 'Back');
        }

        function attachZoneListeners(container, side) {
            const zones = container.querySelectorAll('.zone-hit');
            zones.forEach(zone => {
                zone.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const zoneName = zone.getAttribute('data-zone');
                    const rect = zone.getBBox();
                    const centerX = ((rect.x + rect.width/2) / 768) * 100;
                    const centerY = ((rect.y + rect.height/2) / 768) * 100;
                    handleZoneClick(e, side, zoneName, centerX, centerY);
                });
            });
        }

        function handleZoneClick(e, side, zoneName, x, y) {
            e.stopPropagation();
            data.tempDefect = { x, y, side, zone: zoneName };
            document.getElementById('zone-label').innerText = `${side.toUpperCase()} ‚Ä¢ ${zoneName}`;
            document.getElementById('defect-type-modal').classList.remove('hidden');
        }

        function selectDefectType(type) {
            data.tempDefect.type = type;
            document.getElementById('defect-type-modal').classList.add('hidden');
            openCamera('defect');
        }

        function addDefectMarker(defect) {
            const dot = document.createElement('div');
            dot.className = "defect-dot defect-marker-dot";
            dot.style.left = `${defect.x}%`;
            dot.style.top = `${defect.y}%`;
            dot.innerText = data.defectPhotos.length;
            dot.dataset.zone = defect.zone;
            dot.dataset.side = defect.side;
            const container = defect.side === 'Front' ? document.getElementById('dots-front') : document.getElementById('dots-back');
            container.appendChild(dot);
        }

        let stream;
        async function openCamera(mode, subType = null) {
            data.cameraMode = mode;
            if(mode === 'feature' && subType) data.currentFeatureName = subType;
            if(mode === 'tag' && subType) data.currentTagType = subType;
            
            let modeLabel = mode.toUpperCase();
            if(mode === 'feature') modeLabel = `FEATURE: ${subType}`;
            if(mode === 'tag' && subType === 'neck') modeLabel = 'NECK TAG';
            if(mode === 'tag' && subType === 'care') modeLabel = 'CARE/HIP TAG';
            document.getElementById('cam-mode-label').innerText = modeLabel;
            
            let countText = "0";
            if(mode === 'main') countText = data.mainPhotos.length;
            else if(mode === 'tag') countText = data.tagPhotos.length;
            else if(mode === 'defect') countText = data.defectPhotos.length;
            else if(mode === 'feature') countText = data.featurePhotos.length;
            document.getElementById('cam-count').innerText = countText;
            
            try { 
                // Request highest possible resolution - 4K preferred
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        facingMode: "environment", 
                        width: { ideal: 4032, min: 1920 },  
                        height: { ideal: 3024, min: 1080 },
                        aspectRatio: { ideal: 4/3 }
                    } 
                }); 
                document.getElementById('cam-feed').srcObject = stream; 
                document.getElementById('cam-overlay').classList.remove('hidden');
                // Start stabilizer
                startStabilizer();
            } catch(e) { alert("Cam Error: " + e.message); }
        }
        
        // ========== STABILIZER ==========
        let stabilizerInterval = null;
        let previousFrame = null;
        let stableFrameCount = 0;
        const STABLE_THRESHOLD = 3;  // Frames needed to be considered stable
        const MOTION_THRESHOLD = 15; // Pixel difference threshold (lower = more sensitive)
        let isStable = false;
        
        function startStabilizer() {
            isStable = false;
            stableFrameCount = 0;
            previousFrame = null;
            updateStabilizerUI(false);
            
            const video = document.getElementById('cam-feed');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d', { willReadFrequently: true });
            
            // Use small sample size for performance (64x64)
            canvas.width = 64;
            canvas.height = 64;
            
            stabilizerInterval = setInterval(() => {
                if (video.readyState < 2) return; // Video not ready
                
                // Draw scaled down frame
                ctx.drawImage(video, 0, 0, 64, 64);
                const currentFrame = ctx.getImageData(0, 0, 64, 64).data;
                
                if (previousFrame) {
                    const motion = calculateMotion(previousFrame, currentFrame);
                    
                    if (motion < MOTION_THRESHOLD) {
                        stableFrameCount++;
                        if (stableFrameCount >= STABLE_THRESHOLD && !isStable) {
                            isStable = true;
                            updateStabilizerUI(true);
                        }
                    } else {
                        stableFrameCount = 0;
                        if (isStable) {
                            isStable = false;
                            updateStabilizerUI(false);
                        }
                    }
                }
                
                previousFrame = currentFrame;
            }, 100); // Check 10 times per second
        }
        
        function calculateMotion(prev, curr) {
            let diff = 0;
            const sampleStep = 16; // Sample every 16th pixel for speed
            for (let i = 0; i < prev.length; i += sampleStep * 4) {
                diff += Math.abs(prev[i] - curr[i]);     // R
                diff += Math.abs(prev[i+1] - curr[i+1]); // G
                diff += Math.abs(prev[i+2] - curr[i+2]); // B
            }
            return diff / (prev.length / sampleStep / 4) / 3; // Average per sampled pixel
        }
        
        function updateStabilizerUI(stable) {
            const dot = document.getElementById('stabilizer-dot');
            const text = document.getElementById('stabilizer-text');
            
            if (stable) {
                dot.className = 'w-3 h-3 rounded-full bg-green-500 transition-colors duration-200 animate-pulse';
                text.innerText = 'STABLE ‚úì';
                text.className = 'text-green-400 text-xs font-bold';
            } else {
                dot.className = 'w-3 h-3 rounded-full bg-red-500 transition-colors duration-200';
                text.innerText = 'HOLD STEADY';
                text.className = 'text-white text-xs font-bold';
            }
        }
        
        function stopStabilizer() {
            if (stabilizerInterval) {
                clearInterval(stabilizerInterval);
                stabilizerInterval = null;
            }
            previousFrame = null;
            stableFrameCount = 0;
            isStable = false;
        }

        function takeSnap() {
            // Check if stable - warn but still allow photo
            if (!isStable) {
                // Vibrate to warn user (if supported)
                if (navigator.vibrate) navigator.vibrate(100);
            }
            
            const v = document.getElementById('cam-feed'); 
            const c = document.createElement('canvas');
            
            // Use full video dimensions for maximum quality
            const size = Math.min(v.videoWidth, v.videoHeight); 
            c.width = size; 
            c.height = size;
            
            // Center crop to square at full resolution
            const ctx = c.getContext('2d');
            ctx.imageSmoothingEnabled = true;
            ctx.imageSmoothingQuality = 'high';
            ctx.drawImage(v, (v.videoWidth-size)/2, (v.videoHeight-size)/2, size, size, 0, 0, size, size);
            
            const f = document.getElementById('flash'); f.classList.add('trigger-flash'); setTimeout(()=>f.classList.remove('trigger-flash'),150);
            
            c.toBlob(blob => {
                // Store pending photo for preview
                data.pendingPhoto = { blob, ts: new Date() };
                
                // Show preview modal
                const previewImg = document.getElementById('preview-image');
                previewImg.src = URL.createObjectURL(blob);
                
                let modeLabel = data.cameraMode.toUpperCase();
                if(data.cameraMode === 'feature') modeLabel = `FEATURE: ${data.currentFeatureName}`;
                if(data.cameraMode === 'defect' && data.tempDefect) modeLabel = `DEFECT: ${data.tempDefect.type}`;
                if(data.cameraMode === 'tag' && data.currentTagType === 'neck') modeLabel = 'NECK TAG';
                if(data.cameraMode === 'tag' && data.currentTagType === 'care') modeLabel = 'CARE/HIP TAG';
                document.getElementById('preview-mode-label').innerText = modeLabel;
                
                document.getElementById('photo-preview-modal').classList.remove('hidden');
            }, 'image/jpeg', 0.92);  // High quality JPEG (92%) 
        }
        
        // Accept photo from preview
        function acceptPhoto() {
            const photo = data.pendingPhoto;
            if(!photo) return;
            
            if(data.cameraMode === 'main') {
                if(data.mainPhotos.length === 0) data.timestamps.first_photo = new Date();
                data.mainPhotos.push(photo);
            }
            else if(data.cameraMode === 'tag') {
                photo.tagType = data.currentTagType;
                data.tagPhotos.push(photo);
                // Update tag button to show checkmark
                updateTagButton(data.currentTagType);
            }
            else if(data.cameraMode === 'defect') {
                photo.defectMeta = { ...data.tempDefect };
                data.defectPhotos.push(photo);
                addDefectMarker(photo.defectMeta);
            }
            else if(data.cameraMode === 'feature') {
                photo.featureName = data.currentFeatureName;
                data.featurePhotos.push(photo);
            }
            
            // Update count display
            let countText = "0";
            if(data.cameraMode === 'main') countText = data.mainPhotos.length;
            else if(data.cameraMode === 'tag') countText = data.tagPhotos.length;
            else if(data.cameraMode === 'defect') countText = data.defectPhotos.length;
            else if(data.cameraMode === 'feature') countText = data.featurePhotos.length;
            
            if(data.cameraMode !== 'defect' && data.cameraMode !== 'feature') 
                document.getElementById('cam-count').innerText = countText;
            
            updateThumbs(data.cameraMode);
            data.pendingPhoto = null;
            document.getElementById('photo-preview-modal').classList.add('hidden');
            
            // Close camera for single-shot modes
            if(data.cameraMode === 'defect' || data.cameraMode === 'feature') {
                closeCamera();
            }
        }
        
        function updateTagButton(tagType) {
            const cat = document.getElementById('cat-select').value;
            const isBottoms = ['Jeans', 'Pants', 'Shorts', 'Sweatpants', 'Overalls', 'Jumpsuit'].some(b => cat && cat.includes(b));
            
            if(tagType === 'neck') {
                const btn = document.getElementById('btn-snap-neck');
                const label = isBottoms ? 'INSIDE TAG' : 'NECK TAG';
                btn.className = "w-full py-5 rounded-xl border-2 border-green-500 bg-green-50 text-green-700 font-bold flex flex-col items-center justify-center gap-2 shadow-md";
                btn.innerHTML = `<span class="text-xl">‚úì</span><span class="text-xs">${label}</span>`;
            } else if(tagType === 'care') {
                const btn = document.getElementById('btn-snap-care');
                const label = isBottoms ? 'CARE TAG' : 'CARE TAG';
                btn.className = "w-full py-5 rounded-xl border-2 border-green-500 bg-green-50 text-green-700 font-bold flex flex-col items-center justify-center gap-2 shadow-md";
                btn.innerHTML = `<span class="text-xl">‚úì</span><span class="text-xs">${label}</span>`;
            }
        }
        
        // Reject photo and retake
        function rejectPhoto() {
            data.pendingPhoto = null;
            document.getElementById('photo-preview-modal').classList.add('hidden');
            // Camera stays open for retake
        }

        function updateThumbs(mode) {
            const targetId = mode === 'feature' ? 'thumbs-feature' : `thumbs-${mode}`;
            const div = document.getElementById(targetId); 
            if(!div) return;
            div.innerHTML='';
            
            let list = [];
            if(mode === 'main') {
                list = data.mainPhotos;
                document.getElementById('count-main').innerText = data.mainPhotos.length;
            }
            else if(mode === 'tag') list = data.tagPhotos;
            else if(mode === 'defect') list = data.defectPhotos;
            else if(mode === 'feature') list = data.featurePhotos;
            
            list.forEach((p,i) => {
                const img = document.createElement('img'); img.src = URL.createObjectURL(p.blob);
                img.className = "h-20 w-20 object-cover rounded border-2 border-gray-200 flex-shrink-0";
                const wrap = document.createElement('div'); wrap.className="relative flex-shrink-0 group";
                wrap.appendChild(img);
                
                // Delete button (X) - shows on tap/hover
                const deleteBtn = document.createElement('button');
                deleteBtn.className = "absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-lg font-black shadow-xl active:bg-red-700 z-10 border-2 border-white";
                deleteBtn.innerHTML = '‚úï';
                deleteBtn.onclick = (e) => { e.stopPropagation(); deletePhoto(mode, i); };
                wrap.appendChild(deleteBtn);
                
                if(mode==='defect') {
                    // Label showing defect type and number
                    const label = document.createElement('div');
                    label.className = "absolute bottom-0 inset-x-0 bg-orange-600/90 text-white text-[8px] text-center truncate px-1 py-0.5 font-bold";
                    const defectType = p.defectMeta ? p.defectMeta.type : 'Defect';
                    label.innerText = `#${i+1} ${defectType}`;
                    wrap.appendChild(label);
                }
                else if(mode === 'feature') {
                    const label = document.createElement('div');
                    label.className = "absolute bottom-0 inset-x-0 bg-black/70 text-white text-[8px] text-center truncate px-1 py-0.5";
                    label.innerText = p.featureName;
                    wrap.appendChild(label);
                }
                div.appendChild(wrap);
            });
            
            // Update feature button checkmarks if we just changed feature photos
            if(mode === 'feature') {
                const cat = document.getElementById('cat-select').value;
                if(cat) updateFeatureButtons(cat);
            }
            
            // Update progress after photo changes
            updateProgress();
        }
        
        function deletePhoto(mode, index) {
            if(mode === 'main') {
                data.mainPhotos.splice(index, 1);
            } else if(mode === 'tag') {
                // Get the tag type before deleting
                const photo = data.tagPhotos[index];
                const tagType = photo ? photo.tagType : null;
                data.tagPhotos.splice(index, 1);
                // Reset the button if no more photos of that type
                if(tagType) {
                    const hasMoreOfType = data.tagPhotos.some(p => p.tagType === tagType);
                    if(!hasMoreOfType) {
                        resetTagButton(tagType);
                    }
                }
            } else if(mode === 'defect') {
                // Also remove the marker from the SVG
                const photo = data.defectPhotos[index];
                if(photo && photo.defectMeta) {
                    removeDefectMarker(photo.defectMeta);
                }
                data.defectPhotos.splice(index, 1);
            } else if(mode === 'feature') {
                data.featurePhotos.splice(index, 1);
            }
            
            updateThumbs(mode);
            persistData();
        }
        
        function resetTagButton(tagType) {
            const cat = document.getElementById('cat-select').value;
            const isBottoms = ['Jeans', 'Pants', 'Shorts', 'Sweatpants', 'Overalls', 'Jumpsuit'].some(b => cat && cat.includes(b));
            
            if(tagType === 'neck') {
                const btn = document.getElementById('btn-snap-neck');
                const label = isBottoms ? 'INSIDE TAG' : 'NECK TAG';
                btn.className = "w-full py-5 rounded-xl border-2 border-amber-400 bg-white text-amber-700 font-bold flex flex-col items-center justify-center gap-2 active:bg-amber-50 shadow-md hover:shadow-lg transition-all";
                btn.innerHTML = `<i data-lucide="camera" class="w-6 h-6"></i><span class="text-xs">${label}</span>`;
                if(typeof lucide !== 'undefined') lucide.createIcons();
            } else if(tagType === 'care') {
                const btn = document.getElementById('btn-snap-care');
                const label = 'CARE TAG';
                btn.className = "w-full py-5 rounded-xl border-2 border-orange-400 bg-white text-orange-700 font-bold flex flex-col items-center justify-center gap-2 active:bg-orange-50 shadow-md hover:shadow-lg transition-all";
                btn.innerHTML = `<i data-lucide="camera" class="w-6 h-6"></i><span class="text-xs">${label}</span>`;
                if(typeof lucide !== 'undefined') lucide.createIcons();
            }
        }
        
        function removeDefectMarker(meta) {
            // Find and remove the marker dot from the SVG
            const markers = document.querySelectorAll('.defect-marker-dot');
            markers.forEach(m => {
                if(m.dataset.zone === meta.zone && m.dataset.side === meta.side) {
                    m.remove();
                }
            });
        }
        
        function closeCamera() { 
            stopStabilizer();
            if(stream) stream.getTracks().forEach(t=>t.stop()); 
            document.getElementById('cam-overlay').classList.add('hidden'); 
        }

        function updateMeasureHint() {
            const cat = document.getElementById('cat-select').value;
            
            // Check if we have detailed measures for this specific category
            let list = detailedMeasures[cat];
            
            if (!list) {
                // Fall back to general category measures
                list = categoryMeasures[data.superCategory];
                if(!list) list = categoryMeasures['tops'];
                if(cat==="Button Shirt") list = [...list, "NECK MEASUREMENT"];
                // Format with numbers
                list = list.map((m, i) => `${i+1}. ${m}`);
            }
            
            let html = '<div class="grid grid-cols-1 gap-1 text-[11px]">';
            list.forEach(m => {
                const isSpecial = m.includes('NECK') || m.includes('STRETCHED');
                html += `<div class="${isSpecial ? 'text-blue-600 font-bold' : ''}">${m}</div>`;
            });
            document.getElementById('measure-hint').innerHTML = html + '</div>';
        }

        function setTagState(state) {
            data.tagStatus = state;
            ['has', 'unreadable', 'none'].forEach(k => document.getElementById(`btn-tag-${k}`).className = "py-4 border border-gray-200 rounded-xl font-bold text-gray-500 text-xs bg-white");
            const active = document.getElementById(`btn-tag-${state}`);
            if(state === 'has') {
                active.className = "py-4 border border-blue-600 bg-blue-50 text-blue-600 rounded-xl font-bold text-xs shadow-inner";
                document.getElementById('section-tag-photos').classList.remove('hidden');
                document.getElementById('section-tag-size').classList.remove('hidden');
                document.getElementById('brand-info-section').classList.remove('hidden');
                document.getElementById('visual-tag-audit').classList.remove('hidden');
            } else {
                active.className = "py-4 border border-gray-800 bg-gray-800 text-white rounded-xl font-bold text-xs shadow-inner";
                document.getElementById('section-tag-photos').classList.add('hidden');
                document.getElementById('section-tag-size').classList.add('hidden');
                document.getElementById('brand-info-section').classList.add('hidden');
                document.getElementById('visual-tag-audit').classList.add('hidden');
            }
            // Re-render lucide icons for newly visible elements
            if(typeof lucide !== 'undefined') lucide.createIcons();
            persistData();
        }
        
        function setTagAudit(value, el) {
            data.visualTagCheck = value;
            // Reset all buttons
            document.querySelectorAll('.tag-audit-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-offset-2', 'ring-blue-500', 'scale-105');
            });
            // Highlight selected
            el.classList.add('ring-2', 'ring-offset-2', 'ring-blue-500', 'scale-105');
            persistData();
        }

        function setOrigin(type, el) {
            data.origin = type;
            document.querySelectorAll('.origin-btn').forEach(b => b.className = "origin-btn py-3 border border-gray-200 rounded-xl font-bold text-gray-500 text-xs transition-all flex items-center justify-center gap-2");
            if(type === 'usa') {
                el.className = "origin-btn py-3 border border-blue-600 bg-blue-50 text-blue-600 rounded-xl font-bold text-xs shadow-inner flex items-center justify-center gap-2";
                document.getElementById('country-select').classList.add('hidden');
                data.madeInCountry = 'USA';
            } else {
                el.className = "origin-btn py-3 border border-green-600 bg-green-50 text-green-600 rounded-xl font-bold text-xs shadow-inner flex items-center justify-center gap-2";
                document.getElementById('country-select').classList.remove('hidden');
                data.madeInCountry = '';
            }
            persistData();
        }

        function setTagSize(size, el) { 
            data.tagSize = size; 
            document.getElementById('tag-size-input').value=""; 
            document.querySelectorAll('.size-btn').forEach(b=>b.className="size-btn py-3 border border-gray-200 rounded-md font-bold text-gray-600 bg-white text-xs"); 
            if(el) el.className="size-btn py-3 border border-blue-600 bg-blue-600 text-white rounded-md font-bold shadow text-xs"; 
            // Update weight hint with new size
            const cat = document.getElementById('cat-select').value;
            if(cat) updateWeightHint(cat);
            persistData();
        }
        
        function clearTagSizeBtns() { 
            document.querySelectorAll('.size-btn').forEach(b=>b.className="size-btn py-3 border border-gray-200 rounded-md font-bold text-gray-600 bg-white text-xs"); 
            data.tagSize=""; 
            const cat = document.getElementById('cat-select').value;
            if(cat) updateWeightHint(cat);
            persistData(); 
        }
        
        function handleConditionChange() {
            const condition = document.getElementById('cond-select').value;
            // Auto-select "Has Defects" when Poor condition is chosen
            if (condition === 'Poor ‚Äì major flaws') {
                setDefectState(true);
            }
            persistData();
        }
        
        function setDefectState(h) { 
            data.hasDefects=h; 
            if(h) { 
                document.getElementById('btn-has-defects').className="flex-1 py-4 border border-red-500 bg-red-50 text-red-600 rounded-xl font-bold shadow-inner"; 
                document.getElementById('btn-no-defects').className="flex-1 py-4 border border-gray-200 bg-white text-gray-400 font-bold"; 
                document.getElementById('defect-content').classList.remove('hidden'); 
            } else { 
                document.getElementById('btn-no-defects').className="flex-1 py-4 border border-green-500 bg-green-50 text-green-700 rounded-xl font-bold shadow-inner"; 
                document.getElementById('btn-has-defects').className="flex-1 py-4 border border-gray-200 bg-white text-gray-400 font-bold"; 
                document.getElementById('defect-content').classList.add('hidden'); 
                // scrollToNext('section-measure');
            }
            persistData();
        }

        async function recordAudio(key) {
            const btn = document.getElementById(`rec-${key}`);
            if(recorders[key] && recorders[key].state==='recording') { 
                recorders[key].stop(); 
                btn.classList.remove('recording'); 
                if(key==='tag') btn.innerHTML=`<i data-lucide="check" class="w-6 h-6"></i><span>Audio Saved</span>`; 
                else document.getElementById('lbl-measure').innerText="Saved"; 
                lucide.createIcons(); 
                return; 
            }
            if(!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) return alert("Audio recording not supported");
            
            try { 
                const s = await navigator.mediaDevices.getUserMedia({audio:true}); 
                const r = new MediaRecorder(s); 
                let chunks=[]; 
                r.ondataavailable=e=>chunks.push(e.data); 
                r.onstop=()=>{ 
                    const blob=new Blob(chunks,{type:'audio/webm'}); 
                    if(key==='tag') data.audioTag=blob; else data.audioMeasure=blob; 
                    s.getTracks().forEach(t=>t.stop());
                    updateProgress();
                }; 
                r.start(); recorders[key]=r; 
                btn.classList.add('recording'); 
                if(key==='tag') btn.innerHTML=`<span>RECORDING...</span>`; 
                else document.getElementById('lbl-measure').innerText="RECORDING..."; 
            } catch(e) { alert("Microphone access denied: " + e.message); }
        }

        // SAFETY NET: Helper to stop active recordings
        function stopActiveRecordings() {
            return new Promise(resolve => {
                let pending = 0;
                ['tag', 'measure'].forEach(key => {
                    if(recorders[key] && recorders[key].state === 'recording') {
                        pending++;
                        // Hook into onstop to resolve when done
                        const originalOnStop = recorders[key].onstop;
                        recorders[key].onstop = () => {
                            if(originalOnStop) originalOnStop();
                            pending--;
                            if(pending === 0) resolve();
                        };
                        recorders[key].stop();
                        document.getElementById(`rec-${key}`).classList.remove('recording');
                    }
                });
                if(pending === 0) resolve();
            });
        }

        async function submitData() {
            // 1. SAFETY NET: Stop any audio recording before submitting
            await stopActiveRecordings();

            data.timestamps.submit_pressed = new Date();

            const sku = document.getElementById('sku-input').value;
            if(!sku) return alert("Missing SKU");
            if(data.mainPhotos.length === 0) return alert("Take Main Photos");
            if(data.itemWeightTotalOz === 0) return alert("Enter Item Weight (Section 12)");
            if(!document.getElementById('fabric-select').value) return alert("Select Fabric");
            if(!data.colorPrimary) return alert("Select Primary Color");
            
            const modal = document.getElementById('upload-modal'); modal.classList.remove('hidden');
            const fd = new FormData();
            fd.append('sku', sku); fd.append('auth_pin', APP_PIN);
            fd.append('photographer', data.photographer);
            fd.append('mode', data.mode); 
            fd.append('super_category', data.superCategory); 
            fd.append('tag_status', data.tagStatus); fd.append('has_defects', data.hasDefects);
            fd.append('category', document.getElementById('cat-select').value); fd.append('gender', data.gender); fd.append('condition', document.getElementById('cond-select').value);
            const fabricValue = document.getElementById('fabric-select').value;
            const customBlend = document.getElementById('fabric-custom').value;
            fd.append('fabric', fabricValue === 'Custom Blend' && customBlend ? customBlend : fabricValue); 
            fd.append('thickness', data.thickness);
            fd.append('texture', data.texture);
            fd.append('construction', data.construction);
            fd.append('color_primary', data.colorPrimary);
            fd.append('color_secondary', data.colorSecondary);
            fd.append('fade_level', data.fadeLevel);
            fd.append('print_type', data.printType);
            fd.append('graphic_category', data.graphicCategory);
            fd.append('print_condition', data.printCondition);
            fd.append('collar_style', data.collarStyle);
            fd.append('stitch_type', data.stitchType);
            fd.append('wash', data.wash);
            fd.append('pattern', data.pattern);
            fd.append('visual_tag_check', data.visualTagCheck);
            fd.append('origin', data.origin); fd.append('made_in_country', data.madeInCountry); 
            fd.append('copyright_year', data.copyrightYear);
            fd.append('era', data.era);
            // Brand info (replaces audio)
            const brandValue = data.brand === 'Custom' && data.brandCustom ? data.brandCustom : data.brand;
            fd.append('brand', brandValue);
            fd.append('rn_number', data.rnNumber);
            fd.append('style_name', data.styleName);
            if(data.tagStatus === 'has') fd.append('tag_size', data.tagSize);
            fd.append('sleeve_type', data.sleeveType);
            fd.append('sleeve_style', data.sleeveStyle); 
            fd.append('fit_types', JSON.stringify(data.fitTypes)); 
            if(data.bottomsStyle) fd.append('bottoms_style', data.bottomsStyle);
            
            // Button Shirt Type specific fields
            if(data.buttonShirtType) {
                fd.append('button_shirt_type', data.buttonShirtType);
                if(data.buttonShirtType === 'Western') {
                    fd.append('western_closure', data.westernClosure);
                    fd.append('western_yoke', data.westernYoke);
                    fd.append('western_pocket', data.westernPocket);
                    fd.append('western_embroidery', data.westernEmbroidery);
                    fd.append('western_chain_stitch', data.westernChainStitch);
                }
                if(data.buttonShirtType === 'Dress') {
                    fd.append('dress_neck_size', data.dressNeckSize);
                    fd.append('dress_sleeve_size', data.dressSleeveSize);
                    fd.append('dress_collar', data.dressCollar);
                    fd.append('dress_cuff', data.dressCuff);
                    fd.append('dress_buttons', data.dressButtons);
                    fd.append('dress_pleat', data.dressPleat);
                }
                if(data.buttonShirtType === 'Camp') {
                    fd.append('camp_collar', data.campCollar);
                    fd.append('camp_fabric', data.campFabric);
                    fd.append('camp_buttons', data.campButtons);
                    fd.append('camp_print', data.campPrint);
                    fd.append('camp_hem', data.campHem);
                }
                if(data.buttonShirtType === 'Flannel') {
                    fd.append('flannel_weight', data.flannelWeight);
                    fd.append('flannel_plaid_type', data.flannelPlaidType);
                    fd.append('flannel_plaid_style', data.flannelPlaidStyle);
                    fd.append('flannel_pattern_match', data.flannelPatternMatch);
                    fd.append('flannel_buttons', data.flannelButtons);
                }
                if(data.buttonShirtType === 'Work') {
                    fd.append('work_fabric', data.workFabric);
                    fd.append('work_pockets', data.workPockets);
                    fd.append('work_construction', data.workConstruction);
                    fd.append('work_features', JSON.stringify(data.workFeatures || []));
                    fd.append('work_color', data.workColor);
                }
                if(data.buttonShirtType === 'Casual') {
                    fd.append('casual_collar', data.casualCollar);
                    fd.append('casual_hem', data.casualHem);
                    fd.append('casual_pocket', data.casualPocket);
                }
            } 
            
            // Polo Shirt Type specific fields
            if(data.poloShirtType) {
                fd.append('polo_shirt_type', data.poloShirtType);
                if(data.poloShirtType === 'Classic') {
                    fd.append('polo_placket', data.poloPlacket);
                    fd.append('polo_collar', data.poloCollar);
                    fd.append('polo_knit', data.poloKnit);
                    fd.append('polo_button', data.poloButton);
                    fd.append('polo_logo', data.poloLogo);
                    fd.append('polo_sleeve_band', data.poloSleeveBand);
                    fd.append('polo_hem', data.poloHem);
                    fd.append('polo_silhouette', data.poloSilhouette);
                }
                if(data.poloShirtType === 'Rugby') {
                    fd.append('rugby_collar', data.rugbyCollar);
                    fd.append('rugby_button', data.rugbyButton);
                    fd.append('rugby_placket', data.rugbyPlacket);
                    fd.append('rugby_stripe', data.rugbyStripe);
                    fd.append('rugby_cuff', data.rugbyCuff);
                    fd.append('rugby_team_elements', JSON.stringify(data.rugbyTeamElements || []));
                    fd.append('rugby_hem', data.rugbyHem);
                    fd.append('rugby_silhouette', data.rugbySilhouette);
                }
            }
            
            // Tank Top specific fields
            if(data.tankStyle) {
                fd.append('tank_style', data.tankStyle);
                fd.append('tank_strap', data.tankStrap);
                fd.append('tank_armhole', data.tankArmhole);
                fd.append('tank_binding', data.tankBinding);
                fd.append('tank_construction', data.tankConstruction);
            }
            
            // T-Shirt Cut-off fields
            if(data.isCutOff) {
                fd.append('is_cut_off', 'true');
                fd.append('cut_off_armhole', data.cutOffArmhole);
            }
            
            // Jersey fields
            if(data.jerseyType) {
                fd.append('jersey_type', data.jerseyType);
                fd.append('jersey_name_num', data.jerseyNameNum);
                fd.append('jersey_era_indicators', JSON.stringify(data.jerseyEraIndicators || []));
                // Sport-specific fields
                if(data.jerseyType === 'Baseball') {
                    fd.append('baseball_style', data.baseballStyle);
                    fd.append('baseball_fabric', data.baseballFabric);
                    fd.append('baseball_lettering', data.baseballLettering);
                } else if(data.jerseyType === 'Basketball') {
                    fd.append('basketball_style', data.basketballStyle);
                    fd.append('basketball_mesh', data.basketballMesh);
                    fd.append('basketball_numbers', data.basketballNumbers);
                    fd.append('basketball_era', data.basketballEra);
                } else if(data.jerseyType === 'Football') {
                    fd.append('football_style', data.footballStyle);
                    fd.append('football_mesh', data.footballMesh);
                    fd.append('football_numbers', data.footballNumbers);
                } else if(data.jerseyType === 'Hockey') {
                    fd.append('hockey_style', data.hockeyStyle);
                    fd.append('hockey_fight_strap', data.hockeyFightStrap);
                    fd.append('hockey_crest', data.hockeyCrest);
                    fd.append('hockey_era', data.hockeyEra);
                } else if(data.jerseyType === 'Soccer') {
                    fd.append('soccer_style', data.soccerStyle);
                    fd.append('soccer_sponsor', data.soccerSponsor);
                } else if(data.jerseyType === 'Cycling') {
                    fd.append('cycling_style', data.cyclingStyle);
                    fd.append('cycling_pockets', data.cyclingPockets);
                    fd.append('cycling_fabric', data.cyclingFabric);
                } else if(data.jerseyType === 'Racing') {
                    fd.append('racing_type', data.racingType);
                    fd.append('racing_patches', data.racingPatches);
                } else if(data.jerseyType === 'Athletic') {
                    fd.append('athletic_style', data.athleticStyle);
                    fd.append('athletic_reversible', data.athleticReversible);
                    fd.append('athletic_team', data.athleticTeam);
                }
            }
            
            // Blouse fields
            if(data.blouseType) {
                fd.append('blouse_type', data.blouseType);
                fd.append('blouse_fabric', data.blouseFabric);
                fd.append('blouse_closure', data.blouseClosure);
                fd.append('blouse_sleeve', data.blouseSleeve);
                // Style-specific fields
                if(data.blouseType === 'Pussy Bow') {
                    fd.append('pussybow_style', data.pussyBowStyle);
                    fd.append('pussybow_collar', data.pussyBowCollar);
                } else if(data.blouseType === 'Victorian') {
                    fd.append('victorian_neck', data.victorianNeck);
                    fd.append('victorian_details', JSON.stringify(data.victorianDetails || []));
                } else if(data.blouseType === 'Peasant') {
                    fd.append('peasant_neck', data.peasantNeck);
                    fd.append('peasant_embellish', data.peasantEmbellish);
                } else if(data.blouseType === 'Button-Front') {
                    fd.append('buttonfront_collar', data.buttonFrontCollar);
                    fd.append('buttonfront_cuff', data.buttonFrontCuff);
                } else if(data.blouseType === 'Wrap') {
                    fd.append('wrap_type', data.wrapType);
                    fd.append('wrap_neckline', data.wrapNeckline);
                } else if(data.blouseType === 'Dressy') {
                    fd.append('dressy_embellish', data.dressyEmbellish);
                    fd.append('dressy_sheer', data.dressySheer);
                } else if(data.blouseType === 'Western') {
                    fd.append('western_blouse_closure', data.westernBlouseClosure);
                    fd.append('western_blouse_details', JSON.stringify(data.westernBlouseDetails || []));
                } else if(data.blouseType === 'Casual') {
                    fd.append('casual_blouse_style', data.casualBlouseStyle);
                    fd.append('casual_blouse_neck', data.casualBlouseNeck);
                }
            }
            
            // Tunic fields
            if(data.tunicType) {
                fd.append('tunic_type', data.tunicType);
                fd.append('tunic_origin', data.tunicOrigin);
                fd.append('tunic_fabric', data.tunicFabric);
                fd.append('tunic_length', data.tunicLength);
                // Style-specific fields
                if(data.tunicType === 'Dashiki') {
                    fd.append('dashiki_neck', data.dashikiNeck);
                    fd.append('dashiki_print', data.dashikiPrint);
                } else if(data.tunicType === 'Indian') {
                    fd.append('indian_embellish', data.indianEmbellish);
                    fd.append('indian_neck', data.indianNeck);
                } else if(data.tunicType === 'Moroccan') {
                    fd.append('moroccan_embellish', data.moroccanEmbellish);
                    fd.append('moroccan_closure', data.moroccanClosure);
                } else if(data.tunicType === 'Peasant') {
                    fd.append('peasant_tunic_embellish', data.peasantTunicEmbellish);
                    fd.append('peasant_tunic_sleeve', data.peasantTunicSleeve);
                } else if(data.tunicType === 'Asian') {
                    fd.append('asian_closure', data.asianClosure);
                    fd.append('asian_details', JSON.stringify(data.asianDetails || []));
                } else if(data.tunicType === 'Beach') {
                    fd.append('beach_fabric', data.beachFabric);
                    fd.append('beach_coverage', data.beachCoverage);
                } else if(data.tunicType === 'Modern') {
                    fd.append('modern_style', data.modernStyle);
                    fd.append('modern_neck', data.modernNeck);
                }
            }
            
            // Jeans fields
            if(data.jeansType) {
                fd.append('jeans_type', data.jeansType);
                fd.append('jeans_selvedge', data.jeansSelvedge);
                fd.append('jeans_fly', data.jeansFly);
                fd.append('jeans_origin', data.jeansOrigin);
                fd.append('jeans_weight', data.jeansWeight);
                // Type-specific fields
                if(data.jeansType === 'Levis') {
                    fd.append('levis_model', data.levisModel);
                    fd.append('levis_tab', data.levisTab);
                    fd.append('levis_era_indicators', JSON.stringify(data.levisEraIndicators || []));
                } else if(data.jeansType === 'Lee') {
                    fd.append('lee_style', data.leeStyle);
                    fd.append('lee_era_indicators', JSON.stringify(data.leeEraIndicators || []));
                } else if(data.jeansType === 'Wrangler') {
                    fd.append('wrangler_style', data.wranglerStyle);
                    fd.append('wrangler_era_indicators', JSON.stringify(data.wranglerEraIndicators || []));
                } else if(data.jeansType === 'Designer80s') {
                    fd.append('designer80s_brand', data.designer80sBrand);
                    fd.append('designer80s_style', data.designer80sStyle);
                } else if(data.jeansType === 'Y2KPremium') {
                    fd.append('y2k_premium_brand', data.y2kPremiumBrand);
                    fd.append('y2k_premium_rise', data.y2kPremiumRise);
                    fd.append('y2k_premium_detail', data.y2kPremiumDetail);
                } else if(data.jeansType === 'Y2KMall') {
                    fd.append('y2k_mall_brand', data.y2kMallBrand);
                    fd.append('y2k_mall_leg', data.y2kMallLeg);
                    fd.append('y2k_mall_embellish', data.y2kMallEmbellish);
                } else if(data.jeansType === 'Japanese') {
                    fd.append('japanese_brand', data.japaneseBrand);
                    fd.append('japanese_weight', data.japaneseWeight);
                    fd.append('japanese_selvedge_color', data.japaneseSelvedgeColor);
                } else if(data.jeansType === 'Workwear') {
                    fd.append('workwear_brand', data.workwearBrand);
                    fd.append('workwear_construction', data.workwearConstruction);
                } else if(data.jeansType === 'Other') {
                    fd.append('other_jeans_type', data.otherJeansType);
                    fd.append('other_jeans_feature', data.otherJeansFeature);
                }
            }
            
            // Pants fields
            if(data.pantsType) {
                fd.append('pants_type', data.pantsType);
                fd.append('pants_rise', data.pantsRise);
                fd.append('pants_leg', data.pantsLeg);
                fd.append('pants_origin', data.pantsOrigin);
                if(data.pantsType === 'Military') {
                    fd.append('military_style', data.militaryStyle);
                    fd.append('military_era_indicators', JSON.stringify(data.militaryEraIndicators || []));
                    fd.append('military_fabric', data.militaryFabric);
                } else if(data.pantsType === 'Work') {
                    fd.append('work_pants_brand', data.workPantsBrand);
                    fd.append('work_pants_era_indicators', JSON.stringify(data.workPantsEraIndicators || []));
                } else if(data.pantsType === 'Track') {
                    fd.append('track_brand', data.trackBrand);
                    fd.append('track_style', data.trackStyle);
                    fd.append('track_era', data.trackEra);
                } else if(data.pantsType === '80sFashion') {
                    fd.append('p80s_style', data.p80sStyle);
                    fd.append('p80s_fabric', data.p80sFabric);
                } else if(data.pantsType === 'Y2K') {
                    fd.append('y2k_pants_style', data.y2kPantsStyle);
                    fd.append('y2k_pants_brand', data.y2kPantsBrand);
                } else if(data.pantsType === 'Corduroy') {
                    fd.append('cord_wale', data.cordWale);
                    fd.append('cord_era_indicators', JSON.stringify(data.cordEraIndicators || []));
                } else if(data.pantsType === 'Dress') {
                    fd.append('dress_pants_style', data.dressPantsStyle);
                    fd.append('dress_pants_details', JSON.stringify(data.dressPantsDetails || []));
                } else if(data.pantsType === 'Cargo') {
                    fd.append('cargo_style', data.cargoStyle);
                    fd.append('cargo_pockets', data.cargoPockets);
                } else if(data.pantsType === 'Chino') {
                    fd.append('chino_style', data.chinoStyle);
                    fd.append('chino_era', data.chinoEra);
                }
            }
            
            // Shorts fields
            if(data.shortsType) {
                fd.append('shorts_type', data.shortsType);
                fd.append('shorts_length', data.shortsLength);
                fd.append('shorts_origin', data.shortsOrigin);
                if(data.shortsType === 'Board') fd.append('board_brand', data.boardBrand);
                else if(data.shortsType === 'Denim') {
                    fd.append('denim_shorts_type', data.denimShortsType);
                    fd.append('denim_shorts_brand', data.denimShortsBrand);
                } else if(data.shortsType === 'Athletic') {
                    fd.append('athletic_shorts_brand', data.athleticShortsBrand);
                    fd.append('athletic_shorts_era', data.athleticShortsEra);
                } else if(data.shortsType === 'Y2K') {
                    fd.append('y2k_shorts_style', data.y2kShortsStyle);
                }
            }
            
            // Sweatpants fields
            if(data.sweatpantsType) {
                fd.append('sweatpants_type', data.sweatpantsType);
                fd.append('sweats_cuff', data.sweatsCuff);
                fd.append('sweats_origin', data.sweatsOrigin);
                if(data.sweatpantsType === 'Vintage') fd.append('vintage_sweats_brand', data.vintageSweetsBrand);
                else if(data.sweatpantsType === 'Y2KVelour') {
                    fd.append('y2k_velour_brand', data.y2kVelourBrand);
                    fd.append('y2k_velour_detail', data.y2kVelourDetail);
                } else if(data.sweatpantsType === 'Y2KLogo') {
                    fd.append('y2k_logo_brand', data.y2kLogoBrand);
                }
            }
            
            // Overalls fields
            if(data.overallsType) {
                fd.append('overalls_type', data.overallsType);
                fd.append('overalls_brand', data.overallsBrand);
                fd.append('overalls_era_indicators', JSON.stringify(data.overallsEraIndicators || []));
                fd.append('overalls_fabric', data.overallsFabric);
            }
            
            // Jumpsuit fields
            if(data.jumpsuitType) {
                fd.append('jumpsuit_type', data.jumpsuitType);
                fd.append('jumpsuit_closure', data.jumpsuitClosure);
                fd.append('jumpsuit_origin', data.jumpsuitOrigin);
                if(data.jumpsuitType === 'Flight') {
                    fd.append('flight_type', data.flightType);
                    fd.append('flight_patches', data.flightPatches);
                } else if(data.jumpsuitType === 'Boiler') {
                    fd.append('boiler_brand', data.boilerBrand);
                    fd.append('boiler_era', data.boilerEra);
                } else if(data.jumpsuitType === 'Ski') {
                    fd.append('ski_brand', data.skiBrand);
                    fd.append('ski_era', data.skiEra);
                } else if(data.jumpsuitType === 'Disco') {
                    fd.append('disco_style', data.discoStyle);
                    fd.append('disco_fabric', data.discoFabric);
                }
            }
            
            // Jacket fields
            if(data.jacketType) {
                fd.append('jacket_type', data.jacketType);
                fd.append('jacket_closure', data.jacketClosure);
                fd.append('jacket_origin', data.jacketOrigin);
                if(data.jacketType === 'Denim') {
                    fd.append('denim_jacket_brand', data.denimJacketBrand);
                    fd.append('denim_jacket_levis_type', data.denimJacketLevisType);
                    fd.append('denim_jacket_tab', data.denimJacketTab);
                    fd.append('denim_jacket_lining', data.denimJacketLining);
                    fd.append('denim_jacket_era', data.denimJacketEra);
                } else if(data.jacketType === 'Varsity') {
                    fd.append('varsity_body', data.varsityBody);
                    fd.append('varsity_sleeve', data.varsitySleeve);
                    fd.append('varsity_patches', data.varsityPatches);
                    fd.append('varsity_era', data.varsityEra);
                } else if(data.jacketType === 'Bomber') {
                    fd.append('bomber_type', data.bomberType);
                    fd.append('bomber_issue', data.bomberIssue);
                    fd.append('bomber_patches', data.bomberPatches);
                    fd.append('bomber_era', data.bomberEra);
                } else if(data.jacketType === 'Leather') {
                    fd.append('leather_style', data.leatherStyle);
                    fd.append('leather_brand', data.leatherBrand);
                    fd.append('leather_features_json', JSON.stringify(data.leatherFeatures || []));
                } else if(data.jacketType === 'Track') {
                    fd.append('track_jacket_brand', data.trackJacketBrand);
                    fd.append('track_jacket_style', data.trackJacketStyle);
                    fd.append('track_jacket_era', data.trackJacketEra);
                } else if(data.jacketType === 'Ski') {
                    fd.append('ski_jacket_brand', data.skiJacketBrand);
                    fd.append('ski_jacket_fill', data.skiJacketFill);
                    fd.append('ski_jacket_era', data.skiJacketEra);
                } else if(data.jacketType === 'Work') {
                    fd.append('work_jacket_brand', data.workJacketBrand);
                    fd.append('work_jacket_style', data.workJacketStyle);
                    fd.append('work_jacket_lining', data.workJacketLining);
                } else if(data.jacketType === 'Racing') {
                    fd.append('racing_jkt_type', data.racingJktType);
                    fd.append('racing_jkt_patches', data.racingJktPatches);
                    fd.append('racing_jkt_era', data.racingJktEra);
                } else if(data.jacketType === 'Starter') {
                    fd.append('starter_brand', data.starterBrand);
                    fd.append('starter_league', data.starterLeague);
                    fd.append('starter_style', data.starterStyle);
                } else if(data.jacketType === 'Windbreaker') {
                    fd.append('windbreaker_style', data.windbreakerStyle);
                    fd.append('windbreaker_era', data.windbreakerEra);
                } else if(data.jacketType === 'Harrington') {
                    fd.append('harrington_brand', data.harringtonBrand);
                    fd.append('harrington_origin', data.harringtonOrigin);
                } else if(data.jacketType === 'Band') {
                    fd.append('band_jacket_style', data.bandJacketStyle);
                    fd.append('band_jacket_era', data.bandJacketEra);
                }
            }
            
            // Coat fields
            if(data.coatType) {
                fd.append('coat_type', data.coatType);
                fd.append('coat_length', data.coatLength);
                fd.append('coat_origin', data.coatOrigin);
                if(data.coatType === 'Trench') {
                    fd.append('trench_brand', data.trenchBrand);
                    fd.append('trench_features_json', JSON.stringify(data.trenchFeatures || []));
                } else if(data.coatType === 'Peacoat') {
                    fd.append('peacoat_issue', data.peacoatIssue);
                    fd.append('peacoat_era', data.peacoatEra);
                    fd.append('peacoat_buttons', data.peacoatButtons);
                } else if(data.coatType === 'Parka') {
                    fd.append('parka_type', data.parkaType);
                    fd.append('parka_issue', data.parkaIssue);
                    fd.append('parka_hood', data.parkaHood);
                }
            }
            
            // Hoodie fields
            if(data.hoodieType) {
                fd.append('hoodie_type', data.hoodieType);
                fd.append('hoodie_closure', data.hoodieClosure);
                fd.append('hoodie_origin', data.hoodieOrigin);
                if(data.hoodieType === 'Vintage') {
                    fd.append('vintage_hoodie_brand', data.vintageHoodieBrand);
                    fd.append('vintage_hoodie_style', data.vintageHoodieStyle);
                } else if(data.hoodieType === 'Y2K') {
                    fd.append('y2k_hoodie_brand', data.y2kHoodieBrand);
                    fd.append('y2k_hoodie_style', data.y2kHoodieStyle);
                }
            }
            
            // Sweatshirt fields
            if(data.sweatshirtType) {
                fd.append('sweatshirt_type', data.sweatshirtType);
                fd.append('sweatshirt_neck', data.sweatshirtNeck);
                fd.append('sweatshirt_origin', data.sweatshirtOrigin);
                if(data.sweatshirtType === 'Vintage') {
                    fd.append('vintage_sweatshirt_brand', data.vintageSweatshirtBrand);
                    fd.append('vintage_sweatshirt_style', data.vintageSweatshirtStyle);
                    fd.append('vintage_sweatshirt_era', data.vintageSweatshirtEra);
                }
            }
            
            // Sweater fields
            if(data.sweaterType) {
                fd.append('sweater_type', data.sweaterType);
                fd.append('sweater_material', data.sweaterMaterial);
                fd.append('sweater_origin', data.sweaterOrigin);
                fd.append('sweater_era', data.sweaterEra);
                if(data.sweaterType === 'FairIsle') {
                    fd.append('fairisle_pattern', data.fairIslePattern);
                    fd.append('fairisle_origin_style', data.fairIsleOriginStyle);
                } else if(data.sweaterType === 'Cowichan') {
                    fd.append('cowichan_style', data.cowichanStyle);
                    fd.append('cowichan_handknit', data.cowichanHandknit);
                } else if(data.sweaterType === 'Tennis') {
                    fd.append('tennis_sweater_brand', data.tennisSweaterBrand);
                    fd.append('tennis_sweater_style', data.tennisSweaterStyle);
                }
            }
            
            // Cardigan fields
            if(data.cardiganType) {
                fd.append('cardigan_type', data.cardiganType);
                fd.append('cardigan_style', data.cardiganStyle);
                fd.append('cardigan_material', data.cardiganMaterial);
                fd.append('cardigan_origin', data.cardiganOrigin);
                fd.append('cardigan_features_json', JSON.stringify(data.cardiganFeatures || []));
            }
            
            // Vest fields
            if(data.vestType) {
                fd.append('vest_type', data.vestType);
                fd.append('vest_closure', data.vestClosure);
                fd.append('vest_origin', data.vestOrigin);
                if(data.vestType === 'Leather') {
                    fd.append('leather_vest_style', data.leatherVestStyle);
                    fd.append('leather_vest_patches', data.leatherVestPatches);
                } else if(data.vestType === 'Puffer') {
                    fd.append('puffer_vest_brand', data.pufferVestBrand);
                    fd.append('puffer_vest_fill', data.pufferVestFill);
                }
            }

            const defectsMetadata = data.defectPhotos.map((p, i) => ({ index: i+1, type: p.defectMeta.type, zone: p.defectMeta.zone, side: p.defectMeta.side }));
            fd.append('defect_map_json', JSON.stringify(defectsMetadata));
            
            const featuresMetadata = data.featurePhotos.map((p, i) => ({ index: i+1, feature: p.featureName }));
            fd.append('features_json', JSON.stringify(featuresMetadata));
            
            // Photo counts for QC
            fd.append('photo_count_main', data.mainPhotos.length);
            fd.append('photo_count_tag', data.tagPhotos.length);
            fd.append('photo_count_defect', data.defectPhotos.length);
            fd.append('photo_count_feature', data.featurePhotos.length);
            fd.append('photo_count_total', data.mainPhotos.length + data.tagPhotos.length + data.defectPhotos.length + data.featurePhotos.length + 1);
            
            fd.append('kpi_timestamps_json', JSON.stringify(data.timestamps));
            if(data.scanTime) {
                fd.append('scan_time', data.scanTime.toISOString());
                const kpiEnd = new Date(); 
                fd.append('kpi_duration_sec', Math.round((kpiEnd - data.scanTime)/1000));
            }

            data.mainPhotos.forEach((p, i) => fd.append(`main_photo_${i+1}`, p.blob, `${sku}_main_${i+1}.jpg`));
            data.tagPhotos.forEach((p, i) => fd.append(`tag_photo_${i+1}`, p.blob, `${sku}_tag_${i+1}.jpg`));
            data.defectPhotos.forEach((p, i) => fd.append(`defect_photo_${i+1}`, p.blob, `${sku}_defect_${i+1}.jpg`));
            data.featurePhotos.forEach((p, i) => fd.append(`feature_photo_${i+1}_${p.featureName.replace(/\s+/g, '_')}`, p.blob, `${sku}_feature_${i+1}.jpg`));
            
            // Weight data
            fd.append('item_weight_lb', data.itemWeightLb);
            fd.append('item_weight_oz', data.itemWeightOz);
            fd.append('item_weight_total_oz', data.itemWeightTotalOz);
            
            if(data.audioMeasure) fd.append('audio_measure', data.audioMeasure, `${sku}_measure.webm`);

            const xhr = new XMLHttpRequest(); xhr.open("POST", N8N_WEBHOOK_URL, true);
            xhr.upload.onprogress = e => { if(e.lengthComputable) document.getElementById('progress-bar').style.width = `${Math.round((e.loaded/e.total)*100)}%`; };
            xhr.onload = () => { 
                if(xhr.status >= 200 && xhr.status < 300) { 
                    document.getElementById('progress-bar').style.backgroundColor="#22c55e"; 
                    localStorage.removeItem('vl_session_v71'); // Clear session
                    
                    // BATCH PERSISTENCE: Save the last mode for next reload
                    localStorage.setItem('vl_batch_mode', data.superCategory);
                    
                    setTimeout(() => location.reload(), 500); 
                } else { alert("Error"); modal.classList.add('hidden'); } 
            };
            xhr.onerror = () => { alert("Network Error"); modal.classList.add('hidden'); };
            xhr.send(fd);
        }
        
        let html5QrCode = null;
        function toggleScanner() { 
            if(!data.scanTime) data.scanTime=new Date(); 
            const v=document.getElementById('scanner-view'); 
            if(!v.classList.contains('hidden')) {
                // Close scanner
                if(html5QrCode) {
                    html5QrCode.stop().catch(e => console.log("Scanner stop error:", e));
                    html5QrCode = null;
                }
                v.classList.add('hidden');
                return;
            }
            v.classList.remove('hidden'); 
            html5QrCode = new Html5Qrcode("reader");
            html5QrCode.start({facingMode:"environment"}, {fps:10, qrbox:250}, txt=>{ 
                document.getElementById('sku-input').value=txt; 
                html5QrCode.stop().catch(e => console.log("Scanner stop error:", e));
                html5QrCode = null;
                v.classList.add('hidden'); 
                persistData(); 
            });
        }
    </script>
</body>
</html>
